<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>xmipp3.protocols.protocol_subtract_projection &mdash; Scipion 3.0.0 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> Scipion
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Set up</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/scipion-modes/how-to-install.html">Installing Scipion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/scipion-modes/scipion-configuration.html">Scipion configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/scipion-modes/host-configuration.html">Host configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/user/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/user/user-documentation.html">Graphical interface manuals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/user/user-documentation.html#tutorials">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/user/user-documentation.html#processing-how-to-s">Processing How Toâ€™s</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Facilities</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/facilities/facilities.html">On-the-fly processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/facilities/facilities-workflows.html">Streaming workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/facilities/customize-report.html">Summary Reports</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/developer/developers.html">Developers Page</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/api/scipion-API.html">Scipion API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/api/plugins-API.html">Plugins API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/api/xmipp-API.html">Xmipp API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Get in touch</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/misc/contact-us.html">Contact Us</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Licences</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/user/license.html">Licenses</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Scipion</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../index.html">Module code</a> &raquo;</li>
          <li><a href="../../xmipp3.html">xmipp3</a> &raquo;</li>
      <li>xmipp3.protocols.protocol_subtract_projection</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for xmipp3.protocols.protocol_subtract_projection</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="c1"># **************************************************************************</span>
<span class="c1"># *</span>
<span class="c1"># * Authors:  Estrella Fernandez Gimenez (me.fernandez@cnb.csic.es)</span>
<span class="c1"># *</span>
<span class="c1"># *</span>
<span class="c1"># * Unidad de  Bioinformatica of Centro Nacional de Biotecnologia , CSIC</span>
<span class="c1"># *</span>
<span class="c1"># * This program is free software; you can redistribute it and/or modify</span>
<span class="c1"># * it under the terms of the GNU General Public License as published by</span>
<span class="c1"># * the Free Software Foundation; either version 2 of the License, or</span>
<span class="c1"># * (at your option) any later version.</span>
<span class="c1"># *</span>
<span class="c1"># * This program is distributed in the hope that it will be useful,</span>
<span class="c1"># * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1"># * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c1"># * GNU General Public License for more details.</span>
<span class="c1"># *</span>
<span class="c1"># * You should have received a copy of the GNU General Public License</span>
<span class="c1"># * along with this program; if not, write to the Free Software</span>
<span class="c1"># * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA</span>
<span class="c1"># * 02111-1307  USA</span>
<span class="c1"># *</span>
<span class="c1"># *  All comments concerning this program package may be sent to the</span>
<span class="c1"># *  e-mail address &#39;scipion@cnb.csic.es&#39;</span>
<span class="c1"># *</span>
<span class="c1"># **************************************************************************</span>

<span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">basename</span>
<span class="kn">from</span> <span class="nn">pyworkflow.protocol.params</span> <span class="kn">import</span> <span class="n">PointerParam</span><span class="p">,</span> <span class="n">BooleanParam</span><span class="p">,</span> <span class="n">IntParam</span><span class="p">,</span> <span class="n">FloatParam</span><span class="p">,</span> <span class="n">EnumParam</span>
<span class="kn">from</span> <span class="nn">pyworkflow.protocol.constants</span> <span class="kn">import</span> <span class="n">LEVEL_ADVANCED</span>
<span class="kn">from</span> <span class="nn">pwem</span> <span class="kn">import</span> <span class="n">emlib</span>
<span class="kn">from</span> <span class="nn">pwem.protocols</span> <span class="kn">import</span> <span class="n">EMProtocol</span>
<span class="kn">from</span> <span class="nn">xmipp3.convert</span> <span class="kn">import</span> <span class="n">writeSetOfParticles</span><span class="p">,</span> <span class="n">readSetOfParticles</span>
<span class="kn">from</span> <span class="nn">pyworkflow</span> <span class="kn">import</span> <span class="n">BETA</span><span class="p">,</span> <span class="n">UPDATED</span><span class="p">,</span> <span class="n">NEW</span><span class="p">,</span> <span class="n">PROD</span>

<span class="n">OUTPUT</span> <span class="o">=</span> <span class="s2">&quot;output_particles.xmd&quot;</span>

<div class="viewcode-block" id="XmippProtSubtractProjectionBase"><a class="viewcode-back" href="../../../api/xmipp3/xmipp3.protocols.protocol_subtract_projection.html#xmipp3.protocols.protocol_subtract_projection.XmippProtSubtractProjectionBase">[docs]</a><span class="k">class</span> <span class="nc">XmippProtSubtractProjectionBase</span><span class="p">(</span><span class="n">EMProtocol</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Helper class that contains some Protocol utilities methods</span>
<span class="sd">    used by both  XmippProtSubtractProjection and XmippProtBoostParticles.&quot;&quot;&quot;</span>
    <span class="n">_devStatus</span> <span class="o">=</span> <span class="n">UPDATED</span>

    <span class="c1"># --------------------------- DEFINE param functions --------------------------------------------</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_defineParams</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">form</span><span class="p">):</span>
        <span class="n">form</span><span class="o">.</span><span class="n">addSection</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Input&#39;</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">addParam</span><span class="p">(</span><span class="s1">&#39;inputParticles&#39;</span><span class="p">,</span> <span class="n">PointerParam</span><span class="p">,</span> <span class="n">pointerClass</span><span class="o">=</span><span class="s1">&#39;SetOfParticles&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Particles &quot;</span><span class="p">,</span>
                      <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Specify a SetOfParticles&#39;</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">addParam</span><span class="p">(</span><span class="s1">&#39;vol&#39;</span><span class="p">,</span> <span class="n">PointerParam</span><span class="p">,</span> <span class="n">pointerClass</span><span class="o">=</span><span class="s1">&#39;Volume&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Reference volume &quot;</span><span class="p">,</span>
                      <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Specify a volume.&#39;</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">addParam</span><span class="p">(</span><span class="s1">&#39;cirmaskrad&#39;</span><span class="p">,</span> <span class="n">FloatParam</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Circular mask radius: &quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">expertLevel</span><span class="o">=</span><span class="n">LEVEL_ADVANCED</span><span class="p">,</span>
                      <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Radius of the circular mask to avoid edge artifacts. &#39;</span>
                           <span class="s1">&#39;If -1 it is half the X dimension of the input particles&#39;</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">addParam</span><span class="p">(</span><span class="s1">&#39;resol&#39;</span><span class="p">,</span> <span class="n">FloatParam</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Maximum resolution: &quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">expertLevel</span><span class="o">=</span><span class="n">LEVEL_ADVANCED</span><span class="p">,</span>
                      <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Maximum resolution (in A) of the data &#39;</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">addParam</span><span class="p">(</span><span class="s1">&#39;nonNegative&#39;</span><span class="p">,</span> <span class="n">BooleanParam</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Ignore particles with negative beta0 or R2?: &quot;</span><span class="p">,</span>
                      <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                      <span class="n">expertLevel</span><span class="o">=</span><span class="n">LEVEL_ADVANCED</span><span class="p">,</span>
                      <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Particles with negative beta0 or R2 will not appear in the output set as they are &#39;</span>
                           <span class="s1">&#39;considered bad particles. Moreover, negative betas will not contribute to mean beta if &#39;</span>
                           <span class="s1">&#39;&quot;mean&quot; option is selected&#39;</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">addParam</span><span class="p">(</span><span class="s1">&#39;limit_freq&#39;</span><span class="p">,</span> <span class="n">BooleanParam</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Limit frequency?: &quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                      <span class="n">expertLevel</span><span class="o">=</span><span class="n">LEVEL_ADVANCED</span><span class="p">,</span>
                      <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Limit frequency in the adjustment process to the frequency correspondent to the resolution&#39;</span>
                           <span class="s1">&#39; indicated in &quot;Maximum resolution&quot; field above&#39;</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">addParam</span><span class="p">(</span><span class="s1">&#39;sigma&#39;</span><span class="p">,</span> <span class="n">FloatParam</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Decay of the filter (sigma): &quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
                      <span class="n">expertLevel</span><span class="o">=</span><span class="n">LEVEL_ADVANCED</span><span class="p">,</span>
                      <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Decay of the filter (sigma) to smooth the mask transition&#39;</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">addParam</span><span class="p">(</span><span class="s1">&#39;pad&#39;</span><span class="p">,</span> <span class="n">IntParam</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Fourier padding factor: &quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">expertLevel</span><span class="o">=</span><span class="n">LEVEL_ADVANCED</span><span class="p">,</span>
                      <span class="n">help</span><span class="o">=</span><span class="s1">&#39;The volume is zero padded by this factor to produce projections&#39;</span><span class="p">)</span>

    <span class="c1"># --------------------------- INSERT steps functions --------------------------------------------</span>
    <span class="k">def</span> <span class="nf">_insertAllSteps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_insertSubSteps</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_insertFunctionStep</span><span class="p">(</span><span class="s1">&#39;createOutputStep&#39;</span><span class="p">)</span>

    <span class="c1"># --------------------------- STEPS functions --------------------------------------------</span>
<div class="viewcode-block" id="XmippProtSubtractProjectionBase.createOutputStep"><a class="viewcode-back" href="../../../api/xmipp3/xmipp3.protocols.protocol_subtract_projection.html#xmipp3.protocols.protocol_subtract_projection.XmippProtSubtractProjectionBase.createOutputStep">[docs]</a>    <span class="k">def</span> <span class="nf">createOutputStep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">inputSet</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputParticles</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="n">outputSet</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_createSetOfParticles</span><span class="p">()</span>
        <span class="n">outputSet</span><span class="o">.</span><span class="n">copyInfo</span><span class="p">(</span><span class="n">inputSet</span><span class="p">)</span>
        <span class="n">readSetOfParticles</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getExtraPath</span><span class="p">(</span><span class="n">OUTPUT</span><span class="p">),</span> <span class="n">outputSet</span><span class="p">,</span>
                           <span class="n">extraLabels</span><span class="o">=</span><span class="p">[</span><span class="n">emlib</span><span class="o">.</span><span class="n">MDL_SUBTRACTION_R2</span><span class="p">,</span> <span class="n">emlib</span><span class="o">.</span><span class="n">MDL_SUBTRACTION_BETA0</span><span class="p">,</span>
                                        <span class="n">emlib</span><span class="o">.</span><span class="n">MDL_SUBTRACTION_BETA1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_defineOutputs</span><span class="p">(</span><span class="n">outputParticles</span><span class="o">=</span><span class="n">outputSet</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_defineSourceRelation</span><span class="p">(</span><span class="n">inputSet</span><span class="p">,</span> <span class="n">outputSet</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="XmippProtSubtractProjection"><a class="viewcode-back" href="../../../api/xmipp3/xmipp3.protocols.protocol_subtract_projection.html#xmipp3.protocols.protocol_subtract_projection.XmippProtSubtractProjection">[docs]</a><span class="k">class</span> <span class="nc">XmippProtSubtractProjection</span><span class="p">(</span><span class="n">XmippProtSubtractProjectionBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; This protocol computes the subtraction between particles and a reference volume, by computing its projections with the same angles that input particles have. Then, each particle and the correspondent projection of the reference volume are numerically adjusted and subtracted using a mask which denotes the region to keep. &quot;&quot;&quot;</span>

    <span class="n">_label</span> <span class="o">=</span> <span class="s1">&#39;subtract projection&#39;</span>
    <span class="n">INPUT_PARTICLES</span> <span class="o">=</span> <span class="s2">&quot;input_particles.xmd&quot;</span>

    <span class="c1"># --------------------------- DEFINE param functions --------------------------------------------</span>
    <span class="k">def</span> <span class="nf">_defineParams</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form</span><span class="p">):</span>
        <span class="n">XmippProtSubtractProjectionBase</span><span class="o">.</span><span class="n">_defineParams</span><span class="p">(</span><span class="n">form</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">addParam</span><span class="p">(</span><span class="s1">&#39;mask&#39;</span><span class="p">,</span> <span class="n">PointerParam</span><span class="p">,</span> <span class="n">pointerClass</span><span class="o">=</span><span class="s1">&#39;VolumeMask&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Mask &#39;</span><span class="p">,</span> <span class="n">allowsNull</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                      <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Specify a 3D mask for the region of the input volume that you want to keep or subtract, &#39;</span>
                           <span class="s1">&#39;avoiding masks with 1s in background. If no mask is given, the subtraction is performed in&#39;</span>
                           <span class="s1">&#39; whole images.&#39;</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">addParam</span><span class="p">(</span><span class="s1">&#39;subtract&#39;</span><span class="p">,</span> <span class="n">EnumParam</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Keep&quot;</span><span class="p">,</span> <span class="s2">&quot;Subtract&quot;</span><span class="p">],</span> <span class="n">display</span><span class="o">=</span><span class="n">EnumParam</span><span class="o">.</span><span class="n">DISPLAY_HLIST</span><span class="p">,</span>
                      <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Mask contains the part to &quot;</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">addParallelSection</span><span class="p">(</span><span class="n">threads</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">mpi</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

    <span class="c1"># --------------------------- INSERT steps functions --------------------------------------------</span>
    <span class="k">def</span> <span class="nf">_insertSubSteps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_insertFunctionStep</span><span class="p">(</span><span class="s1">&#39;convertStep&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_insertFunctionStep</span><span class="p">(</span><span class="s1">&#39;subtractionStep&#39;</span><span class="p">)</span>

    <span class="c1"># --------------------------- STEPS functions --------------------------------------------</span>
<div class="viewcode-block" id="XmippProtSubtractProjection.convertStep"><a class="viewcode-back" href="../../../api/xmipp3/xmipp3.protocols.protocol_subtract_projection.html#xmipp3.protocols.protocol_subtract_projection.XmippProtSubtractProjection.convertStep">[docs]</a>    <span class="k">def</span> <span class="nf">convertStep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">writeSetOfParticles</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">inputParticles</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getExtraPath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">INPUT_PARTICLES</span><span class="p">))</span></div>

<div class="viewcode-block" id="XmippProtSubtractProjection.subtractionStep"><a class="viewcode-back" href="../../../api/xmipp3/xmipp3.protocols.protocol_subtract_projection.html#xmipp3.protocols.protocol_subtract_projection.XmippProtSubtractProjection.subtractionStep">[docs]</a>    <span class="k">def</span> <span class="nf">subtractionStep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">vol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vol</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
        <span class="n">fnVol</span> <span class="o">=</span> <span class="n">vol</span><span class="o">.</span><span class="n">getFileName</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">fnVol</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.mrc&#39;</span><span class="p">):</span>
            <span class="n">fnVol</span> <span class="o">+=</span> <span class="s1">&#39;:mrc&#39;</span>
        <span class="n">args</span> <span class="o">=</span> <span class="s1">&#39;-i </span><span class="si">%s</span><span class="s1"> --ref </span><span class="si">%s</span><span class="s1"> -o </span><span class="si">%s</span><span class="s1"> --sampling </span><span class="si">%f</span><span class="s1"> --max_resolution </span><span class="si">%f</span><span class="s1"> --padding </span><span class="si">%f</span><span class="s1"> &#39;</span> \
               <span class="s1">&#39;--sigma </span><span class="si">%d</span><span class="s1"> --limit_freq </span><span class="si">%d</span><span class="s1"> --cirmaskrad </span><span class="si">%d</span><span class="s1"> --save </span><span class="si">%s</span><span class="s1"> --oroot </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> \
               <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getExtraPath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">INPUT_PARTICLES</span><span class="p">),</span> <span class="n">fnVol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getExtraPath</span><span class="p">(</span><span class="n">OUTPUT</span><span class="p">),</span>
                <span class="n">vol</span><span class="o">.</span><span class="n">getSamplingRate</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">resol</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">pad</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">sigma</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span>
                <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">limit_freq</span><span class="o">.</span><span class="n">get</span><span class="p">()),</span> <span class="bp">self</span><span class="o">.</span><span class="n">cirmaskrad</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getExtraPath</span><span class="p">(),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_getExtraPath</span><span class="p">(</span><span class="s2">&quot;subtracted_part&quot;</span><span class="p">))</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mask</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="n">fnMask</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">getFileName</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">fnMask</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.mrc&#39;</span><span class="p">):</span>
            <span class="n">fnMask</span> <span class="o">+=</span> <span class="s1">&#39;:mrc&#39;</span>
        <span class="k">if</span> <span class="n">mask</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">args</span> <span class="o">+=</span> <span class="s1">&#39; --mask </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">fnMask</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonNegative</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
            <span class="n">args</span> <span class="o">+=</span> <span class="s1">&#39; --nonNegative&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">subtract</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
            <span class="n">args</span> <span class="o">+=</span> <span class="s1">&#39; --subtract&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">runJob</span><span class="p">(</span><span class="s2">&quot;xmipp_subtract_projection&quot;</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span></div>

    <span class="c1"># --------------------------- INFO functions --------------------------------------------</span>
    <span class="k">def</span> <span class="nf">_validate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">part</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputParticles</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">.</span><span class="n">getFirstItem</span><span class="p">()</span>
        <span class="n">vol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vol</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mask</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">part</span><span class="o">.</span><span class="n">getDim</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="n">vol</span><span class="o">.</span><span class="n">getDim</span><span class="p">()[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Input particles and volume should have same X and Y dimensions&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">round</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">getSamplingRate</span><span class="p">(),</span> <span class="mi">2</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">round</span><span class="p">(</span><span class="n">vol</span><span class="o">.</span><span class="n">getSamplingRate</span><span class="p">(),</span> <span class="mi">2</span><span class="p">):</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Input particles and volume should have same sampling rate&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mask</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">round</span><span class="p">(</span><span class="n">vol</span><span class="o">.</span><span class="n">getSamplingRate</span><span class="p">(),</span> <span class="mi">2</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">round</span><span class="p">(</span><span class="n">mask</span><span class="o">.</span><span class="n">getSamplingRate</span><span class="p">(),</span> <span class="mi">2</span><span class="p">):</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Input volume and mask should have same sampling rate&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">vol</span><span class="o">.</span><span class="n">getDim</span><span class="p">()</span> <span class="o">!=</span> <span class="n">mask</span><span class="o">.</span><span class="n">getDim</span><span class="p">():</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Input volume and mask should have same dimensions&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">resol</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Resolution (angstroms) should be bigger than 0&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">errors</span>

    <span class="k">def</span> <span class="nf">_warnings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">part</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputParticles</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">.</span><span class="n">getFirstItem</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">part</span><span class="o">.</span><span class="n">getDim</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">750</span> <span class="ow">or</span> <span class="n">part</span><span class="o">.</span><span class="n">getDim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">750</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;Particles are quite big, consider to change &#39;pad=1&#39; (advanced parameter) in order to save RAM &quot;</span>
                    <span class="s2">&quot;(even if your RAM is big).&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_summary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">summary</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Volume: </span><span class="si">%s</span><span class="se">\n</span><span class="s2">Set of particles: </span><span class="si">%s</span><span class="se">\n</span><span class="s2">Mask: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span>
                   <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vol</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">.</span><span class="n">getFileName</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputParticles</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">mask</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">.</span><span class="n">getFileName</span><span class="p">())]</span>
        <span class="k">return</span> <span class="n">summary</span>

    <span class="k">def</span> <span class="nf">_methods</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">methods</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;outputParticles&#39;</span><span class="p">):</span>
            <span class="n">methods</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Output particles not ready yet.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">methods</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Volume projections subtracted to particles keeping the region in </span><span class="si">%s</span><span class="s2">&quot;</span>
                           <span class="o">%</span> <span class="n">basename</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mask</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">.</span><span class="n">getFileName</span><span class="p">()))</span>
        <span class="k">return</span> <span class="n">methods</span></div>


<div class="viewcode-block" id="XmippProtBoostParticles"><a class="viewcode-back" href="../../../api/xmipp3/xmipp3.protocols.protocol_subtract_projection.html#xmipp3.protocols.protocol_subtract_projection.XmippProtBoostParticles">[docs]</a><span class="k">class</span> <span class="nc">XmippProtBoostParticles</span><span class="p">(</span><span class="n">XmippProtSubtractProjectionBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; This protocol tries to boost the frequencies of the particles to imporve them, based on an adjustment on its correspondent projections from a reference volume. &quot;&quot;&quot;</span>

    <span class="n">_label</span> <span class="o">=</span> <span class="s1">&#39;boost particles&#39;</span>
    <span class="n">INPUT_PARTICLES</span> <span class="o">=</span> <span class="s2">&quot;input_particles.xmd&quot;</span>

    <span class="c1"># --------------------------- DEFINE param functions --------------------------------------------</span>
    <span class="k">def</span> <span class="nf">_defineParams</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form</span><span class="p">):</span>
        <span class="n">XmippProtSubtractProjectionBase</span><span class="o">.</span><span class="n">_defineParams</span><span class="p">(</span><span class="n">form</span><span class="p">)</span>
        <span class="n">form</span><span class="o">.</span><span class="n">addParallelSection</span><span class="p">(</span><span class="n">threads</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">mpi</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

    <span class="c1"># --------------------------- INSERT steps functions --------------------------------------------</span>
    <span class="k">def</span> <span class="nf">_insertSubSteps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_insertFunctionStep</span><span class="p">(</span><span class="s1">&#39;convertStep&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_insertFunctionStep</span><span class="p">(</span><span class="s1">&#39;boostingStep&#39;</span><span class="p">)</span>

    <span class="c1"># --------------------------- STEPS functions --------------------------------------------</span>
<div class="viewcode-block" id="XmippProtBoostParticles.convertStep"><a class="viewcode-back" href="../../../api/xmipp3/xmipp3.protocols.protocol_subtract_projection.html#xmipp3.protocols.protocol_subtract_projection.XmippProtBoostParticles.convertStep">[docs]</a>    <span class="k">def</span> <span class="nf">convertStep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">writeSetOfParticles</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">inputParticles</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getExtraPath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">INPUT_PARTICLES</span><span class="p">))</span></div>

<div class="viewcode-block" id="XmippProtBoostParticles.boostingStep"><a class="viewcode-back" href="../../../api/xmipp3/xmipp3.protocols.protocol_subtract_projection.html#xmipp3.protocols.protocol_subtract_projection.XmippProtBoostParticles.boostingStep">[docs]</a>    <span class="k">def</span> <span class="nf">boostingStep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">vol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vol</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
        <span class="n">fnVol</span> <span class="o">=</span> <span class="n">vol</span><span class="o">.</span><span class="n">getFileName</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">fnVol</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.mrc&#39;</span><span class="p">):</span>
            <span class="n">fnVol</span> <span class="o">+=</span> <span class="s1">&#39;:mrc&#39;</span>
        <span class="n">args</span> <span class="o">=</span> <span class="s1">&#39;-i </span><span class="si">%s</span><span class="s1"> --ref </span><span class="si">%s</span><span class="s1"> -o </span><span class="si">%s</span><span class="s1"> --sampling </span><span class="si">%f</span><span class="s1"> --max_resolution </span><span class="si">%f</span><span class="s1"> --padding </span><span class="si">%f</span><span class="s1"> --sigma </span><span class="si">%d</span><span class="s1"> --limit_freq </span><span class="si">%d</span><span class="s1"> &#39;</span> \
               <span class="s1">&#39;--cirmaskrad </span><span class="si">%d</span><span class="s1"> --boost --save </span><span class="si">%s</span><span class="s1"> --oroot </span><span class="si">%s</span><span class="s1">&#39;</span>\
               <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getExtraPath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">INPUT_PARTICLES</span><span class="p">),</span> <span class="n">fnVol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getExtraPath</span><span class="p">(</span><span class="n">OUTPUT</span><span class="p">),</span>
                  <span class="n">vol</span><span class="o">.</span><span class="n">getSamplingRate</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">resol</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">pad</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">sigma</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">limit_freq</span><span class="o">.</span><span class="n">get</span><span class="p">()),</span>
                  <span class="bp">self</span><span class="o">.</span><span class="n">cirmaskrad</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getExtraPath</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getExtraPath</span><span class="p">(</span><span class="s2">&quot;subtracted_part&quot;</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonNegative</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
            <span class="n">args</span> <span class="o">+=</span> <span class="s1">&#39; --nonNegative&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">runJob</span><span class="p">(</span><span class="s2">&quot;xmipp_subtract_projection&quot;</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span></div>

    <span class="c1"># --------------------------- INFO functions --------------------------------------------</span>
    <span class="k">def</span> <span class="nf">_validate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">part</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputParticles</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">.</span><span class="n">getFirstItem</span><span class="p">()</span>
        <span class="n">vol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vol</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">part</span><span class="o">.</span><span class="n">getDim</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="n">vol</span><span class="o">.</span><span class="n">getDim</span><span class="p">()[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Input particles and volume should have same X and Y dimensions&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">round</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">getSamplingRate</span><span class="p">(),</span> <span class="mi">2</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">round</span><span class="p">(</span><span class="n">vol</span><span class="o">.</span><span class="n">getSamplingRate</span><span class="p">(),</span> <span class="mi">2</span><span class="p">):</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Input particles and volume should have same sampling rate&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">resol</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Resolution (angstroms) should be bigger than 0&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">errors</span>

    <span class="k">def</span> <span class="nf">_warnings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">part</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputParticles</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">.</span><span class="n">getFirstItem</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">part</span><span class="o">.</span><span class="n">getDim</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">750</span> <span class="ow">or</span> <span class="n">part</span><span class="o">.</span><span class="n">getDim</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">750</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;Particles are quite big, consider to change &#39;pad=1&#39; (advanced parameter) in order to save RAM &quot;</span>
                    <span class="s2">&quot;(even if your RAM is big).&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_summary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">summary</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Volume: </span><span class="si">%s</span><span class="se">\n</span><span class="s2">Set of particles: </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span>
                   <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vol</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">.</span><span class="n">getFileName</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputParticles</span><span class="o">.</span><span class="n">get</span><span class="p">())]</span>
        <span class="k">return</span> <span class="n">summary</span>

    <span class="k">def</span> <span class="nf">_methods</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">methods</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;outputParticles&#39;</span><span class="p">):</span>
            <span class="n">methods</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Output particles not ready yet.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">methods</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Particles boosted according to their equivalent projections from a reference volume.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">methods</span></div>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Scipion team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>