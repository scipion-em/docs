<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Creating a workflow template &mdash; Scipion 3.0.0 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> Scipion
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Set up</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../scipion-modes/how-to-install.html">Installing Scipion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scipion-modes/scipion-configuration.html">Scipion configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scipion-modes/host-configuration.html">Host configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../user/user-documentation.html">Graphical interface manuals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user/user-documentation.html#tutorials">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user/user-documentation.html#processing-how-to-s">Processing How To’s</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Facilities</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../facilities/facilities.html">On-the-fly processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../facilities/facilities-workflows.html">Streaming workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../facilities/customize-report.html">Summary Reports</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developers.html">Developers Page</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/scipion-API.html">Scipion API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/plugins-API.html">Plugins API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/xmipp-API.html">Xmipp API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Get in touch</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../misc/contact-us.html">Contact Us</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Licences</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../user/license.html">Licenses</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Scipion</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Creating a workflow template</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/docs/developer/tutorials/creating-a-workflow-template.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="figure align-default">
<a class="reference internal image-reference" href="../../../_images/scipion_logo.gif"><img alt="scipion logo" src="../../../_images/scipion_logo.gif" style="width: 250px;" /></a>
</div>
<div class="section" id="creating-a-workflow-template">
<span id="id1"></span><h1>Creating a workflow template<a class="headerlink" href="#creating-a-workflow-template" title="Permalink to this heading"></a></h1>
<div class="section" id="associated-resources">
<h2>Associated resources<a class="headerlink" href="#associated-resources" title="Permalink to this heading"></a></h2>
<p>Here you can find resources associated with this content, like videos or presentations used in courses:</p>
<p><a class="reference external" href="https://docs.google.com/presentation/d/1KGz6_A2YLtjIBoiLKqhHTBUr2HYhqvAz91WiWWSXNQY/present?usp=sharing">Course presentation</a></p>
<p><a class="reference external" href="https://scipion-em.github.io/docs/docs/facilities/facilities-workflows.html">Facilities workflows</a></p>
<p>Scipion can export a workflow or a series of protocols into a file.
A <code class="docutils literal notranslate"><span class="pre">Scipion</span> <span class="pre">workflow</span> <span class="pre">file</span></code> contains all the attributes for each protocol
selected in the project window. This file can then be used to create a new
project.</p>
<p>This workflow file can be customized to ask user for some values before creating the
project.</p>
</div>
<div class="section" id="cloning-and-installing-scipion-em-template">
<h2>Cloning and installing scipion-em-template<a class="headerlink" href="#cloning-and-installing-scipion-em-template" title="Permalink to this heading"></a></h2>
<p>If you are following a course you might already have done this. This practice starts from the master branch.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> desired/location
git clone https://github.com/scipion-em/scipion-em-template.git
<span class="nb">cd</span> scipion3/location
./scipion3 installp -p scipion-em-template/location --devel
</pre></div>
</div>
<div class="section" id="exporting-a-workflow">
<h3>Exporting a workflow<a class="headerlink" href="#exporting-a-workflow" title="Permalink to this heading"></a></h3>
<p>When you have a workflow, its protocols can be selected by <strong>Ctrl-click</strong> on
each one. When you have more than one protocol selected, in the Scipion options
bar, <code class="docutils literal notranslate"><span class="pre">Export</span></code> option will appear as shown in the following figure:</p>
<div class="figure align-default">
<a class="reference internal image-reference" href="../../../_images/export_workflow.png"><img alt="Export workflow" src="../../../_images/export_workflow.png" style="width: 750px;" /></a>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>For the <code class="docutils literal notranslate"><span class="pre">Export</span></code> option to appear, more than one protocol box must be selected.</p>
</div>
<p>After that you will be able to choose the path where you can store the file, as well its name.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The file extension must be <code class="docutils literal notranslate"><span class="pre">json.template</span></code> and it must be stored in <strong>myplugin/templates</strong>.</p>
</div>
<p>Scipion’s templates are <strong>JSON files</strong> (<a class="reference external" href="https://www.json.org">read more about JSON files here</a>).</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span>    <span class="p">[</span>
    <span class="p">{</span>
        <span class="nt">&quot;object.className&quot;</span><span class="p">:</span> <span class="s2">&quot;MyPluginPrefixHelloWorld&quot;</span><span class="p">,</span>
        <span class="nt">&quot;object.id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
        <span class="nt">&quot;object.label&quot;</span><span class="p">:</span> <span class="s2">&quot;myplugin - Hello world&quot;</span><span class="p">,</span>
        <span class="nt">&quot;object.comment&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="nt">&quot;_useQueue&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;_prerequisites&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="nt">&quot;_queueParams&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nt">&quot;runName&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nt">&quot;runMode&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nt">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello world!&quot;</span><span class="p">,</span>
        <span class="nt">&quot;times&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
        <span class="nt">&quot;previousCount&quot;</span><span class="p">:</span> <span class="mi">0</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;object.className&quot;</span><span class="p">:</span> <span class="s2">&quot;MyPluginPrefixHelloWorld&quot;</span><span class="p">,</span>
        <span class="nt">&quot;object.id&quot;</span><span class="p">:</span> <span class="s2">&quot;84&quot;</span><span class="p">,</span>
        <span class="nt">&quot;object.label&quot;</span><span class="p">:</span> <span class="s2">&quot;myplugin - Hello world (2)&quot;</span><span class="p">,</span>
        <span class="nt">&quot;object.comment&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="nt">&quot;_useQueue&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;_prerequisites&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="nt">&quot;_queueParams&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nt">&quot;runName&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nt">&quot;runMode&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nt">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello world!&quot;</span><span class="p">,</span>
        <span class="nt">&quot;times&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
        <span class="nt">&quot;previousCount&quot;</span><span class="p">:</span> <span class="mi">0</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;object.className&quot;</span><span class="p">:</span> <span class="s2">&quot;MyPluginPrefixHelloWorld&quot;</span><span class="p">,</span>
        <span class="nt">&quot;object.id&quot;</span><span class="p">:</span> <span class="s2">&quot;118&quot;</span><span class="p">,</span>
        <span class="nt">&quot;object.label&quot;</span><span class="p">:</span> <span class="s2">&quot;myplugin - Hello world (3)&quot;</span><span class="p">,</span>
        <span class="nt">&quot;object.comment&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="nt">&quot;_useQueue&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;_prerequisites&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="nt">&quot;_queueParams&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nt">&quot;runName&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nt">&quot;runMode&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nt">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello world!&quot;</span><span class="p">,</span>
        <span class="nt">&quot;times&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
        <span class="nt">&quot;previousCount&quot;</span><span class="p">:</span> <span class="mi">0</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="launching-the-template">
<h3>Launching the template<a class="headerlink" href="#launching-the-template" title="Permalink to this heading"></a></h3>
<p>Scipion uses a specific command to discover the templates. It searches for files in both
<strong>[SCIPION_HOME]/config</strong> folder as well as <strong>plugin/templates</strong> and displays a list of found templates.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./scipion3 template
</pre></div>
</div>
<p>The following window appears once the command above is executed.</p>
<div class="figure align-default">
<a class="reference internal image-reference" href="../../../_images/template_list.png"><img alt="Template List" src="../../../_images/template_list.png" style="width: 750px;" /></a>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Here you can select a template which will appear as follows:
<code class="docutils literal notranslate"><span class="pre">plugin</span> <span class="pre">name</span> <span class="pre">-</span> <span class="pre">template</span> <span class="pre">name</span></code>. Also note that the template does not
have any description. Later we will explain how to add it.</p>
</div>
<p>After selecting the template, a window will appear allowing you to execute it.</p>
<div class="figure align-default">
<a class="reference internal image-reference" href="../../../_images/loading_template.png"><img alt="Loading template" src="../../../_images/loading_template.png" style="width: 450px;" /></a>
</div>
<p>After clicking the <code class="docutils literal notranslate"><span class="pre">Start</span></code> button a project will be generated with the
protocols inside the template and all of them will be scheduled as shown in the
figure below:</p>
<div class="figure align-default">
<a class="reference internal image-reference" href="../../../_images/running_template.png"><img alt="Running a template" src="../../../_images/running_template.png" style="width: 750px;" /></a>
</div>
</div>
<div class="section" id="adding-a-description">
<h3>Adding a description<a class="headerlink" href="#adding-a-description" title="Permalink to this heading"></a></h3>
<p>In order to add a template description, add it to the top of the template file.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span>This is an example of a template description
[
{
    &quot;object.className&quot;: &quot;MyPluginPrefixHelloWorld&quot;,
    &quot;object.id&quot;: &quot;2&quot;,
    &quot;object.label&quot;: &quot;myplugin - Hello world&quot;,
    &quot;object.comment&quot;: &quot;&quot;,
    &quot;_useQueue&quot;: false,
    &quot;_prerequisites&quot;: &quot;&quot;,
    &quot;_queueParams&quot;: null,
    &quot;runName&quot;: null,
</pre></div>
</div>
<div class="figure align-default">
<a class="reference internal image-reference" href="../../../_images/description_template.png"><img alt="Description template" src="../../../_images/description_template.png" style="width: 750px;" /></a>
</div>
</div>
<div class="section" id="adding-dynamic-fields">
<h3>Adding dynamic fields<a class="headerlink" href="#adding-dynamic-fields" title="Permalink to this heading"></a></h3>
<p>In some cases you may need to ask the user for certain values before creating
and launching the project such as movie’s path, sampling rate, dose etc.
In our example we want to ask for the <code class="docutils literal notranslate"><span class="pre">Message</span></code> and the <code class="docutils literal notranslate"><span class="pre">Time</span></code> parameters.</p>
<div class="figure align-default">
<a class="reference internal image-reference" href="../../../_images/customized_template.png"><img alt="Customized template" src="../../../_images/customized_template.png" style="width: 750px;" /></a>
</div>
<p>You can find more details about how the <code class="docutils literal notranslate"><span class="pre">dynamic</span> <span class="pre">fields</span></code> syntax works <a class="reference external" href="https://scipion-em.github.io/docs/docs/facilities/facilities-workflows.html#creating-custom-dynamic-templates">here</a>.</p>
<p>Now you can provide the values for these dynamic parameters directly from the command line, e.g. below Message and Time dynamic parameters were defined as arguments:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./scipion3 template <span class="s2">&quot;myplugin-templatename&quot;</span> <span class="nv">msg</span><span class="o">=</span><span class="s2">&quot;TEST&quot;</span> <span class="nv">time</span><span class="o">=</span><span class="m">10</span>
</pre></div>
</div>
<p>Once you are done, run it and check if Scipion asks for the right values, the project created works and has the expected parameters.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Scipion team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>