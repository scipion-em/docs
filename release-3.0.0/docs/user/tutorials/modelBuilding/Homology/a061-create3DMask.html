<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>10. Create 3D Mask protocol &mdash; Scipion 3.0.0 documentation</title>
      <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../_static/jquery.js"></script>
        <script src="../../../../../_static/underscore.js"></script>
        <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../../../_static/doctools.js"></script>
    <script src="../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="11. DeepEMhancer Sharpening protocol" href="a062-deepEMhancerSharpening.html" />
    <link rel="prev" title="9. CCP4 Refmac protocol" href="a060-ccp4Refmac.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../../../index.html" class="icon icon-home"> Scipion
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Set up</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../scipion-modes/how-to-install.html">Installing Scipion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../scipion-modes/scipion-configuration.html">Scipion configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../scipion-modes/host-configuration.html">Host configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../user-documentation.html">Graphical interface manuals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../user-documentation.html#image-processing-resources">Image processing resources</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../user-documentation.html#tutorials">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../user-documentation.html#single-particle-tutorials">Single particle tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user-documentation.html#tomography-tutorials">Tomography tutorials</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../user-documentation.html#model-building">Model Building</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Model Building by Homology</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="index.html#contents">Contents</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="index.html#appendices">Appendices</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Alphafold/index.html">Build initial model with Alphafold</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ModelAngelo/index.html">Build initial model with ModelAngelo</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user-documentation.html#flexibility-hub">Flexibility Hub</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../user-documentation.html#processing-how-to-s">Processing How To’s</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Facilities</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../facilities/facilities.html">On-the-fly processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../facilities/facilities-workflows.html">Streaming workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../facilities/customize-report.html">Summary Reports</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer/developers.html">Developers Page</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../api/scipion-API.html">Scipion API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../api/plugins-API.html">Plugins API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../api/xmipp-API.html">Xmipp API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Get in touch</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../misc/contact-us.html">Contact Us</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Licences</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../license.html">Licenses</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">Scipion</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../../user-documentation.html">Graphical interface manuals</a> &raquo;</li>
          <li><a href="index.html">Model Building Tutorial</a> &raquo;</li>
      <li><span class="section-number">10. </span>Create 3D Mask protocol</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../_sources/docs/user/tutorials/modelBuilding/Homology/a061-create3DMask.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="create-3d-mask-protocol">
<span id="app-create3dmask"></span><h1><span class="section-number">10. </span>Create 3D Mask protocol<a class="headerlink" href="#create-3d-mask-protocol" title="Permalink to this heading"></a></h1>
<p>Protocol designed to create a mask, <em>i.e.</em>, a wrapping surface
able to delimit a volume or subunit of interest, in order to modify the
density values within or outside it. This mask can be created with a
given geometrical shape (sphere, cube, cylinder…) or obtained from
operating on a 3D volume or a previous mask.</p>
<ul>
<li><div class="line-block">
<div class="line">Requirements to run this protocol and visualize results:</div>
</div>
<ul>
<li><div class="line-block">
<div class="line"><em>Scipion</em> plugin: <strong>scipion-em</strong></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>Scipion</em> plugin: <strong>scipion-em-xmipp</strong></div>
</div>
</li>
</ul>
</li>
<li><div class="line-block">
<div class="line"><em>Scipion</em> menu:</div>
<div class="line"><em>Model building -&gt; Preprocess map</em> (<a class="reference internal" href="#model-building-create3dmask-1"><span class="std std-numref">Fig. 10.7</span></a> (A))</div>
</div>
<div class="figure align-center" id="model-building-create3dmask-1">
<a class="reference internal image-reference" href="../../../../../_images/Fig206.svg"><img alt="Protocol **xmipp-create 3d mask**. A: Protocol location in *Scipion* menu. B, C: Protocol form." src="../../../../../_images/Fig206.svg" width="90.0%" /></a>
<p class="caption"><span class="caption-number">Fig. 10.7 </span><span class="caption-text">Protocol <strong>xmipp-create 3d mask</strong>. A: Protocol location in <em>Scipion</em> menu. B, C: Protocol form.</span><a class="headerlink" href="#model-building-create3dmask-1" title="Permalink to this image"></a></p>
</div>
</li>
<li><div class="line-block">
<div class="line">Protocol form parameters (<a class="reference internal" href="#model-building-create3dmask-1"><span class="std std-numref">Fig. 10.7</span></a> (B: Mask generation; C: Postprocessing)):</div>
</div>
<ul>
<li><div class="line-block">
<div class="line"><em>Mask generation</em></div>
</div>
<ul>
<li><div class="line-block">
<div class="line"><em>Mask source</em>: Selection of one of the next three possible types of sources for the mask, the map volume provided by the user, a specific geometrical design or a feature file.</div>
</div>
<ol class="arabic">
<li><div class="line-block">
<div class="line"><em>Volume</em></div>
</div>
<ul>
<li><div class="line-block">
<div class="line"><em>Input volume</em>: Electron density map previously downloaded or generated in <em>Scipion</em>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>Operation</em>: Approach applied to generate the mask:</div>
</div>
<ol class="arabic">
<li><div class="line-block">
<div class="line"><em>Threshold</em>: By establishing a particular density <em>Threshold</em> (write here this threshold value).</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>Segment</em>: Segmentation process according to:</div>
</div>
<ul>
<li><div class="line-block">
<div class="line"><em>Number of voxels</em> (write here that value).</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>Number of aminoacids</em> (write here that value).</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>Dalton mass</em> (write here that value).</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>Automatic</em></div>
</div>
</li>
</ul>
</li>
</ol>
</li>
<li><div class="line-block">
<div class="line"><em>Only postprocess</em>: Use only the methods described in the tap <em>Postprocessing</em> (see below).</div>
</div>
</li>
</ul>
</li>
<li><div class="line-block">
<div class="line"><em>Geometry</em></div>
</div>
<ul>
<li><div class="line-block">
<div class="line"><em>Sampling Rate (Å/px)</em>: Size of voxel dimensions in Å.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>Mask size (px)</em>: Mask dimensions in number of pixels.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>Mask type</em>: Sphere, box, crown, cylinder, Gaussian, raised cosine and raised crown. Dimensions of each one of these geometric shapes have to be assigned in pixels: Radius of the sphere (half size of the mask by default); box size; inner and outer radius of the crown, raised cosine and raised crown (half size of the mask by default); height of cylinder (mask size by default); Gaussian sigma (mask size/6 by default); and border decay or fall-off of the two borders of the crown (0 by default).</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>Shift center of the mask?</em>: By selecting “Yes”, the mask will be shifted to a new origin of coordinates <em>X, Y, Z</em>.</div>
</div>
</li>
</ul>
</li>
<li><div class="line-block">
<div class="line"><em>Feature File</em>: Select with the browser the feature file in your computer.</div>
</div>
</li>
</ol>
</li>
</ul>
</li>
<li><div class="line-block">
<div class="line"><em>Postprocessing</em></div>
</div>
<ul>
<li><div class="line-block">
<div class="line"><em>Remove small objects</em>: Selection of “Yes” allows to ignore ligands of the map volume below a certain size (in voxels).</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>Keep largest component</em>: By selecting “Yes” a mask will be generated considering only the largest element of the map volume, ignoring the rest.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>Symmetrize mask</em>: By selecting “Yes” a symmetrized mask will be generated according to a specific symmetry group (look at <a class="reference external" href="https://github.com/I2PC/xmipp-portal/wiki/Symmetry">XMIPP Symmetry</a>). <em>c1</em> symmetry indicates no symmetry, by default.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>Apply morphological operation</em>: Slight modifications of the mask can be applied by dilation or erosion of the density region (<em>Structural element size</em>: One voxel by default). Combinations of dilation and erosion allow closing or opening empty spaces of density in the map volume.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>Invert the mask</em>: This option allows to invert the values of density regarding the wrapping surface of the mask, masking the outer part instead the inner part.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>Smooth borders</em>: Mask borders can be smoothed by applying a convolution of the mask with a Gaussian. The Gaussian sigma (in pixels) has to be supplied.</div>
</div>
</li>
</ul>
</li>
</ul>
</li>
<li><div class="line-block">
<div class="line">Protocol execution:</div>
</div>
<div class="line-block">
<div class="line">Adding specific mask label is recommended in <em>Run name</em> section, at
the form top. To add the label, open the protocol form, press the
pencil symbol at the right side of <em>Run name</em> box, complete the
label in the new opened window, press OK and, finally, close the
protocol. This label will be shown in the output summary content
(see below). If you want to run again this protocol, do not forget
to set to <em>Restart</em> the <em>Run mode</em>.</div>
</div>
<div class="line-block">
<div class="line">Press the <em>Execute</em> red button at the form bottom.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Visualization of protocol results:</div>
</div>
<div class="line-block">
<div class="line">After executing the protocol, press <em>Analyze Results</em> and <a class="reference external" href="../../../showJ">ShowJ</a>, the default viewer, will open the mask by slices (<a class="reference internal" href="050-volumeScenario.html#model-building-create3dmask-2"><span class="std std-numref">Fig. 7.3</span></a>). <em>ShowJ</em> window menu (<em>File -&gt; Open with ChimeraX</em>) allows to open the mask volume in <em>ChimeraX</em> graphics window.</div>
</div>
</li>
<li><p>Summary content:</p>
<ul>
<li><div class="line-block">
<div class="line">Protocol output (below <em>Scipion</em> framework):</div>
<div class="line"><em>xmipp3 - create 3d mask -&gt; ouputMask</em>;</div>
<div class="line">VolumeMask (x, y, and z dimensions, sampling rate).</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>SUMMARY</em> box:</div>
<div class="line">Details about <em>Mask creation</em> and <em>Mask processing</em>.</div>
</div>
</li>
</ul>
</li>
</ul>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="a060-ccp4Refmac.html" class="btn btn-neutral float-left" title="9. CCP4 Refmac protocol" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="a062-deepEMhancerSharpening.html" class="btn btn-neutral float-right" title="11. DeepEMhancer Sharpening protocol" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Scipion team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>