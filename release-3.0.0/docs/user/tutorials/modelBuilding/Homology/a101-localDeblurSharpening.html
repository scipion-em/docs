

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>17. Local Deblur Sharpening protocol &mdash; Scipion 3.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../_static/jquery.js"></script>
        <script src="../../../../../_static/underscore.js"></script>
        <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/banner.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="18. Local MonoRes protocol" href="a102-localMonoRes.html" />
    <link rel="prev" title="16. Import volume protocol" href="a100-importvolume.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../../index.html" class="icon icon-home"> Scipion
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Set up</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../scipion-modes/how-to-install.html">Installing Scipion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../scipion-modes/scipion-configuration.html">Scipion configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../scipion-modes/host-configuration.html">Host configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../user-documentation.html">Graphical interface manuals</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../user-documentation.html#tutorials">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../user-documentation.html#single-particle-tutorials">Single particle tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user-documentation.html#tomography-tutorials">Tomography tutorials</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../user-documentation.html#model-building">Model Building</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Model Building by Homology</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="index.html#contents">Contents</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="index.html#appendices">Appendices</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Alphafold/index.html">Build initial model with Alphafold</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../user-documentation.html#processing-how-to-s">Processing How To’s</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Facilities</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../facilities/facilities.html">On-the-fly processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../facilities/facilities-workflows.html">Streaming workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../facilities/customize-report.html">Summary Reports</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer/developers.html">Developers Page</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../api/scipion-API.html">Scipion API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../api/plugins-API.html">Plugins API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../api/xmipp-API.html">Xmipp API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Get in touch</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../misc/contact-us.html">Contact Us</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Licences</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../license.html">Licenses</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">Scipion</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../user-documentation.html">Graphical interface manuals</a> &raquo;</li>
        
          <li><a href="index.html">Model Building Tutorial</a> &raquo;</li>
        
      <li><span class="section-number">17. </span>Local Deblur Sharpening protocol</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../../_sources/docs/user/tutorials/modelBuilding/Homology/a101-localDeblurSharpening.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="local-deblur-sharpening-protocol">
<span id="app-localdeblursharpening"></span><h1><span class="section-number">17. </span>Local Deblur Sharpening protocol<a class="headerlink" href="#local-deblur-sharpening-protocol" title="Permalink to this heading">¶</a></h1>
<p>Protocol designed to apply <span class="math">LocalDeblur</span>, the automatic local
resolution-based method that increases map signal at medium/high
resolution <span id="id1">[<a class="reference internal" href="z010-references.html#id7" title="Erney Ramírez-Aportela, Jose Luis Vilas, Roberto Melero, Pablo Conesa, Marta Martínez, David Maluenda, Javier Mota, Amaya Jiménez, Javier Vargas, Roberto Marabini, Jose Maria Carazo, and Carlos Oscar S. Sorzano. Automatic local resolution-based sharpening of cryo-em maps. bioRxiv, 2018. URL: https://www.biorxiv.org/content/early/2018/10/02/433284, arXiv:https://www.biorxiv.org/content/early/2018/10/02/433284.full.pdf, doi:10.1101/433284.">Ramírez-Aportela <em>et al.</em>, 2018</a>]</span>, in <em>Scipion</em>. Unlike similar
approaches, <span class="math">LocalDeblur</span> does not need any prior atomic model,
avoiding artificial structure factor corrections. Since the map gets
much more interpretability, the modeling process results much easier.
This type of sharpening is recommended for maps showing a broad range of
resolutions, as it is usually common with membrane proteins or
macromolecules highly flexible. In all those cases, applying a global
sharpening method, like <span class="math">Relion</span> <em>postprocess</em>, does not optimize
the result when you have very different local resolution values because
a global operation cannot improve all parts of the map. However, when
changes in resolution are small there isn’t almost difference between
applying a global or a local sharpening method. For example, in maps
with high symmetry, like viruses, resolution is quite homogenous. The
absence of high differences in resolution determines that at high
resolution the results of global or local sharpening methods are almost
the same.</p>
<ul>
<li><div class="line-block">
<div class="line">Requirements to run this protocol and visualize results:</div>
</div>
<ul>
<li><div class="line-block">
<div class="line"><em>Scipion</em> plugin: <strong>scipion-em</strong></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>Scipion</em> plugin: <strong>scipion-em-xmipp</strong></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>Scipion</em> plugin: <strong>scipion-em-chimera</strong></div>
</div>
</li>
</ul>
</li>
<li><div class="line-block">
<div class="line"><em>Scipion</em> menu:</div>
<div class="line"><em>Model building -&gt; Preprocess map</em> (<a class="reference internal" href="#model-building-app-localdeblur-1"><span class="std std-numref">Fig. 17.1</span></a> (A))</div>
</div>
<div class="figure align-center" id="model-building-app-localdeblur-1">
<a class="reference internal image-reference" href="../../../../../_images/Fig208.svg"><img alt="Protocol **xmipp3-localdeblur sharpening**. A: Protocol location in *Scipion* menu. B: Protocol form." src="../../../../../_images/Fig208.svg" width="90.0%" /></a>
<p class="caption"><span class="caption-number">Fig. 17.1 </span><span class="caption-text">Protocol <strong>xmipp3-localdeblur sharpening</strong>. A: Protocol location in <em>Scipion</em> menu. B: Protocol form.</span><a class="headerlink" href="#model-building-app-localdeblur-1" title="Permalink to this image">¶</a></p>
</div>
</li>
<li><div class="line-block">
<div class="line">Protocol form parameters (<a class="reference internal" href="#model-building-app-localdeblur-1"><span class="std std-numref">Fig. 17.1</span></a> (B)):</div>
</div>
<ul>
<li><div class="line-block">
<div class="line"><em>Input map</em>: Unfiltered electron density map previously downloaded or generated in <em>Scipion</em>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>Resolution Map</em>: Resolution map generated by protocols like <strong>xmipp3-local MonoRes</strong>. The resolution value in the corresponding voxel of the <em>Input map</em> is assigned to each voxel of the <em>Resolution Map</em>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>lambda</em>: Since <span class="math">LocalDeblur</span> is based on an iterative formula repeated until a convergence criterion is reached, <span class="math">\lambda</span> is the step size advanced parameter that modulates the speed of convergence. The default value, <span class="math">\lambda</span> = 1, indicates that the method itself establishes automatically the value of <span class="math">\lambda</span>. Although the default value is small enough to guarantee the convergence and large enough to speed it up, <span class="math">\lambda</span> value can be increased by the user to accelerate the convergence process. Unlike the default value, that grows along the convergence process, <span class="math">\lambda</span> value selected by the user will be maintained constant. Falling into a local minimum is a risk derived of increasing the convergence speed.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>K</em>: Weight assigned to the difference between the local resolution and the spatial frequency of the center of each bandpass filter. This difference weighted by <em>K</em> is the base to compute the local weight of each channel in the filter bank, that correlates the input map with the sharpened map. The bigger the value of <em>K</em>, the lower the weight of each channel in the filter bank. Maximum weights are obtained when local resolution and spatial frequency of the center of each bandpass filter show identical values. As it has been empirically observed K=0.025 produces good results for most of tests performed. No big differences have been detected with K values ranging between 0.01 and 0.05. In the particular case of low resolution maps (lower than 6 Å), 0.01 seems to be a good choice.</div>
</div>
</li>
</ul>
</li>
<li><div class="line-block">
<div class="line">Protocol execution:</div>
</div>
<div class="line-block">
<div class="line">Adding specific map/structure label is recommended in <em>Run name</em>
section, at the form top. To add the label, open the protocol form,
press the pencil symbol at the right side of <em>Run name</em> box,
complete the label in the new opened window, press OK and, finally,
close the protocol. This label will be shown in the output summary
content (see below). If you want to run again this protocol, do not
forget to set to <em>Restart</em> the <em>Run mode</em>.</div>
</div>
<div class="line-block">
<div class="line">Press the <em>Execute</em> red button at the form bottom.</div>
</div>
</li>
<li><p>Visualization of protocol results:</p>
<div class="line-block">
<div class="line">To visualize the total number of sharpened maps generated according
to the number of iterations until convergence, press with the right
mouse the black arrow placed in the lower part of the <em>Scipion</em> framework
(Protocol output: <em>xmipp3 - localdeblur sharpening -&gt; ouputVolumes</em>). The option
<em>Open with DataViewer</em> will appear, select it. The sharpened map
epochs will be detailed. The sharpening algorithm stops when the
difference between two successive iterations is lower than 1%, thus
generating a variable number of maps before stopping. You can
select any of them and visualize the slices with <a class="reference external" href="https://scipion-em.github.io/docs/docs/user/showJ">ShowJ</a>, the default <em>Scipion</em> viewer.
To visualize the slices press the symbol that appears below <em>File</em>
in the main menu. The <em>ShowJ</em> window menu (<em>File -&gt; Open with
Chimera</em>) allows to open the selected map in <em>ChimeraX</em>
graphics window.</div>
</div>
<div class="line-block">
<div class="line">Nevertheless, <em>ChimeraX</em> graphics window can also be opened to compare the input and the last iteration sharpened map. After executing the protocol, press <em>Analyze Results</em> and <em>ChimeraX</em> graphics window will be opened. Volumes are referred to the origin of coordinates in <em>ChimeraX</em>. To show the relative position of the volumes, the three coordinate axes are represented; X axis (red), Y axis (yellow), and Z axis (blue) (<a class="reference internal" href="a020-chimeraOperate.html#model-building-app-protocol-volume-3"><span class="std std-numref">Fig. 5.3</span></a>). Coordinate axes, the imported volume and the last sharpened one (<em>sharpenedMap_last.mrc</em>) are model numbers <em>#1</em>, <em>#2</em> and <em>#3</em>, respectively, in <em>ChimeraX Models</em> panel. Volume coordinates and pixel size can be checked in <em>ChimeraX</em> main menu <em>Tools -&gt; Volume Data -&gt; Map coordinates: Origin index/ Voxel size</em>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Summary content:</div>
</div>
<ul>
<li><div class="line-block">
<div class="line">Protocol output (below <em>Scipion</em> framework):</div>
<div class="line"><em>xmipp3 - localdeblur sharpening -&gt; ouputVolumes</em>;</div>
<div class="line">SetOfVolumes (number of items, x, y, and z dimensions, sampling
rate).</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><em>SUMMARY</em> box:</div>
<div class="line"><em>LocalDeblur Map</em>.</div>
</div>
</li>
</ul>
</li>
</ul>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="a102-localMonoRes.html" class="btn btn-neutral float-right" title="18. Local MonoRes protocol" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="a100-importvolume.html" class="btn btn-neutral float-left" title="16. Import volume protocol" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Scipion team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-book"> Other Versions</span>
        v: release-3.0.0
        <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Branches</dt>
            <dd><a href="../../../../../../gh-pages/index.html">gh-pages</a></dd>
            <dd><a href="../../../../../../release-2.0.0/index.html">release-2.0.0</a></dd>
            <dd><a href="a101-localDeblurSharpening.html">release-3.0.0</a></dd>
            <dd><a href="../../../../../../rm_model_building/index.html">rm_model_building</a></dd>
        </dl>
    </div>
</div>


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>