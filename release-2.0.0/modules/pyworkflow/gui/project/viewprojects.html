

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>pyworkflow.gui.project.viewprojects &mdash; Scipion 2.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../../static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../../static/jquery.js"></script>
        <script type="text/javascript" src="../../../../static/underscore.js"></script>
        <script type="text/javascript" src="../../../../static/doctools.js"></script>
        <script type="text/javascript" src="../../../../static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../../static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/banner.css" type="text/css" />
  <link rel="stylesheet" href="../../../../static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home"> Scipion
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Set up</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../docs/scipion-modes/install-from-sources.html">Installing Scipion v2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../docs/scipion-modes/scipion-configuration.html">Scipion configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../docs/scipion-modes/host-configuration.html">Host configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../docs/user/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption"><span class="caption-text">User documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../docs/user/user-documentation.html">Graphical interface manuals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../docs/user/user-documentation.html#tutorials">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../docs/user/user-documentation.html#processing-how-to-s">Processing How Toâ€™s</a></li>
</ul>
<p class="caption"><span class="caption-text">Facilities</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../docs/facilities/facilities.html">Streaming Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../docs/facilities/facilities-workflows.html">Streaming workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../docs/facilities/acquisition-simulation.html">Tutorial for Facilities</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../docs/developer/developers.html">Developers Page</a></li>
</ul>
<p class="caption"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../api/pyworkflow.html">pyworkflow package</a></li>
</ul>
<p class="caption"><span class="caption-text">Get in touch</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../docs/misc/contact-us.html">Contact Us</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Scipion</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../index.html">Module code</a> &raquo;</li>
        
      <li>pyworkflow.gui.project.viewprojects</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for pyworkflow.gui.project.viewprojects</h1><div class="highlight"><pre>
<span></span><span class="c1"># **************************************************************************</span>
<span class="c1"># *</span>
<span class="c1"># * Authors:     J.M. De la Rosa Trevin (delarosatrevin@scilifelab.se) [1]</span>
<span class="c1"># *</span>
<span class="c1"># * [1] SciLifeLab, Stockholm University</span>
<span class="c1"># *</span>
<span class="c1"># * This program is free software: you can redistribute it and/or modify</span>
<span class="c1"># * it under the terms of the GNU General Public License as published by</span>
<span class="c1"># * the Free Software Foundation, either version 3 of the License, or</span>
<span class="c1"># * (at your option) any later version.</span>
<span class="c1"># *</span>
<span class="c1"># * This program is distributed in the hope that it will be useful,</span>
<span class="c1"># * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1"># * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c1"># * GNU General Public License for more details.</span>
<span class="c1"># *</span>
<span class="c1"># * You should have received a copy of the GNU General Public License</span>
<span class="c1"># * along with this program.  If not, see &lt;https://www.gnu.org/licenses/&gt;.</span>
<span class="c1"># *</span>
<span class="c1"># *  All comments concerning this program package may be sent to the</span>
<span class="c1"># *  e-mail address &#39;scipion@cnb.csic.es&#39;</span>
<span class="c1"># *</span>
<span class="c1"># **************************************************************************</span>



<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="nn">tk</span>
<span class="kn">import</span> <span class="nn">tkinter.font</span> <span class="k">as</span> <span class="nn">tkFont</span>

<span class="kn">import</span> <span class="nn">pyworkflow</span> <span class="k">as</span> <span class="nn">pw</span>
<span class="kn">from</span> <span class="nn">pyworkflow.project</span> <span class="k">import</span> <span class="n">Project</span>
<span class="kn">from</span> <span class="nn">pyworkflow.utils.utils</span> <span class="k">import</span> <span class="n">prettyDate</span><span class="p">,</span> <span class="n">prettyTime</span>
<span class="kn">from</span> <span class="nn">pyworkflow.utils.path</span> <span class="k">import</span> <span class="n">getHomePath</span>

<span class="kn">from</span> <span class="nn">pyworkflow.project</span> <span class="k">import</span> <span class="n">Manager</span>
<span class="kn">import</span> <span class="nn">pyworkflow.gui</span> <span class="k">as</span> <span class="nn">pwgui</span>
<span class="kn">from</span> <span class="nn">pyworkflow.gui.text</span> <span class="k">import</span> <span class="n">TaggedText</span>
<span class="kn">from</span> <span class="nn">pyworkflow.gui.dialog</span> <span class="k">import</span> <span class="n">askString</span><span class="p">,</span> <span class="n">askYesNo</span><span class="p">,</span> <span class="n">showError</span>

<span class="kn">from</span> <span class="nn">pyworkflow.gui</span> <span class="k">import</span> <span class="n">Message</span><span class="p">,</span> <span class="n">Window</span><span class="p">,</span> <span class="n">cfgEntryBgColor</span>
<span class="kn">from</span> <span class="nn">pyworkflow.gui.browser</span> <span class="k">import</span> <span class="n">FileBrowserWindow</span>
<span class="kn">from</span> <span class="nn">pyworkflow.gui.widgets</span> <span class="k">import</span> <span class="n">IconButton</span><span class="p">,</span> <span class="n">HotButton</span><span class="p">,</span> <span class="n">Button</span>
<span class="kn">from</span> <span class="nn">pyworkflow.utils.properties</span> <span class="k">import</span> <span class="n">Icon</span>

            
<div class="viewcode-block" id="ProjectsView"><a class="viewcode-back" href="../../../../api/pyworkflow.gui.project.viewprojects.html#pyworkflow.gui.project.viewprojects.ProjectsView">[docs]</a><span class="k">class</span> <span class="nc">ProjectsView</span><span class="p">(</span><span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">windows</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">windows</span> <span class="o">=</span> <span class="n">windows</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">manager</span> <span class="o">=</span> <span class="n">windows</span><span class="o">.</span><span class="n">manager</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">windows</span><span class="o">.</span><span class="n">root</span>

        <span class="c1"># tkFont.Font(size=12, family=&#39;verdana&#39;, weight=&#39;bold&#39;)</span>
        <span class="n">bigSize</span> <span class="o">=</span> <span class="n">pwgui</span><span class="o">.</span><span class="n">cfgFontSize</span> <span class="o">+</span> <span class="mi">2</span>
        <span class="n">smallSize</span> <span class="o">=</span> <span class="n">pwgui</span><span class="o">.</span><span class="n">cfgFontSize</span> <span class="o">-</span> <span class="mi">2</span>
        <span class="n">fontName</span> <span class="o">=</span> <span class="n">pwgui</span><span class="o">.</span><span class="n">cfgFontName</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">projNameFont</span> <span class="o">=</span> <span class="n">tkFont</span><span class="o">.</span><span class="n">Font</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">bigSize</span><span class="p">,</span> <span class="n">family</span><span class="o">=</span><span class="n">fontName</span><span class="p">,</span>
                                        <span class="n">weight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">projDateFont</span> <span class="o">=</span> <span class="n">tkFont</span><span class="o">.</span><span class="n">Font</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">smallSize</span><span class="p">,</span> <span class="n">family</span><span class="o">=</span><span class="n">fontName</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">projDelFont</span> <span class="o">=</span> <span class="n">tkFont</span><span class="o">.</span><span class="n">Font</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">smallSize</span><span class="p">,</span> <span class="n">family</span><span class="o">=</span><span class="n">fontName</span><span class="p">,</span>
                                       <span class="n">weight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">manager</span> <span class="o">=</span> <span class="n">Manager</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">filter</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">StringVar</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filterBox</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addActionsFrame</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rowconfigure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">TaggedText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">bd</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>
        <span class="n">text</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;news&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">createProjectList</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
        <span class="n">text</span><span class="o">.</span><span class="n">setReadOnly</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">text</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filterBox</span><span class="o">.</span><span class="n">focus_set</span><span class="p">()</span>

<div class="viewcode-block" id="ProjectsView.addActionsFrame"><a class="viewcode-back" href="../../../../api/pyworkflow.gui.project.viewprojects.html#pyworkflow.gui.project.viewprojects.ProjectsView.addActionsFrame">[docs]</a>    <span class="k">def</span> <span class="nf">addActionsFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Add the &quot;toolbar&quot; for actions like create project, import</span>
<span class="sd">         project or filter&quot;&quot;&quot;</span>
        <span class="c1"># Add the create project button</span>
        <span class="n">bg</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span>
        <span class="n">btnFrame</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">bg</span><span class="p">)</span>
        <span class="n">btn</span> <span class="o">=</span> <span class="n">HotButton</span><span class="p">(</span><span class="n">btnFrame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">Message</span><span class="o">.</span><span class="n">LABEL_CREATE_PROJECT</span><span class="p">,</span>
                        <span class="n">font</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">projNameFont</span><span class="p">,</span>
                        <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_onCreateProject</span><span class="p">)</span>
        <span class="n">btn</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nw&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="c1"># Add the Import project button</span>
        <span class="n">btn</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">btnFrame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">Message</span><span class="o">.</span><span class="n">LABEL_IMPORT_PROJECT</span><span class="p">,</span>
                     <span class="n">font</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">projNameFont</span><span class="p">,</span>
                     <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_onImportProject</span><span class="p">)</span>
        <span class="n">btn</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nw&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">btnFrame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nw&#39;</span><span class="p">)</span>

        <span class="c1"># Add a filter box</span>
        <span class="c1"># Add the Import project button</span>
        <span class="n">btn</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">btnFrame</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">bg</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Filter:&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">projNameFont</span><span class="p">)</span>
        <span class="n">btn</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nse&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filterBox</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Entry</span><span class="p">(</span><span class="n">btnFrame</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">projNameFont</span><span class="p">,</span> <span class="n">textvariable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">filter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filterBox</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;ne&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filterBox</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s1">&#39;&lt;Return&gt;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_onFilter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filterBox</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s1">&#39;&lt;KP_Enter&gt;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_onFilter</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProjectsView.createProjectList"><a class="viewcode-back" href="../../../../api/pyworkflow.gui.project.viewprojects.html#pyworkflow.gui.project.viewprojects.ProjectsView.createProjectList">[docs]</a>    <span class="k">def</span> <span class="nf">createProjectList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Load the list of projects&quot;&quot;&quot;</span>
        <span class="n">r</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">text</span><span class="o">.</span><span class="n">setReadOnly</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">text</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">parent</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>
        <span class="n">parent</span><span class="o">.</span><span class="n">columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="s1">&#39;#EAEBFF&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">listProjects</span><span class="p">()):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">project</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">loadProject</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">getName</span><span class="p">(),</span> <span class="n">chdir</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">loadAllConfig</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="n">project</span><span class="o">.</span><span class="n">closeMapper</span><span class="p">()</span>
                <span class="c1"># Add creation time to project info</span>
                <span class="n">p</span><span class="o">.</span><span class="n">cTime</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">getCreationTime</span><span class="p">()</span>
                <span class="c1"># Add if it&#39;s a link</span>
                <span class="n">p</span><span class="o">.</span><span class="n">isLink</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">isLink</span><span class="p">()</span>

                <span class="c1"># Consider the filter</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_doesProjectMatchFilter</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
                    <span class="k">continue</span>

                <span class="c1"># If it&#39;s a link, get the linked folder</span>
                <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">isLink</span><span class="p">:</span>
                    <span class="n">p</span><span class="o">.</span><span class="n">linkedFolder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">project</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
                <span class="n">frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createProjectLabel</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span> <span class="o">%</span> <span class="mi">2</span><span class="p">])</span>
                <span class="n">frame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="n">r</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;new&#39;</span><span class="p">)</span>
                <span class="n">r</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ERROR loading project: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">p</span><span class="o">.</span><span class="n">getName</span><span class="p">())</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
        <span class="n">text</span><span class="o">.</span><span class="n">window_create</span><span class="p">(</span><span class="n">tk</span><span class="o">.</span><span class="n">INSERT</span><span class="p">,</span> <span class="n">window</span><span class="o">=</span><span class="n">parent</span><span class="p">)</span>
        <span class="n">text</span><span class="o">.</span><span class="n">bindWidget</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="n">text</span><span class="o">.</span><span class="n">setReadOnly</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProjectsView.createProjectLabel"><a class="viewcode-back" href="../../../../api/pyworkflow.gui.project.viewprojects.html#pyworkflow.gui.project.viewprojects.ProjectsView.createProjectLabel">[docs]</a>    <span class="k">def</span> <span class="nf">createProjectLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">projInfo</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
        <span class="c1"># ROW1</span>
        <span class="c1"># Project name</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">projInfo</span><span class="o">.</span><span class="n">projName</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;nw&#39;</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
                         <span class="n">justify</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">projNameFont</span><span class="p">,</span> <span class="n">cursor</span><span class="o">=</span><span class="s1">&#39;hand1&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
        <span class="n">label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>  <span class="n">padx</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nw&#39;</span><span class="p">)</span>
        <span class="n">label</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s1">&#39;&lt;Button-1&gt;&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">openProject</span><span class="p">(</span><span class="n">projInfo</span><span class="o">.</span><span class="n">projName</span><span class="p">))</span>

        <span class="c1"># ROW2</span>
        <span class="c1"># Timestamp line</span>
        <span class="n">dateMsg</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s%s</span><span class="s1">    </span><span class="si">%s%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Message</span><span class="o">.</span><span class="n">LABEL_MODIFIED</span><span class="p">,</span> <span class="n">prettyDate</span><span class="p">(</span><span class="n">projInfo</span><span class="o">.</span><span class="n">mTime</span><span class="p">),</span>
                                    <span class="n">Message</span><span class="o">.</span><span class="n">LABEL_CREATED</span><span class="p">,</span> <span class="n">prettyTime</span><span class="p">(</span><span class="n">projInfo</span><span class="o">.</span><span class="n">cTime</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
        <span class="n">dateLabel</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">dateMsg</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">projDateFont</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
        <span class="n">dateLabel</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nw&#39;</span><span class="p">)</span>
        <span class="c1"># Delete action</span>
        <span class="n">delLabel</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">Message</span><span class="o">.</span><span class="n">LABEL_DELETE_PROJECT</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">projDelFont</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">cursor</span><span class="o">=</span><span class="s1">&#39;hand1&#39;</span><span class="p">)</span>
        <span class="n">delLabel</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">delLabel</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s1">&#39;&lt;Button-1&gt;&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">deleteProject</span><span class="p">(</span><span class="n">projInfo</span><span class="o">.</span><span class="n">projName</span><span class="p">))</span>
        <span class="c1"># Rename action</span>
        <span class="n">mvLabel</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">Message</span><span class="o">.</span><span class="n">LABEL_RENAME_PROJECT</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">projDelFont</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">cursor</span><span class="o">=</span><span class="s1">&#39;hand1&#39;</span><span class="p">)</span>
        <span class="n">mvLabel</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">mvLabel</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s1">&#39;&lt;Button-1&gt;&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">renameProject</span><span class="p">(</span><span class="n">projInfo</span><span class="o">.</span><span class="n">projName</span><span class="p">))</span>

        <span class="c1"># ROW3</span>
        <span class="k">if</span> <span class="n">projInfo</span><span class="o">.</span><span class="n">isLink</span><span class="p">:</span>
            <span class="n">linkMsg</span> <span class="o">=</span> <span class="s1">&#39;link --&gt; &#39;</span> <span class="o">+</span> <span class="n">projInfo</span><span class="o">.</span><span class="n">linkedFolder</span>
            <span class="n">lblLink</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">linkMsg</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">projDateFont</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s1">&#39;grey&#39;</span><span class="p">,</span> <span class="n">justify</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>
            <span class="n">lblLink</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">frame</span></div>

<div class="viewcode-block" id="ProjectsView.createNewProject"><a class="viewcode-back" href="../../../../api/pyworkflow.gui.project.viewprojects.html#pyworkflow.gui.project.viewprojects.ProjectsView.createNewProject">[docs]</a>    <span class="k">def</span> <span class="nf">createNewProject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">projName</span><span class="p">,</span> <span class="n">projLocation</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">createProject</span><span class="p">(</span><span class="n">projName</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">projLocation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">createProjectList</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">openProject</span><span class="p">(</span><span class="n">projName</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_onCreateProject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">projWindow</span> <span class="o">=</span> <span class="n">ProjectCreateWindow</span><span class="p">(</span><span class="s2">&quot;Create project&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">projWindow</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_onImportProject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">importProjWindow</span> <span class="o">=</span> <span class="n">ProjectImportWindow</span><span class="p">(</span><span class="s2">&quot;Import project&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">importProjWindow</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_onFilter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">createProjectList</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setFocusToList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">focus_set</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_doesProjectMatchFilter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns true if the project matches the filter&quot;&quot;&quot;</span>
        <span class="c1"># Lets&#39; use the name anc creation date for now:</span>
        <span class="n">searchString</span> <span class="o">=</span> <span class="s2">&quot;~&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">project</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                                 <span class="n">prettyDate</span><span class="p">(</span><span class="n">project</span><span class="o">.</span><span class="n">mTime</span><span class="p">),</span>
                                 <span class="n">prettyTime</span><span class="p">(</span><span class="n">project</span><span class="o">.</span><span class="n">cTime</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="kc">False</span><span class="p">)])</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">searchString</span>


<div class="viewcode-block" id="ProjectsView.importProject"><a class="viewcode-back" href="../../../../api/pyworkflow.gui.project.viewprojects.html#pyworkflow.gui.project.viewprojects.ProjectsView.importProject">[docs]</a>    <span class="k">def</span> <span class="nf">importProject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">projLocation</span><span class="p">,</span> <span class="n">copyFiles</span><span class="p">,</span> <span class="n">projName</span><span class="p">,</span> <span class="n">searchLocation</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">importProject</span><span class="p">(</span><span class="n">projLocation</span><span class="p">,</span> <span class="n">copyFiles</span><span class="p">,</span> <span class="n">projName</span><span class="p">,</span> <span class="n">searchLocation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">createProjectList</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">openProject</span><span class="p">(</span><span class="n">projName</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProjectsView.openProject"><a class="viewcode-back" href="../../../../api/pyworkflow.gui.project.viewprojects.html#pyworkflow.gui.project.viewprojects.ProjectsView.openProject">[docs]</a>    <span class="k">def</span> <span class="nf">openProject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">projName</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">subprocess</span> <span class="k">import</span> <span class="n">Popen</span>
        <span class="n">script</span> <span class="o">=</span> <span class="n">pw</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pw</span><span class="o">.</span><span class="n">APPS</span><span class="p">,</span> <span class="s1">&#39;pw_project.py&#39;</span><span class="p">)</span>
        <span class="n">Popen</span><span class="p">([</span><span class="n">pw</span><span class="o">.</span><span class="n">PYTHON</span><span class="p">,</span> <span class="n">script</span><span class="p">,</span> <span class="n">projName</span><span class="p">])</span></div>

<div class="viewcode-block" id="ProjectsView.deleteProject"><a class="viewcode-back" href="../../../../api/pyworkflow.gui.project.viewprojects.html#pyworkflow.gui.project.viewprojects.ProjectsView.deleteProject">[docs]</a>    <span class="k">def</span> <span class="nf">deleteProject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">projName</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">askYesNo</span><span class="p">(</span><span class="n">Message</span><span class="o">.</span><span class="n">TITLE_DELETE_PROJECT</span><span class="p">,</span>
                    <span class="s2">&quot;Project *</span><span class="si">%s</span><span class="s2">*. &quot;</span> <span class="o">%</span> <span class="n">projName</span> <span class="o">+</span> <span class="n">Message</span><span class="o">.</span><span class="n">MESSAGE_DELETE_PROJECT</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">deleteProject</span><span class="p">(</span><span class="n">projName</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">createProjectList</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProjectsView.renameProject"><a class="viewcode-back" href="../../../../api/pyworkflow.gui.project.viewprojects.html#pyworkflow.gui.project.viewprojects.ProjectsView.renameProject">[docs]</a>    <span class="k">def</span> <span class="nf">renameProject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">projName</span><span class="p">):</span>
        <span class="n">newName</span> <span class="o">=</span> <span class="n">askString</span><span class="p">(</span><span class="s2">&quot;Rename project </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">projName</span><span class="p">,</span> <span class="s2">&quot;Enter new name:&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">newName</span> <span class="ow">or</span> <span class="n">newName</span> <span class="o">==</span> <span class="n">projName</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">hasProject</span><span class="p">(</span><span class="n">newName</span><span class="p">):</span>
            <span class="n">showError</span><span class="p">(</span><span class="s2">&quot;Rename cancelled&quot;</span><span class="p">,</span>
                      <span class="s2">&quot;Project name already exists: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">newName</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">renameProject</span><span class="p">(</span><span class="n">projName</span><span class="p">,</span> <span class="n">newName</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">createProjectList</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="ProjectCreateWindow"><a class="viewcode-back" href="../../../../api/pyworkflow.gui.project.viewprojects.html#pyworkflow.gui.project.viewprojects.ProjectCreateWindow">[docs]</a><span class="k">class</span> <span class="nc">ProjectCreateWindow</span><span class="p">(</span><span class="n">Window</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Windows to create a project. &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">minsize</span><span class="o">=</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">110</span><span class="p">),</span>
                 <span class="n">icon</span><span class="o">=</span><span class="n">Icon</span><span class="o">.</span><span class="n">SCIPION_ICON</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">         We assume the parent should be of ProjectsView</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Window</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">parent</span><span class="o">.</span><span class="n">windows</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="n">weight</span><span class="p">,</span>
                        <span class="n">icon</span><span class="o">=</span><span class="n">icon</span><span class="p">,</span> <span class="n">minsize</span><span class="o">=</span><span class="n">minsize</span><span class="p">,</span> <span class="n">enableQueue</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">[</span><span class="s1">&#39;background&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;white&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">projectsPath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">PROJECTS</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">projName</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">StringVar</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">projName</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">projLocation</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">StringVar</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">projLocation</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projectsPath</span><span class="p">)</span>

        <span class="n">content</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
        <span class="n">content</span><span class="o">.</span><span class="n">columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">content</span><span class="o">.</span><span class="n">columnconfigure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">content</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">bg</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>
        <span class="n">content</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;news&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

        <span class="c1">#  Project name line</span>
        <span class="n">labelName</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">Message</span><span class="o">.</span><span class="n">LABEL_PROJECT</span> <span class="o">+</span> <span class="s1">&#39; name&#39;</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">bd</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">labelName</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">W</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">entryName</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Entry</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">cfgEntryBgColor</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">textvariable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">projName</span><span class="p">)</span>
        <span class="n">entryName</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">W</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">entryName</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;Return&gt;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create</span><span class="p">)</span>
        <span class="n">entryName</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;KP_Enter&gt;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create</span><span class="p">)</span>
        <span class="c1"># Project location line</span>
        <span class="n">labelLocation</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">Message</span><span class="o">.</span><span class="n">LABEL_PROJECT</span> <span class="o">+</span> <span class="s1">&#39; location&#39;</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">bd</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">labelLocation</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nw&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">entryBrowse</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Entry</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">cfgEntryBgColor</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">textvariable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">projLocation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entryBrowse</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nw&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btnBrowse</span> <span class="o">=</span> <span class="n">IconButton</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="s1">&#39;Browse&#39;</span><span class="p">,</span> <span class="n">Icon</span><span class="o">.</span><span class="n">ACTION_BROWSE</span><span class="p">,</span>
                                    <span class="n">highlightthickness</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_browsePath</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btnBrowse</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">initial_focus</span> <span class="o">=</span> <span class="n">entryName</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initial_focus</span><span class="o">.</span><span class="n">focus</span><span class="p">()</span>

        <span class="n">btnFrame</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
        <span class="n">btnFrame</span><span class="o">.</span><span class="n">columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">btnFrame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;sew&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">btnFrame</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">bg</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>

        <span class="c1"># Create buttons</span>
        <span class="n">btnCreate</span> <span class="o">=</span> <span class="n">HotButton</span><span class="p">(</span><span class="n">btnFrame</span><span class="p">,</span> <span class="s1">&#39;Create&#39;</span><span class="p">,</span> <span class="n">Icon</span><span class="o">.</span><span class="n">BUTTON_SELECT</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_create</span><span class="p">)</span>
        <span class="n">btnCreate</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">btnCancel</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">btnFrame</span><span class="p">,</span> <span class="s1">&#39;Cancel&#39;</span><span class="p">,</span> <span class="n">Icon</span><span class="o">.</span><span class="n">BUTTON_CANCEL</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>
        <span class="n">btnCancel</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_browsePath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">onSelect</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">projLocation</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">getPath</span><span class="p">())</span>

        <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">projLocation</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">path</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">v</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">v</span><span class="p">):</span>
                <span class="n">path</span> <span class="o">=</span> <span class="n">v</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">projectsPath</span>

        <span class="n">browser</span> <span class="o">=</span> <span class="n">FileBrowserWindow</span><span class="p">(</span><span class="s2">&quot;Browsing&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">onSelect</span><span class="o">=</span><span class="n">onSelect</span><span class="p">,</span> <span class="n">onlyFolders</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">browser</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">projName</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">projName</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">projLocation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">projLocation</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="c1"># Validate that project name is not empty</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">projName</span><span class="p">:</span>
            <span class="n">showError</span><span class="p">(</span><span class="s2">&quot;Validation error&quot;</span><span class="p">,</span> <span class="s2">&quot;Project name is empty&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
        <span class="c1"># Validate that project location is not empty</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">projLocation</span><span class="p">:</span>
            <span class="n">showError</span><span class="p">(</span><span class="s2">&quot;Validation error&quot;</span><span class="p">,</span> <span class="s2">&quot;Project location is empty&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
        <span class="c1"># Validate that project location exists</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">projLocation</span><span class="p">):</span>
            <span class="n">showError</span><span class="p">(</span><span class="s2">&quot;Validation error&quot;</span><span class="p">,</span> <span class="s2">&quot;Project location does not exist&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
        <span class="c1"># Validate that project location is a directory</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">projLocation</span><span class="p">):</span>
            <span class="n">showError</span><span class="p">(</span><span class="s2">&quot;Validation error&quot;</span><span class="p">,</span> <span class="s2">&quot;Project location is not a directory&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
        <span class="c1"># Validate that project path (location + name) ddoes not exists</span>
        <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">projLocation</span><span class="p">,</span> <span class="n">projName</span><span class="p">)):</span>
            <span class="n">showError</span><span class="p">(</span><span class="s2">&quot;Validation error&quot;</span><span class="p">,</span> <span class="s2">&quot;Project path already exists&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">createNewProject</span><span class="p">(</span><span class="n">projName</span><span class="p">,</span> <span class="n">projLocation</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>


<div class="viewcode-block" id="ProjectImportWindow"><a class="viewcode-back" href="../../../../api/pyworkflow.gui.project.viewprojects.html#pyworkflow.gui.project.viewprojects.ProjectImportWindow">[docs]</a><span class="k">class</span> <span class="nc">ProjectImportWindow</span><span class="p">(</span><span class="n">Window</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Windows to import a project. &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">minsize</span><span class="o">=</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">150</span><span class="p">),</span>
                 <span class="n">icon</span><span class="o">=</span><span class="n">Icon</span><span class="o">.</span><span class="n">SCIPION_ICON</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">         We assume the parent should be ProjectsView</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Window</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">parent</span><span class="o">.</span><span class="n">windows</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="n">weight</span><span class="p">,</span>
                        <span class="n">icon</span><span class="o">=</span><span class="n">icon</span><span class="p">,</span> <span class="n">minsize</span><span class="o">=</span><span class="n">minsize</span><span class="p">,</span> <span class="n">enableQueue</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">[</span><span class="s1">&#39;background&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;white&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
        <span class="c1"># Dirty hack, need to add a slash for the explorer to pick up the right default path.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">projectsPath</span> <span class="o">=</span> <span class="n">getHomePath</span><span class="p">()</span><span class="o">+</span><span class="s2">&quot;/&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">projLocation</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">StringVar</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">projLocation</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projectsPath</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">projName</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">StringVar</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">projName</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">searchLocation</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">StringVar</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">searchLocation</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

        <span class="n">content</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
        <span class="n">content</span><span class="o">.</span><span class="n">columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">content</span><span class="o">.</span><span class="n">columnconfigure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">content</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">bg</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>
        <span class="n">content</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;news&#39;</span><span class="p">,</span>
                     <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

        <span class="c1"># Path explorer</span>
        <span class="n">labelProjectLocation</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Project location&quot;</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">bd</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">labelProjectLocation</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nw&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="c1"># it seems tk.Entry does not uses default font...grrrr!!</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entryBrowse</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Entry</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="n">cfgEntryBgColor</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span>
                                    <span class="n">textvariable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">projLocation</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entryBrowse</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nw&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btnBrowse</span> <span class="o">=</span> <span class="n">IconButton</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="s1">&#39;Browse&#39;</span><span class="p">,</span> <span class="n">Icon</span><span class="o">.</span><span class="n">ACTION_BROWSE</span><span class="p">,</span> <span class="n">highlightthickness</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                    <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_browseProjectLocation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btnBrowse</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

        <span class="c1"># Copy files check</span>
        <span class="n">labelCheck</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Copy project&quot;</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">borderwidth</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">labelCheck</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nw&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tkCheckVar</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">IntVar</span><span class="p">()</span>
        <span class="n">btnCheck</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Checkbutton</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tkCheckVar</span><span class="p">,</span> <span class="n">highlightthickness</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">activebackground</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span>
                                  <span class="n">bg</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">bd</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">btnCheck</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nw&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

        <span class="n">btnCopyHelp</span> <span class="o">=</span> <span class="n">IconButton</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">Message</span><span class="o">.</span><span class="n">LABEL_BUTTON_HELP</span><span class="p">,</span> <span class="n">Icon</span><span class="o">.</span><span class="n">ACTION_HELP</span><span class="p">,</span> <span class="n">highlightthickness</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                 <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">showInfo</span><span class="p">(</span><span class="s1">&#39;If checked, </span><span class="se">\&quot;</span><span class="s1">Project location</span><span class="se">\&quot;</span><span class="s1"> will be copied. Otherwise a soft link to it will be created.&#39;</span><span class="p">))</span>
        <span class="n">btnCopyHelp</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="c1"># Project name</span>
        <span class="n">labelName</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Project name (Optional)&#39;</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">bd</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">labelName</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nw&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">entryName</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Entry</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">textvariable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">projName</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="p">)</span>
        <span class="n">entryName</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nw&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

        <span class="c1"># Path to search for raw data and restore broken links.</span>
        <span class="n">labelSearchLocation</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Raw files location (Optional)&quot;</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">bd</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">labelSearchLocation</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nw&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">entrySearchLocation</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Entry</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span>
                                            <span class="n">textvariable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">searchLocation</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entrySearchLocation</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;nw&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btnSearch</span> <span class="o">=</span> <span class="n">IconButton</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="s1">&#39;Browse&#39;</span><span class="p">,</span> <span class="n">Icon</span><span class="o">.</span><span class="n">ACTION_BROWSE</span><span class="p">,</span>
                                    <span class="n">highlightthickness</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_browseSearchLocation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">btnSearch</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">btnSearchHelp</span> <span class="o">=</span> <span class="n">IconButton</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">Message</span><span class="o">.</span><span class="n">LABEL_BUTTON_HELP</span><span class="p">,</span> <span class="n">Icon</span><span class="o">.</span><span class="n">ACTION_HELP</span><span class="p">,</span> <span class="n">highlightthickness</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                   <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">showInfo</span><span class="p">(</span><span class="s1">&#39;Optional: Folder where raw files, binaries (movies, micrographs,..) can be found. Used to repair broken links.&#39;</span><span class="p">))</span>
        <span class="n">btnSearchHelp</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">initial_focus</span> <span class="o">=</span> <span class="n">entryName</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initial_focus</span><span class="o">.</span><span class="n">focus</span><span class="p">()</span>
        <span class="n">btnCheck</span><span class="o">.</span><span class="n">select</span><span class="p">()</span>

        <span class="n">btnFrame</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
        <span class="n">btnFrame</span><span class="o">.</span><span class="n">columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">btnFrame</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;sew&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">btnFrame</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">bg</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>

        <span class="c1"># Create buttons</span>
        <span class="n">btnSelect</span> <span class="o">=</span> <span class="n">HotButton</span><span class="p">(</span><span class="n">btnFrame</span><span class="p">,</span> <span class="s1">&#39;Import&#39;</span><span class="p">,</span> <span class="n">Icon</span><span class="o">.</span><span class="n">BUTTON_SELECT</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_select</span><span class="p">)</span>
        <span class="n">btnSelect</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">btnCancel</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">btnFrame</span><span class="p">,</span> <span class="s1">&#39;Cancel&#39;</span><span class="p">,</span> <span class="n">Icon</span><span class="o">.</span><span class="n">BUTTON_CANCEL</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>
        <span class="n">btnCancel</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_browseProjectLocation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_browsePath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projLocation</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_browseSearchLocation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_browsePath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">searchLocation</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_browsePath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">location</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">onSelect</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
            <span class="n">location</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">getPath</span><span class="p">())</span>

        <span class="n">v</span> <span class="o">=</span> <span class="n">location</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">path</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">v</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">v</span><span class="p">):</span>
                <span class="n">path</span> <span class="o">=</span> <span class="n">v</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">projectsPath</span>

        <span class="n">browser</span> <span class="o">=</span> <span class="n">FileBrowserWindow</span><span class="p">(</span><span class="s2">&quot;Browsing&quot;</span><span class="p">,</span>
                                    <span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span>
                                    <span class="n">onSelect</span><span class="o">=</span><span class="n">onSelect</span><span class="p">,</span>
                                    <span class="n">onlyFolders</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">browser</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_select</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">projName</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">projName</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">projLocation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">projLocation</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">copyFiles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tkCheckVar</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="o">!=</span> <span class="mi">0</span>
        <span class="n">searchLocation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">searchLocation</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">manager</span> <span class="o">=</span> <span class="n">Manager</span><span class="p">()</span>

        <span class="c1"># If project name is empty we will use the same name as the source</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">projName</span><span class="p">:</span>
            <span class="n">projName</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">projLocation</span><span class="p">)</span>

        <span class="n">errorMessage</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

        <span class="c1"># Validate that project location is not empty</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">projLocation</span><span class="p">:</span>
            <span class="n">errorMessage</span> <span class="o">=</span> <span class="s2">&quot;Project location is empty</span><span class="se">\n</span><span class="s2">&quot;</span>

        <span class="c1"># Validate that project location exists</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">projLocation</span><span class="p">):</span>
            <span class="n">errorMessage</span> <span class="o">+=</span> <span class="s2">&quot;Project location does not exist</span><span class="se">\n</span><span class="s2">&quot;</span>

        <span class="c1"># Validate that project location is a directory</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">projLocation</span><span class="p">):</span>
            <span class="n">errorMessage</span> <span class="o">+=</span> <span class="s2">&quot;Project location is not a directory</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="c1"># Validate that the project location is a scipion project folder</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">projLocation</span><span class="p">,</span> <span class="n">Project</span><span class="o">.</span><span class="n">getDbName</span><span class="p">())):</span>
            <span class="n">errorMessage</span> <span class="o">+=</span> <span class="s2">&quot;Project location doesn&#39;t look like a scipion folder</span><span class="se">\n</span><span class="s2">&quot;</span>

        <span class="c1"># Validate that there isn&#39;t already a project with the same name</span>
        <span class="k">if</span> <span class="n">manager</span><span class="o">.</span><span class="n">hasProject</span><span class="p">(</span><span class="n">projName</span><span class="p">):</span>
            <span class="n">errorMessage</span> <span class="o">+=</span> <span class="s2">&quot;Project [</span><span class="si">%s</span><span class="s2">] already exists</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">projName</span>

        <span class="c1"># Validate that search location exists</span>
        <span class="k">if</span> <span class="n">searchLocation</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">searchLocation</span><span class="p">):</span>
                <span class="n">errorMessage</span> <span class="o">+=</span> <span class="s2">&quot;Raw files location does not exist</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="c1"># Validate that search location is a directory</span>
            <span class="k">elif</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">searchLocation</span><span class="p">):</span>
                <span class="n">errorMessage</span> <span class="o">+=</span> <span class="s2">&quot;Raw files location is not a directory</span><span class="se">\n</span><span class="s2">&quot;</span>

        <span class="k">if</span> <span class="n">errorMessage</span><span class="p">:</span>
            <span class="n">showError</span><span class="p">(</span><span class="s2">&quot;Validation error&quot;</span><span class="p">,</span> <span class="n">errorMessage</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">importProject</span><span class="p">(</span><span class="n">projLocation</span><span class="p">,</span> <span class="n">copyFiles</span><span class="p">,</span> <span class="n">projName</span><span class="p">,</span> <span class="n">searchLocation</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Scipion team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-book"> Other Versions</span>
        v: release-2.0.0
        <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Branches</dt>
            <dd><a href="../../../../../gh-pages/index.html">gh-pages</a></dd>
            <dd><a href="viewprojects.html">release-2.0.0</a></dd>
            <dd><a href="../../../../../release-3.0.0/index.html">release-3.0.0</a></dd>
        </dl>
    </div>
</div>


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>