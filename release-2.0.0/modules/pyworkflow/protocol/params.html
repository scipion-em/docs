

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>pyworkflow.protocol.params &mdash; Scipion 2.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../static/jquery.js"></script>
        <script type="text/javascript" src="../../../static/underscore.js"></script>
        <script type="text/javascript" src="../../../static/doctools.js"></script>
        <script type="text/javascript" src="../../../static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/banner.css" type="text/css" />
  <link rel="stylesheet" href="../../../static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> Scipion
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Set up</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/scipion-modes/install-from-sources.html">Installing Scipion v2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/scipion-modes/scipion-configuration.html">Scipion configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/scipion-modes/host-configuration.html">Host configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/user/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption"><span class="caption-text">User documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/user/user-documentation.html">Graphical interface manuals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/user/user-documentation.html#tutorials">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/user/user-documentation.html#processing-how-to-s">Processing How Toâ€™s</a></li>
</ul>
<p class="caption"><span class="caption-text">Facilities</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/facilities/facilities.html">Streaming Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/facilities/facilities-workflows.html">Streaming workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/facilities/acquisition-simulation.html">Tutorial for Facilities</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/developer/developers.html">Developers Page</a></li>
</ul>
<p class="caption"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../api/pyworkflow.html">pyworkflow package</a></li>
</ul>
<p class="caption"><span class="caption-text">Get in touch</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/misc/contact-us.html">Contact Us</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Scipion</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
      <li>pyworkflow.protocol.params</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for pyworkflow.protocol.params</h1><div class="highlight"><pre>
<span></span><span class="c1"># **************************************************************************</span>
<span class="c1"># *</span>
<span class="c1"># * Authors:     J.M. De la Rosa Trevin (delarosatrevin@scilifelab.se) [1]</span>
<span class="c1"># *</span>
<span class="c1"># * [1] SciLifeLab, Stockholm University</span>
<span class="c1"># *</span>
<span class="c1"># * This program is free software: you can redistribute it and/or modify</span>
<span class="c1"># * it under the terms of the GNU General Public License as published by</span>
<span class="c1"># * the Free Software Foundation, either version 3 of the License, or</span>
<span class="c1"># * (at your option) any later version.</span>
<span class="c1"># *</span>
<span class="c1"># * This program is distributed in the hope that it will be useful,</span>
<span class="c1"># * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1"># * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c1"># * GNU General Public License for more details.</span>
<span class="c1"># *</span>
<span class="c1"># * You should have received a copy of the GNU General Public License</span>
<span class="c1"># * along with this program.  If not, see &lt;https://www.gnu.org/licenses/&gt;.</span>
<span class="c1"># *</span>
<span class="c1"># *  All comments concerning this program package may be sent to the</span>
<span class="c1"># *  e-mail address &#39;scipion@cnb.csic.es&#39;</span>
<span class="c1"># *</span>
<span class="c1"># **************************************************************************</span>



<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">collections</span>

<span class="kn">from</span> <span class="nn">pyworkflow.object</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">.constants</span> <span class="k">import</span> <span class="o">*</span>


<div class="viewcode-block" id="FormElement"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.FormElement">[docs]</a><span class="k">class</span> <span class="nc">FormElement</span><span class="p">(</span><span class="n">OrderedObject</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base for any element on the form&quot;&quot;&quot;</span>
    <span class="n">ATTRIBUTES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">,</span> <span class="s1">&#39;expertLevel&#39;</span><span class="p">,</span> <span class="s1">&#39;condition&#39;</span><span class="p">,</span> <span class="s1">&#39;important&#39;</span><span class="p">,</span> <span class="s1">&#39;help&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="s1">&#39;paramClass&#39;</span><span class="p">]</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="n">OrderedObject</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">String</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;label&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">expertLevel</span> <span class="o">=</span> <span class="n">Integer</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;expertLevel&#39;</span><span class="p">,</span> <span class="n">LEVEL_NORMAL</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">condition</span> <span class="o">=</span> <span class="n">String</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;condition&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_isImportant</span> <span class="o">=</span> <span class="n">Boolean</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;important&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">help</span> <span class="o">=</span> <span class="n">String</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;help&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
        <span class="c1"># This two list will be filled by the Form</span>
        <span class="c1"># which have a global-view of all parameters</span>
        <span class="c1"># All param names in which condition appears this param</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dependants</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># All param names that appears in the condition</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_conditionParams</span> <span class="o">=</span> <span class="p">[]</span>
        
<div class="viewcode-block" id="FormElement.isExpert"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.FormElement.isExpert">[docs]</a>    <span class="k">def</span> <span class="nf">isExpert</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">expertLevel</span> <span class="o">&gt;</span> <span class="n">LEVEL_NORMAL</span></div>
    
<div class="viewcode-block" id="FormElement.setExpert"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.FormElement.setExpert">[docs]</a>    <span class="k">def</span> <span class="nf">setExpert</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">expertLevel</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">LEVEL_ADVANCED</span><span class="p">)</span></div>
        
<div class="viewcode-block" id="FormElement.isImportant"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.FormElement.isImportant">[docs]</a>    <span class="k">def</span> <span class="nf">isImportant</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_isImportant</span><span class="o">.</span><span class="n">get</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="FormElement.setImportant"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.FormElement.setImportant">[docs]</a>    <span class="k">def</span> <span class="nf">setImportant</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_isImportant</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="FormElement.hasCondition"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.FormElement.hasCondition">[docs]</a>    <span class="k">def</span> <span class="nf">hasCondition</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">condition</span><span class="o">.</span><span class="n">hasValue</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="FormElement.getLabel"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.FormElement.getLabel">[docs]</a>    <span class="k">def</span> <span class="nf">getLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">get</span><span class="p">()</span></div>

<div class="viewcode-block" id="FormElement.getHelp"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.FormElement.getHelp">[docs]</a>    <span class="k">def</span> <span class="nf">getHelp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">help</span><span class="o">.</span><span class="n">get</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="FormElement.config"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.FormElement.config">[docs]</a>    <span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Configure the object and set attributes</span>
<span class="sd">        coming in the keyword-arguments, the </span>
<span class="sd">        same as in the __init__</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ATTRIBUTES</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">setAttributeValue</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">))</span> </div></div>
    
        
<div class="viewcode-block" id="Param"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Param">[docs]</a><span class="k">class</span> <span class="nc">Param</span><span class="p">(</span><span class="n">FormElement</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Definition of a protocol parameter&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="n">FormElement</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span>
        <span class="c1"># This should be defined in subclasses</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">paramClass</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;paramClass&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default</span> <span class="o">=</span> <span class="n">String</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>

        <span class="c1"># Allow pointers (used for scalars)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">allowsPointers</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;allowsPointers&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validators</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;validators&#39;</span><span class="p">,</span> <span class="p">[])</span>
        
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;    label: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    
<div class="viewcode-block" id="Param.addValidator"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Param.addValidator">[docs]</a>    <span class="k">def</span> <span class="nf">addValidator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">validator</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Validators should be callables that </span>
<span class="sd">        receive a value and return a list of errors if so.</span>
<span class="sd">        If everything is ok, the result should be an empty list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">validator</span><span class="p">)</span></div>
        
<div class="viewcode-block" id="Param.validate"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Param.validate">[docs]</a>    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validators</span><span class="p">:</span>
            <span class="n">errors</span> <span class="o">+=</span> <span class="n">val</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">errors</span></div>
    
<div class="viewcode-block" id="Param.getDefault"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Param.getDefault">[docs]</a>    <span class="k">def</span> <span class="nf">getDefault</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">default</span><span class="o">.</span><span class="n">get</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="Param.setDefault"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Param.setDefault">[docs]</a>    <span class="k">def</span> <span class="nf">setDefault</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newDefault</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">newDefault</span><span class="p">)</span></div></div>
    
    
<div class="viewcode-block" id="ElementGroup"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.ElementGroup">[docs]</a><span class="k">class</span> <span class="nc">ElementGroup</span><span class="p">(</span><span class="n">FormElement</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Class to group some params in the form.</span>
<span class="sd">    Such as: Labeled group or params in the same line. </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="n">FormElement</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_form</span> <span class="o">=</span> <span class="n">form</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_paramList</span> <span class="o">=</span> <span class="p">[]</span>    
    
<div class="viewcode-block" id="ElementGroup.iterParams"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.ElementGroup.iterParams">[docs]</a>    <span class="k">def</span> <span class="nf">iterParams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return key and param for every child param. &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_paramList</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_form</span><span class="o">.</span><span class="n">getParam</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="ElementGroup.addParam"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.ElementGroup.addParam">[docs]</a>    <span class="k">def</span> <span class="nf">addParam</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">paramName</span><span class="p">,</span> <span class="n">ParamClass</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add a new param to the group&quot;&quot;&quot;</span>
        <span class="n">param</span> <span class="o">=</span> <span class="n">ParamClass</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_paramList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">paramName</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_form</span><span class="o">.</span><span class="n">registerParam</span><span class="p">(</span><span class="n">paramName</span><span class="p">,</span> <span class="n">param</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">param</span></div>
    
<div class="viewcode-block" id="ElementGroup.addHidden"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.ElementGroup.addHidden">[docs]</a>    <span class="k">def</span> <span class="nf">addHidden</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">paramName</span><span class="p">,</span> <span class="n">ParamClass</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add a hidden parameter to be used in conditions. &quot;&quot;&quot;</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;condition&#39;</span><span class="p">:</span> <span class="s1">&#39;False&#39;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addParam</span><span class="p">(</span><span class="n">paramName</span><span class="p">,</span> <span class="n">ParamClass</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="ElementGroup.addLine"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.ElementGroup.addLine">[docs]</a>    <span class="k">def</span> <span class="nf">addLine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lineName</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        
        <span class="n">labelName</span> <span class="o">=</span> <span class="n">lineName</span>
        <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="s1">&#39; ()&#39;</span><span class="p">:</span>
            <span class="n">labelName</span> <span class="o">=</span> <span class="n">labelName</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">symbol</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">addParam</span><span class="p">(</span><span class="n">labelName</span><span class="p">,</span> <span class="n">Line</span><span class="p">,</span> <span class="n">form</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_form</span><span class="p">,</span> 
                             <span class="n">label</span><span class="o">=</span><span class="n">lineName</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>        </div></div>
    
    
<span class="c1"># ----------- Some type of ElementGroup --------------------------</span>

<div class="viewcode-block" id="Line"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Line">[docs]</a><span class="k">class</span> <span class="nc">Line</span><span class="p">(</span><span class="n">ElementGroup</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Group to put some parameters in the same line. &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>


<div class="viewcode-block" id="Group"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Group">[docs]</a><span class="k">class</span> <span class="nc">Group</span><span class="p">(</span><span class="n">ElementGroup</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Group some parameters with a labeled frame. &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>

    
<div class="viewcode-block" id="Section"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Section">[docs]</a><span class="k">class</span> <span class="nc">Section</span><span class="p">(</span><span class="n">ElementGroup</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Definition of a section to hold other params&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="n">ElementGroup</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">questionParam</span> <span class="o">=</span> <span class="n">String</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;questionParam&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
    
<div class="viewcode-block" id="Section.hasQuestion"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Section.hasQuestion">[docs]</a>    <span class="k">def</span> <span class="nf">hasQuestion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return True if a question param was set&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">questionParam</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_paramList</span></div>
    
<div class="viewcode-block" id="Section.getQuestionName"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Section.getQuestionName">[docs]</a>    <span class="k">def</span> <span class="nf">getQuestionName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return the name of the question param. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">questionParam</span><span class="o">.</span><span class="n">get</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="Section.getQuestion"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Section.getQuestion">[docs]</a>    <span class="k">def</span> <span class="nf">getQuestion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return the question param&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_form</span><span class="o">.</span><span class="n">getParam</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">questionParam</span><span class="o">.</span><span class="n">get</span><span class="p">())</span></div>

<div class="viewcode-block" id="Section.addGroup"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Section.addGroup">[docs]</a>    <span class="k">def</span> <span class="nf">addGroup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">groupName</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">labelName</span> <span class="o">=</span> <span class="n">groupName</span>
        <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="s1">&#39; ()&#39;</span><span class="p">:</span>
            <span class="n">labelName</span> <span class="o">=</span> <span class="n">labelName</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">symbol</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">addParam</span><span class="p">(</span><span class="n">labelName</span><span class="p">,</span> <span class="n">Group</span><span class="p">,</span> <span class="n">form</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_form</span><span class="p">,</span> 
                             <span class="n">label</span><span class="o">=</span><span class="n">groupName</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div></div>
        

<div class="viewcode-block" id="Form"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Form">[docs]</a><span class="k">class</span> <span class="nc">Form</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Store all sections and parameters&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">protocol</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Build a Form from a given protocol. &quot;&quot;&quot;</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sectionList</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Store list of sections</span>
        <span class="c1"># Dictionary to store all params, grouped by sections</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_paramsDict</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">OrderedDict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lastSection</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_protocol</span> <span class="o">=</span> <span class="n">protocol</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addGeneralSection</span><span class="p">()</span>
        
<div class="viewcode-block" id="Form.getClass"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Form.getClass">[docs]</a>    <span class="k">def</span> <span class="nf">getClass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>
        
<div class="viewcode-block" id="Form.addSection"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Form.addSection">[docs]</a>    <span class="k">def</span> <span class="nf">addSection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add a new section&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lastSection</span> <span class="o">=</span> <span class="n">Section</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sectionList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lastSection</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastSection</span></div>

<div class="viewcode-block" id="Form.getSection"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Form.getSection">[docs]</a>    <span class="k">def</span> <span class="nf">getSection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; get section by label from _sectionList&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sectionList</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">label</span> <span class="o">==</span> <span class="n">label</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">s</span>
        <span class="k">return</span></div>

<div class="viewcode-block" id="Form.addGroup"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Form.addGroup">[docs]</a>    <span class="k">def</span> <span class="nf">addGroup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastSection</span><span class="o">.</span><span class="n">addGroup</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="Form.addLine"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Form.addLine">[docs]</a>    <span class="k">def</span> <span class="nf">addLine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastSection</span><span class="o">.</span><span class="n">addLine</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>      </div>

<div class="viewcode-block" id="Form.registerParam"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Form.registerParam">[docs]</a>    <span class="k">def</span> <span class="nf">registerParam</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">paramName</span><span class="p">,</span> <span class="n">param</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Register a given param in the form. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_paramsDict</span><span class="p">[</span><span class="n">paramName</span><span class="p">]</span> <span class="o">=</span> <span class="n">param</span>        
        <span class="bp">self</span><span class="o">.</span><span class="n">_analizeCondition</span><span class="p">(</span><span class="n">paramName</span><span class="p">,</span> <span class="n">param</span><span class="p">)</span></div>
        
<div class="viewcode-block" id="Form.addParam"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Form.addParam">[docs]</a>    <span class="k">def</span> <span class="nf">addParam</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add a new param to last section&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastSection</span><span class="o">.</span><span class="n">addParam</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="Form.addHidden"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Form.addHidden">[docs]</a>    <span class="k">def</span> <span class="nf">addHidden</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastSection</span><span class="o">.</span><span class="n">addHidden</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>
    
    <span class="k">def</span> <span class="nf">_analizeCondition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">paramName</span><span class="p">,</span> <span class="n">param</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">hasCondition</span><span class="p">():</span>
            <span class="n">param</span><span class="o">.</span><span class="n">_conditionParams</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">tokens</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;\W+&#39;</span><span class="p">,</span> <span class="n">param</span><span class="o">.</span><span class="n">condition</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
            <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasParam</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">getParam</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="o">.</span><span class="n">_dependants</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">paramName</span><span class="p">)</span>
                    <span class="n">param</span><span class="o">.</span><span class="n">_conditionParams</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_protocol</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
                    <span class="n">param</span><span class="o">.</span><span class="n">_conditionParams</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
                    
<div class="viewcode-block" id="Form.evalParamCondition"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Form.evalParamCondition">[docs]</a>    <span class="k">def</span> <span class="nf">evalParamCondition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">paramName</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Evaluate if a condition is True for a give param</span>
<span class="sd">        with the values of a particular Protocol&quot;&quot;&quot;</span>
        <span class="n">param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getParam</span><span class="p">(</span><span class="n">paramName</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">param</span><span class="o">.</span><span class="n">hasCondition</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="n">condStr</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">condition</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="n">localDict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">globalDict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">globals</span><span class="p">())</span>
        <span class="c1"># FIXME: Check why this import is here</span>
        <span class="kn">from</span> <span class="nn">pyworkflow</span> <span class="k">import</span> <span class="n">Config</span>
        <span class="n">globalDict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">Config</span><span class="o">.</span><span class="n">getDomain</span><span class="p">()</span><span class="o">.</span><span class="n">getObjects</span><span class="p">())</span>

        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">param</span><span class="o">.</span><span class="n">_conditionParams</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasParam</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_protocol</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
                <span class="n">localDict</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_protocol</span><span class="o">.</span><span class="n">getAttributeValue</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">eval</span><span class="p">(</span><span class="n">condStr</span><span class="p">,</span> <span class="n">globalDict</span><span class="p">,</span> <span class="n">localDict</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="Form.validateParams"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Form.validateParams">[docs]</a>    <span class="k">def</span> <span class="nf">validateParams</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">protocol</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Check that all validations of the params in the form</span>
<span class="sd">        are met for the protocol param values.</span>
<span class="sd">        It will return a list with errors, just in the same</span>
<span class="sd">        way of the Protocol.validate function</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
        
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">param</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iterParams</span><span class="p">():</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">protocol</span><span class="o">.</span><span class="n">getAttributeValue</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="n">errors</span> <span class="o">+=</span> <span class="n">param</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">errors</span></div>
        
<div class="viewcode-block" id="Form.getParam"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Form.getParam">[docs]</a>    <span class="k">def</span> <span class="nf">getParam</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">paramName</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve a param given a the param name</span>
<span class="sd">        None is returned if not found</span>
<span class="sd">        &quot;&quot;&quot;</span>        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_paramsDict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">paramName</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="Form.hasParam"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Form.hasParam">[docs]</a>    <span class="k">def</span> <span class="nf">hasParam</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">paramName</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">paramName</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_paramsDict</span></div>
        
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;Form: </span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">for</span> <span class="n">section</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iterSections</span><span class="p">():</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">section</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">s</span>
    
<div class="viewcode-block" id="Form.iterSections"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Form.iterSections">[docs]</a>    <span class="k">def</span> <span class="nf">iterSections</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sectionList</span></div>
    
<div class="viewcode-block" id="Form.iterAllParams"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Form.iterAllParams">[docs]</a>    <span class="k">def</span> <span class="nf">iterAllParams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Iter all parameters, including ElementGroups. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_paramsDict</span><span class="o">.</span><span class="n">items</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="Form.iterParams"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Form.iterParams">[docs]</a>    <span class="k">def</span> <span class="nf">iterParams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Iter parameters disregarding the ElementGroups. &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_paramsDict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">ElementGroup</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span></div>
        
<div class="viewcode-block" id="Form.iterPointerParams"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Form.iterPointerParams">[docs]</a>    <span class="k">def</span> <span class="nf">iterPointerParams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">paramName</span><span class="p">,</span> <span class="n">param</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_paramsDict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">PointerParam</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">paramName</span><span class="p">,</span> <span class="n">param</span></div>

<div class="viewcode-block" id="Form.addGeneralSection"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Form.addGeneralSection">[docs]</a>    <span class="k">def</span> <span class="nf">addGeneralSection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addSection</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;General&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addParam</span><span class="p">(</span><span class="s1">&#39;runName&#39;</span><span class="p">,</span> <span class="n">StringParam</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Run name:&quot;</span><span class="p">,</span> <span class="n">important</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> 
                      <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Select run name label to identify this run.&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addParam</span><span class="p">(</span><span class="s1">&#39;runMode&#39;</span><span class="p">,</span> <span class="n">EnumParam</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;resume&#39;</span><span class="p">,</span> <span class="s1">&#39;restart&#39;</span><span class="p">],</span>
                      <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Run mode&quot;</span><span class="p">,</span> <span class="n">display</span><span class="o">=</span><span class="n">EnumParam</span><span class="o">.</span><span class="n">DISPLAY_COMBO</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                      <span class="n">help</span><span class="o">=</span><span class="s1">&#39;The &lt;resume&gt; mode will try to start the execution&#39;</span>
                           <span class="s1">&#39;from the last successfully finished step if possible.&#39;</span>
                           <span class="s1">&#39;On the contrary, &lt;restart&gt; will delete all previous results&#39;</span>
                           <span class="s1">&#39;of this particular run and start from the beginning. This option&#39;</span>
                           <span class="s1">&#39;should be used carefully.&#39;</span>
                      <span class="p">)</span></div>
  
<div class="viewcode-block" id="Form.addParallelSection"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Form.addParallelSection">[docs]</a>    <span class="k">def</span> <span class="nf">addParallelSection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">threads</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">mpi</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">condition</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                           <span class="n">hours</span><span class="o">=</span><span class="mi">72</span><span class="p">,</span> <span class="n">jobsize</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">addSection</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Parallelization&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addParam</span><span class="p">(</span><span class="s1">&#39;hostName&#39;</span><span class="p">,</span> <span class="n">StringParam</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
                      <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Execution host&#39;</span><span class="p">,</span>
                      <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Select in which of the available do you want to launch this protocol.&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">threads</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">addParam</span><span class="p">(</span><span class="s1">&#39;numberOfThreads&#39;</span><span class="p">,</span> <span class="n">IntParam</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">threads</span><span class="p">,</span>
                          <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Threads&#39;</span><span class="p">,</span>
                          <span class="n">help</span><span class="o">=</span><span class="s1">&#39;This option provides shared-memory parallelization on multi-core machines.&#39;</span>
                                <span class="s1">&#39;It does not require any additional software, other than &lt;Xmipp&gt;&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mpi</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">addParam</span><span class="p">(</span><span class="s1">&#39;numberOfMpi&#39;</span><span class="p">,</span> <span class="n">IntParam</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">mpi</span><span class="p">,</span>
                          <span class="n">label</span><span class="o">=</span><span class="s1">&#39;MPI processes&#39;</span><span class="p">,</span>
                          <span class="n">help</span><span class="o">=</span><span class="s1">&#39;This option provides the number of independent processes spawned&#39;</span>
                                <span class="s1">&#39;in parallel by &lt;mpirun&gt; command in a cluster, usually throught&#39;</span>
                                <span class="s1">&#39;a queue system. This will require that you have compile &lt;Xmipp&gt;&#39;</span>
                                <span class="s1">&#39;with &lt;mpi&gt; support.&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">jobsize</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">addParam</span><span class="p">(</span><span class="s1">&#39;mpiJobSize&#39;</span><span class="p">,</span> <span class="n">IntParam</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">jobsize</span><span class="p">,</span>
                          <span class="n">label</span><span class="o">=</span><span class="s1">&#39;MPI job size&#39;</span><span class="p">,</span> <span class="n">condition</span><span class="o">=</span><span class="s2">&quot;numberOfMpi&gt;1&quot;</span><span class="p">,</span>
                          <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Minimum size of jobs in mpi processes.&#39;</span>
                               <span class="s1">&#39;Set to 1 for large images (e.g. 500x500)&#39;</span>
                               <span class="s1">&#39;and to 10 for small images (e.g. 100x100)&#39;</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="StringParam"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.StringParam">[docs]</a><span class="k">class</span> <span class="nc">StringParam</span><span class="p">(</span><span class="n">Param</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Param with underlying String value&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="n">Param</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">paramClass</span><span class="o">=</span><span class="n">String</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span></div>


<div class="viewcode-block" id="TextParam"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.TextParam">[docs]</a><span class="k">class</span> <span class="nc">TextParam</span><span class="p">(</span><span class="n">StringParam</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Long string params&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="n">StringParam</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;height&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;width&#39;</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>        </div>
        

<div class="viewcode-block" id="RegexParam"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.RegexParam">[docs]</a><span class="k">class</span> <span class="nc">RegexParam</span><span class="p">(</span><span class="n">StringParam</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Regex based string param&quot;&quot;&quot;</span>
    <span class="k">pass</span></div>


<div class="viewcode-block" id="PathParam"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.PathParam">[docs]</a><span class="k">class</span> <span class="nc">PathParam</span><span class="p">(</span><span class="n">StringParam</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Param for path strings&quot;&quot;&quot;</span>
    <span class="k">pass</span></div>


<span class="c1"># TODO: Handle filter pattern</span>
<div class="viewcode-block" id="FileParam"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.FileParam">[docs]</a><span class="k">class</span> <span class="nc">FileParam</span><span class="p">(</span><span class="n">PathParam</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Filename path&quot;&quot;&quot;</span>
    <span class="k">pass</span></div>


<div class="viewcode-block" id="FolderParam"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.FolderParam">[docs]</a><span class="k">class</span> <span class="nc">FolderParam</span><span class="p">(</span><span class="n">PathParam</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Folder path&quot;&quot;&quot;</span>
    <span class="k">pass</span></div>


<div class="viewcode-block" id="LabelParam"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.LabelParam">[docs]</a><span class="k">class</span> <span class="nc">LabelParam</span><span class="p">(</span><span class="n">StringParam</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Just the same as StringParam, but to be rendered</span>
<span class="sd">    as a label and can not be directly edited by the user</span>
<span class="sd">    in the Protocol Form.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>

        
<div class="viewcode-block" id="IntParam"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.IntParam">[docs]</a><span class="k">class</span> <span class="nc">IntParam</span><span class="p">(</span><span class="n">Param</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="n">Param</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">paramClass</span><span class="o">=</span><span class="n">Integer</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addValidator</span><span class="p">(</span><span class="n">Format</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="s2">&quot;should be an integer&quot;</span><span class="p">,</span>
                                 <span class="n">allowsNull</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;allowsNull&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)))</span></div>
        
        
<div class="viewcode-block" id="EnumParam"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.EnumParam">[docs]</a><span class="k">class</span> <span class="nc">EnumParam</span><span class="p">(</span><span class="n">IntParam</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Select from a list of values, separated by comma&quot;&quot;&quot;</span>
    <span class="c1"># Possible values for display</span>
    <span class="n">DISPLAY_LIST</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">DISPLAY_COMBO</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">DISPLAY_HLIST</span> <span class="o">=</span> <span class="mi">2</span>  <span class="c1"># horizontal list, save space</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="n">IntParam</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">choices</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;choices&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="n">Integer</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;display&#39;</span><span class="p">,</span> <span class="n">EnumParam</span><span class="o">.</span><span class="n">DISPLAY_COMBO</span><span class="p">))</span></div>
    
    
<div class="viewcode-block" id="FloatParam"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.FloatParam">[docs]</a><span class="k">class</span> <span class="nc">FloatParam</span><span class="p">(</span><span class="n">Param</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="n">Param</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">paramClass</span><span class="o">=</span><span class="n">Float</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addValidator</span><span class="p">(</span><span class="n">Format</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="s2">&quot;should be a float&quot;</span><span class="p">,</span>
                                 <span class="n">allowsNull</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;allowsNull&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)))</span></div>

        
<div class="viewcode-block" id="BooleanParam"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.BooleanParam">[docs]</a><span class="k">class</span> <span class="nc">BooleanParam</span><span class="p">(</span><span class="n">Param</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="n">Param</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">paramClass</span><span class="o">=</span><span class="n">Boolean</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addValidator</span><span class="p">(</span><span class="n">NonEmptyBool</span><span class="p">)</span></div>


<div class="viewcode-block" id="HiddenBooleanParam"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.HiddenBooleanParam">[docs]</a><span class="k">class</span> <span class="nc">HiddenBooleanParam</span><span class="p">(</span><span class="n">BooleanParam</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="n">Param</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">paramClass</span><span class="o">=</span><span class="n">Boolean</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="PointerParam"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.PointerParam">[docs]</a><span class="k">class</span> <span class="nc">PointerParam</span><span class="p">(</span><span class="n">Param</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; This type of Param will serve to select existing objects</span>
<span class="sd">    in the database that will be input for some protocol.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>  <span class="n">paramClass</span><span class="o">=</span><span class="n">Pointer</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="n">Param</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">paramClass</span><span class="o">=</span><span class="n">paramClass</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span>
        <span class="c1"># This will be the class to be pointed</span>
        <span class="n">pointerClass</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;pointerClass&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;,&#39;</span> <span class="ow">in</span> <span class="n">pointerClass</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pointerClass</span> <span class="o">=</span> <span class="n">CsvList</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pointerClass</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">pointerClass</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pointerClass</span> <span class="o">=</span> <span class="n">String</span><span class="p">(</span><span class="n">pointerClass</span><span class="p">)</span> 

        <span class="c1"># Some conditions on the pointed candidates</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pointerCondition</span> <span class="o">=</span> <span class="n">String</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;pointerCondition&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">allowsNull</span> <span class="o">=</span> <span class="n">Boolean</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;allowsNull&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>
        
<div class="viewcode-block" id="PointerParam.setPointerClass"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.PointerParam.setPointerClass">[docs]</a>    <span class="k">def</span> <span class="nf">setPointerClass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newPointerClass</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pointerClass</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">newPointerClass</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="MultiPointerParam"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.MultiPointerParam">[docs]</a><span class="k">class</span> <span class="nc">MultiPointerParam</span><span class="p">(</span><span class="n">PointerParam</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; This type of Param will serve to select objects</span>
<span class="sd">    with DIFFERENT types from the database to be input for some protocol.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="n">PointerParam</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">paramClass</span><span class="o">=</span><span class="n">PointerList</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxNumObjects</span> <span class="o">=</span> <span class="n">Integer</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;maxNumObjects&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">minNumObjects</span> <span class="o">=</span> <span class="n">Integer</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;minNumObjects&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span></div>

        
<div class="viewcode-block" id="RelationParam"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.RelationParam">[docs]</a><span class="k">class</span> <span class="nc">RelationParam</span><span class="p">(</span><span class="n">Param</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; This type of Param is very similar to PointerParam, since it will</span>
<span class="sd">    hold a pointer to another object. But, in the PointerParam, we search</span>
<span class="sd">    for objects of some Class (maybe with some conditions).</span>
<span class="sd">    Here, we search for objects related to a given attribute of a protocol</span>
<span class="sd">    by a given relation.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="n">Param</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">paramClass</span><span class="o">=</span><span class="n">Pointer</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span>
        <span class="c1"># This will be the name of the relation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_relationName</span> <span class="o">=</span> <span class="n">String</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;relationName&#39;</span><span class="p">))</span>
        <span class="c1"># We will store the attribute name in the protocol to be </span>
        <span class="c1"># used as the object for which relations will be search</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attributeName</span> <span class="o">=</span> <span class="n">String</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;attributeName&#39;</span><span class="p">))</span>
        <span class="c1"># This specify if we want to search for childs or parents</span>
        <span class="c1"># of the given attribute of the protocol</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_direction</span> <span class="o">=</span> <span class="n">Integer</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;direction&#39;</span><span class="p">,</span> <span class="n">RELATION_CHILDS</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">allowsNull</span> <span class="o">=</span> <span class="n">Boolean</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;allowsNull&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>
        
<div class="viewcode-block" id="RelationParam.getName"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.RelationParam.getName">[docs]</a>    <span class="k">def</span> <span class="nf">getName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_relationName</span><span class="o">.</span><span class="n">get</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="RelationParam.getAttributeName"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.RelationParam.getAttributeName">[docs]</a>    <span class="k">def</span> <span class="nf">getAttributeName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributeName</span><span class="o">.</span><span class="n">get</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="RelationParam.getDirection"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.RelationParam.getDirection">[docs]</a>    <span class="k">def</span> <span class="nf">getDirection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_direction</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>       </div></div>
        
        
<div class="viewcode-block" id="ProtocolClassParam"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.ProtocolClassParam">[docs]</a><span class="k">class</span> <span class="nc">ProtocolClassParam</span><span class="p">(</span><span class="n">StringParam</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="n">StringParam</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">protocolClassName</span> <span class="o">=</span> <span class="n">String</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;protocolClassName&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">allowSubclasses</span> <span class="o">=</span> <span class="n">Boolean</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;allowSubclasses&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span></div>
        
        
<div class="viewcode-block" id="DigFreqParam"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.DigFreqParam">[docs]</a><span class="k">class</span> <span class="nc">DigFreqParam</span><span class="p">(</span><span class="n">FloatParam</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Digital frequency param. &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="n">FloatParam</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addValidator</span><span class="p">(</span><span class="n">FreqValidator</span><span class="p">)</span></div>
        
        
<div class="viewcode-block" id="NumericListParam"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.NumericListParam">[docs]</a><span class="k">class</span> <span class="nc">NumericListParam</span><span class="p">(</span><span class="n">StringParam</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; This class will serve to have list representations as strings.</span>
<span class="sd">     Possible notation are:</span>
<span class="sd">     1000 10 1 1 -&gt; to define a list with 4 values [1000, 10, 1, 1], or</span>
<span class="sd">     10x2 5x3    -&gt; to define a list with 5 values [10, 10, 5, 5, 5]</span>
<span class="sd">     If you ask for more elements than in the list, the last one is repeated</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="n">StringParam</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addValidator</span><span class="p">(</span><span class="n">NumericListValidator</span><span class="p">())</span></div>
        
        
<div class="viewcode-block" id="NumericRangeParam"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.NumericRangeParam">[docs]</a><span class="k">class</span> <span class="nc">NumericRangeParam</span><span class="p">(</span><span class="n">StringParam</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; This class will serve to specify range of numbers with a string representation.</span>
<span class="sd">     Possible notation are:</span>
<span class="sd">        &quot;1,5-8,10&quot; -&gt; [1,5,6,7,8,10]</span>
<span class="sd">        &quot;2,6,9-11&quot; -&gt; [2,6,9,10,11]</span>
<span class="sd">        &quot;2 5, 6-8&quot; -&gt; [2,5,6,7,8]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="n">StringParam</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span></div>
        <span class="c1"># TODO: ADD a syntax validator</span>
        
        
<div class="viewcode-block" id="TupleParam"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.TupleParam">[docs]</a><span class="k">class</span> <span class="nc">TupleParam</span><span class="p">(</span><span class="n">Param</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; This class will condense a tuple of several</span>
<span class="sd">    other params of the same type and related concenpt.</span>
<span class="sd">    For example: min and max, low and high.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="n">Param</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<span class="c1">#         Validators</span>
<span class="c1"># -----------------------------------------------------------------------------</span>
<div class="viewcode-block" id="Validator"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Validator">[docs]</a><span class="k">class</span> <span class="nc">Validator</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">pass</span></div>


<div class="viewcode-block" id="Conditional"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Conditional">[docs]</a><span class="k">class</span> <span class="nc">Conditional</span><span class="p">(</span><span class="n">Validator</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Simple validation based on a condition. </span>
<span class="sd">    If the value doesn&#39;t meet the condition,</span>
<span class="sd">    the error will be returned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">,</span> <span class="n">allowsNull</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">error</span> <span class="o">=</span> <span class="n">error</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_allowsNull</span> <span class="o">=</span> <span class="n">allowsNull</span>
        
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_allowsNull</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_condition</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">errors</span>   </div>
    
    
<div class="viewcode-block" id="Format"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Format">[docs]</a><span class="k">class</span> <span class="nc">Format</span><span class="p">(</span><span class="n">Conditional</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Check if the format is right. &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">valueType</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="s1">&#39;Value have not a correct format&#39;</span><span class="p">,</span>
                 <span class="n">allowsNull</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="n">Conditional</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">,</span> <span class="n">allowsNull</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valueType</span> <span class="o">=</span> <span class="n">valueType</span>
        
    <span class="k">def</span> <span class="nf">_condition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valueType</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="NonEmptyCondition"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.NonEmptyCondition">[docs]</a><span class="k">class</span> <span class="nc">NonEmptyCondition</span><span class="p">(</span><span class="n">Conditional</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="s1">&#39;Value cannot be empty&#39;</span><span class="p">):</span>
        <span class="n">Conditional</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_condition</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">value</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span></div>
        
        
<div class="viewcode-block" id="LT"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.LT">[docs]</a><span class="k">class</span> <span class="nc">LT</span><span class="p">(</span><span class="n">Conditional</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span>
                 <span class="n">error</span><span class="o">=</span><span class="s1">&#39;Value should be less than the threshold&#39;</span><span class="p">):</span>
        <span class="n">Conditional</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_condition</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">value</span><span class="p">:</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="n">threshold</span></div>
        
        
<div class="viewcode-block" id="LE"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.LE">[docs]</a><span class="k">class</span> <span class="nc">LE</span><span class="p">(</span><span class="n">Conditional</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span>
                 <span class="n">error</span><span class="o">=</span><span class="s1">&#39;Value should be less or equal than the threshold&#39;</span><span class="p">):</span>
        <span class="n">Conditional</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_condition</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">value</span><span class="p">:</span> <span class="n">value</span> <span class="o">&lt;=</span> <span class="n">threshold</span></div>
        
        
<div class="viewcode-block" id="GT"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.GT">[docs]</a><span class="k">class</span> <span class="nc">GT</span><span class="p">(</span><span class="n">Conditional</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span>
                 <span class="n">error</span><span class="o">=</span><span class="s1">&#39;Value should be greater than the threshold&#39;</span><span class="p">):</span>
        <span class="n">Conditional</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_condition</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">value</span><span class="p">:</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="n">threshold</span></div>


<div class="viewcode-block" id="GE"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.GE">[docs]</a><span class="k">class</span> <span class="nc">GE</span><span class="p">(</span><span class="n">Conditional</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thresold</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="s1">&#39;Value should be greater or equal than the thresold&#39;</span><span class="p">):</span>
        <span class="n">Conditional</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_condition</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">value</span><span class="p">:</span> <span class="n">value</span> <span class="o">&gt;=</span> <span class="n">thresold</span>               </div>


<div class="viewcode-block" id="Range"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.Range">[docs]</a><span class="k">class</span> <span class="nc">Range</span><span class="p">(</span><span class="n">Conditional</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minValue</span><span class="p">,</span> <span class="n">maxValue</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="s1">&#39;Value is outside range&#39;</span><span class="p">):</span>
        <span class="n">Conditional</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_condition</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">value</span><span class="p">:</span> <span class="n">minValue</span> <span class="o">&lt;=</span> <span class="n">value</span> <span class="o">&lt;=</span> <span class="n">maxValue</span></div>
        
        
<div class="viewcode-block" id="NumericListValidator"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.NumericListValidator">[docs]</a><span class="k">class</span> <span class="nc">NumericListValidator</span><span class="p">(</span><span class="n">Conditional</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Validator for ListParam. See ListParam. &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="s1">&#39;Incorrect format for numeric list param. &#39;</span><span class="p">):</span>
        <span class="n">Conditional</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">_condition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="n">parts</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">parts</span><span class="p">:</span>
                <span class="nb">float</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>    </div>


<div class="viewcode-block" id="NonEmptyBoolCondition"><a class="viewcode-back" href="../../../api/pyworkflow.protocol.params.html#pyworkflow.protocol.params.NonEmptyBoolCondition">[docs]</a><span class="k">class</span> <span class="nc">NonEmptyBoolCondition</span><span class="p">(</span><span class="n">Conditional</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="s1">&#39;Boolean param needs to be set.&#39;</span><span class="p">):</span>
        <span class="n">Conditional</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_condition</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">value</span><span class="p">:</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span></div>


<span class="c1"># --------- Some constants validators ---------------------</span>

<span class="n">Positive</span> <span class="o">=</span> <span class="n">GT</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="s1">&#39;Value should be greater than zero&#39;</span><span class="p">)</span>

<span class="n">FreqValidator</span> <span class="o">=</span> <span class="n">Range</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> 
                      <span class="n">error</span><span class="o">=</span><span class="s2">&quot;Digital frequencies should be between 0. and 0.5&quot;</span><span class="p">)</span>

<span class="n">NonEmpty</span> <span class="o">=</span> <span class="n">NonEmptyCondition</span><span class="p">()</span>
<span class="n">NonEmptyBool</span> <span class="o">=</span> <span class="n">NonEmptyBoolCondition</span><span class="p">()</span>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Scipion team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-book"> Other Versions</span>
        v: release-2.0.0
        <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Branches</dt>
            <dd><a href="../../../../gh-pages/index.html">gh-pages</a></dd>
            <dd><a href="params.html">release-2.0.0</a></dd>
            <dd><a href="../../../../release-3.0.0/index.html">release-3.0.0</a></dd>
        </dl>
    </div>
</div>


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>