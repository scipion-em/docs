

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>pyworkflow.object &mdash; Scipion 2.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../static/documentation_options.js"></script>
        <script type="text/javascript" src="../../static/jquery.js"></script>
        <script type="text/javascript" src="../../static/underscore.js"></script>
        <script type="text/javascript" src="../../static/doctools.js"></script>
        <script type="text/javascript" src="../../static/language_data.js"></script>
    
    <script type="text/javascript" src="../../static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/banner.css" type="text/css" />
  <link rel="stylesheet" href="../../static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Scipion
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Set up</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../docs/scipion-modes/install-from-sources.html">Installing Scipion v2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../docs/scipion-modes/scipion-configuration.html">Scipion configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../docs/scipion-modes/host-configuration.html">Host configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../docs/user/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption"><span class="caption-text">User documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../docs/user/user-documentation.html">Graphical interface manuals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../docs/user/user-documentation.html#tutorials">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../docs/user/user-documentation.html#processing-how-to-s">Processing How Toâ€™s</a></li>
</ul>
<p class="caption"><span class="caption-text">Facilities</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../docs/facilities/facilities.html">Streaming Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../docs/facilities/facilities-workflows.html">Streaming workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../docs/facilities/acquisition-simulation.html">Tutorial for Facilities</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../docs/developer/developers.html">Developers Page</a></li>
</ul>
<p class="caption"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/pyworkflow.html">pyworkflow package</a></li>
</ul>
<p class="caption"><span class="caption-text">Get in touch</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../docs/misc/contact-us.html">Contact Us</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Scipion</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
      <li>pyworkflow.object</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for pyworkflow.object</h1><div class="highlight"><pre>
<span></span><span class="c1"># **************************************************************************</span>
<span class="c1"># *</span>
<span class="c1"># * Authors:     J.M. De la Rosa Trevin (jmdelarosa@cnb.csic.es)</span>
<span class="c1"># *</span>
<span class="c1"># * Unidad de  Bioinformatica of Centro Nacional de Biotecnologia , CSIC</span>
<span class="c1"># *</span>
<span class="c1"># * This program is free software; you can redistribute it and/or modify</span>
<span class="c1"># * it under the terms of the GNU General Public License as published by</span>
<span class="c1"># * the Free Software Foundation; either version 2 of the License, or</span>
<span class="c1"># * (at your option) any later version.</span>
<span class="c1"># *</span>
<span class="c1"># * This program is distributed in the hope that it will be useful,</span>
<span class="c1"># * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1"># * MERCHANTABIlITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c1"># * GNU General Public License for more details.</span>
<span class="c1"># *</span>
<span class="c1"># * You should have received a copy of the GNU General Public License</span>
<span class="c1"># * along with this program; if not, write to the Free Software</span>
<span class="c1"># * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA</span>
<span class="c1"># * 02111-1307  USA</span>
<span class="c1"># *</span>
<span class="c1"># *  All comments concerning this program package may be sent to the</span>
<span class="c1"># *  e-mail address &#39;scipion@cnb.csic.es&#39;</span>
<span class="c1"># *</span>
<span class="c1"># **************************************************************************</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This modules holds the base classes for the ORM implementation.</span>
<span class="sd">The Object class is the root in the hierarchy and some other</span>
<span class="sd">basic classes.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="k">import</span> <span class="n">OrderedDict</span>
<span class="kn">import</span> <span class="nn">datetime</span> <span class="k">as</span> <span class="nn">dt</span>

<span class="kn">from</span> <span class="nn">pyworkflow</span> <span class="k">import</span> <span class="n">utils</span>
<span class="kn">from</span> <span class="nn">pyworkflow.utils.reflection</span> <span class="k">import</span> <span class="n">getSubclasses</span>


<span class="c1"># Binary relations always involve two objects, we </span>
<span class="c1"># call them parent-child objects, the following</span>
<span class="c1"># constants reflect which direction of the relation we refer</span>
<span class="n">RELATION_CHILDS</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">RELATION_PARENTS</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c1"># There are other relations related to data provenance,</span>
<span class="c1"># which object were used to produce a result (source of it)</span>
<span class="n">RELATION_SOURCE</span> <span class="o">=</span> <span class="s1">&#39;relation_datasource&#39;</span>
<span class="n">RELATION_TRANSFORM</span> <span class="o">=</span> <span class="s1">&#39;relation_transform&#39;</span>


<span class="c1"># Then column name of the parent id relation</span>
<span class="n">OBJECT_PARENT_ID</span> <span class="o">=</span> <span class="s1">&#39;object_parent_id&#39;</span>


<div class="viewcode-block" id="Object"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object">[docs]</a><span class="k">class</span> <span class="nc">Object</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; All objects in our Domain should inherit from this class</span>
<span class="sd">    that will contains all base properties&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objIsPointer</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;objIsPointer&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>  <span class="c1"># True if will be treated as a reference for storage</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objId</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;objId&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>  <span class="c1"># Unique identifier of this object in some context</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objParentId</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;objParentId&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>  <span class="c1"># identifier of the parent object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objName</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;objName&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>  <span class="c1"># The name of the object will contains the whole path of ancestors</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objLabel</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;objLabel&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>  <span class="c1"># This will serve to label the objects</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objComment</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;objComment&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objTag</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;objTag&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>  <span class="c1"># This attribute serve to make some annotation on the object.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objDoStore</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;objDoStore&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>  <span class="c1"># True if this object will be stored from his parent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objCreation</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objParent</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Reference to parent object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objEnabled</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

<div class="viewcode-block" id="Object.getClassName"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.getClassName">[docs]</a>    <span class="k">def</span> <span class="nf">getClassName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span></div>
    
<div class="viewcode-block" id="Object.getClass"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.getClass">[docs]</a>    <span class="k">def</span> <span class="nf">getClass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="Object.getDoc"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.getDoc">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">getDoc</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__doc__</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span></div>

    <span class="c1"># FIXME: This function should be renamed to hasAttribute when we address that issue</span>
<div class="viewcode-block" id="Object.hasAttributeExt"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.hasAttributeExt">[docs]</a>    <span class="k">def</span> <span class="nf">hasAttributeExt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrName</span><span class="p">):</span>
        <span class="n">attrList</span> <span class="o">=</span> <span class="n">attrName</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="k">for</span> <span class="n">partName</span> <span class="ow">in</span> <span class="n">attrList</span><span class="p">:</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">partName</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span></div>

    <span class="c1"># FIXME: This function is not symmetric with setAttributeValue</span>
<div class="viewcode-block" id="Object.hasAttribute"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.hasAttribute">[docs]</a>    <span class="k">def</span> <span class="nf">hasAttribute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrName</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrName</span><span class="p">)</span></div>

    <span class="c1"># FIXME: This function is not symmetric with setAttributeValue</span>
<div class="viewcode-block" id="Object.getAttributeValue"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.getAttributeValue">[docs]</a>    <span class="k">def</span> <span class="nf">getAttributeValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrName</span><span class="p">,</span> <span class="n">defaultValue</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Get the attribute value given its name.</span>
<span class="sd">        Equivalent to getattr(self, name).get() </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">attr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrName</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">attr</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">defaultValue</span>
        <span class="k">elif</span> <span class="n">callable</span><span class="p">(</span><span class="n">attr</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">attr</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">Object</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">attr</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">attr</span>  <span class="c1"># behave well for non-Object attributes</span>
        <span class="k">return</span> <span class="n">value</span></div>
    
<div class="viewcode-block" id="Object.setAttributeValue"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.setAttributeValue">[docs]</a>    <span class="k">def</span> <span class="nf">setAttributeValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrName</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">ignoreMissing</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Set the attribute value given its name.</span>
<span class="sd">        Equivalent to setattr(self, name).set(value) </span>
<span class="sd">        If the attrName contains dot: x.y</span>
<span class="sd">        it will be equivalent to getattr(getattr(self, &#39;x&#39;), &#39;y&#39;).set(value)</span>
<span class="sd">        If ignoreMissing is True, unexisting attrName will not raise an</span>
<span class="sd">        exception.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">attrList</span> <span class="o">=</span> <span class="n">attrName</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="k">for</span> <span class="n">partName</span> <span class="ow">in</span> <span class="n">attrList</span><span class="p">:</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">partName</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">ignoreMissing</span><span class="p">:</span>
                    <span class="k">return</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Object.setAttributeValue: obj is None! attrName: &quot;</span>
                                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">, part: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">attrName</span><span class="p">,</span> <span class="n">partName</span><span class="p">))</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div>
        
<div class="viewcode-block" id="Object.getAttributes"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.getAttributes">[docs]</a>    <span class="k">def</span> <span class="nf">getAttributes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the list of attributes than are</span>
<span class="sd">        subclasses of Object&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">attr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">attr</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">Object</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">key</span><span class="p">,</span> <span class="n">attr</span></div>
                
<div class="viewcode-block" id="Object.getAttributesToStore"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.getAttributesToStore">[docs]</a>    <span class="k">def</span> <span class="nf">getAttributesToStore</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the list of attributes than are</span>
<span class="sd">        subclasses of Object and will be stored&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">attr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAttributes</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="s1">&#39;_objDoStore&#39;</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Object.getAttributesToStore: attribute &#39;</span><span class="si">%s</span><span class="s2">&#39; seems to &quot;</span>
                      <span class="s2">&quot;be overwritten,&quot;</span> <span class="o">%</span> <span class="n">key</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   since &#39;_objDoStore&#39; was not found. &quot;</span>
                      <span class="s2">&quot;Ignoring attribute. &quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">attr</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">attr</span><span class="o">.</span><span class="n">_objDoStore</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">key</span><span class="p">,</span> <span class="n">attr</span></div>

<div class="viewcode-block" id="Object.isPointer"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.isPointer">[docs]</a>    <span class="k">def</span> <span class="nf">isPointer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;If this is true, the value field is a pointer </span>
<span class="sd">        to another object&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objIsPointer</span></div>
        
    <span class="k">def</span> <span class="nf">_convertValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Convert a value to desired scalar type&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">value</span>
    
<div class="viewcode-block" id="Object.set"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the internal value, if it is different from None</span>
<span class="sd">        call the convert function in subclasses&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convertValue</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>            
        <span class="bp">self</span><span class="o">.</span><span class="n">_objValue</span> <span class="o">=</span> <span class="n">value</span></div>
    
<div class="viewcode-block" id="Object.get"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return internal value&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objValue</span></div>
    
<div class="viewcode-block" id="Object.trace"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.trace">[docs]</a>    <span class="k">def</span> <span class="nf">trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">callback</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Add an observer when the set method is called. &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">set</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">__setTrace</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__set</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">set</span> 
            <span class="bp">self</span><span class="o">.</span><span class="n">set</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__setTrace</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__setCallback</span> <span class="o">=</span> <span class="n">callback</span> </div>
        
    <span class="k">def</span> <span class="nf">__setTrace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__set</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__setCallback</span><span class="p">()</span>
    
<div class="viewcode-block" id="Object.getObjValue"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.getObjValue">[docs]</a>    <span class="k">def</span> <span class="nf">getObjValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the internal value for storage.</span>
<span class="sd">        This is a good place to do some update of the</span>
<span class="sd">        internal value before been stored&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objValue</span></div>
    
<div class="viewcode-block" id="Object.getObjId"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.getObjId">[docs]</a>    <span class="k">def</span> <span class="nf">getObjId</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return object id&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objId</span></div>
    
<div class="viewcode-block" id="Object.setObjId"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.setObjId">[docs]</a>    <span class="k">def</span> <span class="nf">setObjId</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newId</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the object id&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objId</span> <span class="o">=</span> <span class="n">newId</span></div>
        
<div class="viewcode-block" id="Object.copyObjId"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.copyObjId">[docs]</a>    <span class="k">def</span> <span class="nf">copyObjId</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Copy the object id form other to self. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setObjId</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">getObjId</span><span class="p">())</span></div>
        
<div class="viewcode-block" id="Object.hasObjId"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.hasObjId">[docs]</a>    <span class="k">def</span> <span class="nf">hasObjId</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objId</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span></div>
    
<div class="viewcode-block" id="Object.cleanObjId"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.cleanObjId">[docs]</a>    <span class="k">def</span> <span class="nf">cleanObjId</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This function will set to None this object id</span>
<span class="sd">        and the id of all its children attributes.</span>
<span class="sd">        This function should be used when retrieving</span>
<span class="sd">        an object from a mapper and storing in a different one.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setObjId</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">attr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAttributesToStore</span><span class="p">():</span>
            <span class="n">attr</span><span class="o">.</span><span class="n">cleanObjId</span><span class="p">()</span></div>
            
<div class="viewcode-block" id="Object.getObjParentId"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.getObjParentId">[docs]</a>    <span class="k">def</span> <span class="nf">getObjParentId</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objParentId</span></div>
    
<div class="viewcode-block" id="Object.hasObjParentId"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.hasObjParentId">[docs]</a>    <span class="k">def</span> <span class="nf">hasObjParentId</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objParentId</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span></div>
            
<div class="viewcode-block" id="Object.getObjLabel"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.getObjLabel">[docs]</a>    <span class="k">def</span> <span class="nf">getObjLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return the label associated with this object&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objLabel</span></div>
    
<div class="viewcode-block" id="Object.setObjLabel"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.setObjLabel">[docs]</a>    <span class="k">def</span> <span class="nf">setObjLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Set the label to better identify this object&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objLabel</span> <span class="o">=</span> <span class="n">label</span></div>
             
<div class="viewcode-block" id="Object.getObjComment"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.getObjComment">[docs]</a>    <span class="k">def</span> <span class="nf">getObjComment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return the comment associated with this object&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objComment</span></div>
    
<div class="viewcode-block" id="Object.setObjComment"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.setObjComment">[docs]</a>    <span class="k">def</span> <span class="nf">setObjComment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">comment</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Set the comment to better identify this object&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objComment</span> <span class="o">=</span> <span class="n">comment</span>       </div>
        
<div class="viewcode-block" id="Object.setObjCreation"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.setObjCreation">[docs]</a>    <span class="k">def</span> <span class="nf">setObjCreation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">creation</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Set the creation time of the object. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objCreation</span> <span class="o">=</span> <span class="n">creation</span></div>
        
<div class="viewcode-block" id="Object.getObjCreation"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.getObjCreation">[docs]</a>    <span class="k">def</span> <span class="nf">getObjCreation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return the stored creation time of the object. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objCreation</span></div>

<div class="viewcode-block" id="Object.getObjCreationAsDate"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.getObjCreationAsDate">[docs]</a>    <span class="k">def</span> <span class="nf">getObjCreationAsDate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return the stored creation time of the object as date &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">String</span><span class="o">.</span><span class="n">getDatetime</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_objCreation</span><span class="p">)</span></div>

<div class="viewcode-block" id="Object.strId"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.strId">[docs]</a>    <span class="k">def</span> <span class="nf">strId</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;String representation of id&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_objId</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="Object.getName"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.getName">[docs]</a>    <span class="k">def</span> <span class="nf">getName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># TODO: REMOVE THIS FUNCTION, SINCE IT DOES NOT COMPLAIN WITH _objX naming</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objName</span></div>
    
<div class="viewcode-block" id="Object.getObjName"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.getObjName">[docs]</a>    <span class="k">def</span> <span class="nf">getObjName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objName</span></div>
    
<div class="viewcode-block" id="Object.setEnabled"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.setEnabled">[docs]</a>    <span class="k">def</span> <span class="nf">setEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enabled</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objEnabled</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">enabled</span><span class="p">)</span></div>
        
<div class="viewcode-block" id="Object.isEnabled"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.isEnabled">[docs]</a>    <span class="k">def</span> <span class="nf">isEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return if object is enabled&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objEnabled</span></div>
    
<div class="viewcode-block" id="Object.getNameId"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.getNameId">[docs]</a>    <span class="k">def</span> <span class="nf">getNameId</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return an unique and readable id that identifies this object. &quot;&quot;&quot;</span>
        <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getObjLabel</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">label</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">label</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasObjId</span><span class="p">():</span>
            <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getName</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">strId</span><span class="p">())</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span></div>
    
<div class="viewcode-block" id="Object.getLastName"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.getLastName">[docs]</a>    <span class="k">def</span> <span class="nf">getLastName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; If the name contains parent path, remove it</span>
<span class="sd">        and only return the attribute name in its parent. </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s1">&#39;.&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objName</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objName</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objName</span> </div>
    
<div class="viewcode-block" id="Object.setName"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.setName">[docs]</a>    <span class="k">def</span> <span class="nf">setName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objName</span> <span class="o">=</span> <span class="n">name</span></div>
        
<div class="viewcode-block" id="Object.hasValue"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.hasValue">[docs]</a>    <span class="k">def</span> <span class="nf">hasValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>        
        <span class="k">return</span> <span class="kc">True</span></div>
    
<div class="viewcode-block" id="Object.getStore"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.getStore">[docs]</a>    <span class="k">def</span> <span class="nf">getStore</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return True if the object will be stored by the mapper&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objDoStore</span></div>
    
<div class="viewcode-block" id="Object.setStore"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.setStore">[docs]</a>    <span class="k">def</span> <span class="nf">setStore</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;set the store flag&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objDoStore</span> <span class="o">=</span> <span class="n">value</span></div>

    <span class="k">def</span> <span class="nf">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Issue found in scipion-em-xmipp/xmipp3/protocols/protocol_extract_particles_pairs.py (_setupBasicProperties)</span>
        <span class="c1"># TypeError: unhashable type: &#39;Micrograph&#39;</span>
        <span class="c1"># Solution: Hashability makes an object usable as a dictionary key and a set member, because these data</span>
        <span class="c1"># structures use the hash value internally. All of Pythonâ€™s immutable built_in objects are hashable, while no</span>
        <span class="c1"># mutable containers (such as lists or dictionaries) are. Objects which are instances of user-defined classes</span>
        <span class="c1"># are hashable by default; they all compare unequal, and their hash value is their id().</span>
        <span class="c1"># https://docs.python.org/3.1/glossary.html</span>
        <span class="k">return</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Comparison for scalars should be by value</span>
<span class="sd">        and for other objects by reference&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objValue</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objValue</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_objValue</span>
    
<div class="viewcode-block" id="Object.equalAttributes"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.equalAttributes">[docs]</a>    <span class="k">def</span> <span class="nf">equalAttributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">ignore</span><span class="o">=</span><span class="p">[],</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Compare that all attributes are equal&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v1</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAttributes</span><span class="p">():</span>
            <span class="c1"># v1 = getattr(self, k) # This is necessary because of FakedObject simulation of getattr</span>
            <span class="c1"># Skip comparison of attribute names in &#39;ignore&#39; list</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">ignore</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">v2</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">v1</span><span class="p">),</span> <span class="n">Object</span><span class="p">):</span>
                <span class="n">comp</span> <span class="o">=</span> <span class="n">v1</span><span class="o">.</span><span class="n">equalAttributes</span><span class="p">(</span><span class="n">v2</span><span class="p">,</span> <span class="n">ignore</span><span class="o">=</span><span class="n">ignore</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">comp</span> <span class="o">=</span> <span class="n">v1</span> <span class="o">==</span> <span class="n">v2</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">comp</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Different attributes: &quot;</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;self.</span><span class="si">%s</span><span class="s2"> = </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v1</span><span class="p">))</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;other.</span><span class="si">%s</span><span class="s2"> = </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v2</span><span class="p">))</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span></div>
            
<div class="viewcode-block" id="Object.copyAttributes"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.copyAttributes">[docs]</a>    <span class="k">def</span> <span class="nf">copyAttributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="o">*</span><span class="n">attrNames</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Copy attributes in attrNames from other to self. </span>
<span class="sd">        If the name X is in attrNames, it would be equivalent to:</span>
<span class="sd">        self.X.set(other.X.get())</span>
<span class="sd">        This method is more useful for Scalar attributes.</span>
<span class="sd">        There are two patchs for Pointer and PointerList.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">attrNames</span><span class="p">:</span>
            <span class="n">attr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">otherAttr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">attr</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">otherAttr</span><span class="o">.</span><span class="n">clone</span><span class="p">())</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">Pointer</span><span class="p">):</span>
                <span class="n">attr</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">otherAttr</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">PointerList</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">pointer</span> <span class="ow">in</span> <span class="n">otherAttr</span><span class="p">:</span>
                    <span class="n">attr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pointer</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">attr</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">otherAttr</span><span class="o">.</span><span class="n">get</span><span class="p">())</span></div>
            
    <span class="k">def</span> <span class="nf">__getObjDict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">objDict</span><span class="p">,</span> <span class="n">includeClass</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">prefix</span><span class="p">:</span>
            <span class="n">prefix</span> <span class="o">+=</span> <span class="s1">&#39;.&#39;</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAttributesToStore</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span><span class="o">.</span><span class="n">isPointer</span><span class="p">():</span>
                <span class="n">kPrefix</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="n">k</span>
                <span class="k">if</span> <span class="n">includeClass</span><span class="p">:</span>
                    <span class="n">objDict</span><span class="p">[</span><span class="n">kPrefix</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">getClassName</span><span class="p">(),</span> <span class="n">v</span><span class="o">.</span><span class="n">getObjValue</span><span class="p">())</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">objDict</span><span class="p">[</span><span class="n">kPrefix</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">getObjValue</span><span class="p">()</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">Scalar</span><span class="p">):</span>
                    <span class="n">v</span><span class="o">.</span><span class="n">__getObjDict</span><span class="p">(</span><span class="n">kPrefix</span><span class="p">,</span> <span class="n">objDict</span><span class="p">,</span> <span class="n">includeClass</span><span class="p">)</span>
            
<div class="viewcode-block" id="Object.getObjDict"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.getObjDict">[docs]</a>    <span class="k">def</span> <span class="nf">getObjDict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">includeClass</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">includeBasic</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return all attributes and values in a dictionary.</span>
<span class="sd">        Nested attributes will be separated with a dot in the dict key.</span>
<span class="sd">        Params:</span>
<span class="sd">            includeClass: if True, the values will be a tuple (ClassName, value)</span>
<span class="sd">                otherwise only the values of the attributes</span>
<span class="sd">            includeBasic: if True include the id, label and comment.</span>
<span class="sd">                object.id: objId</span>
<span class="sd">                object.label: objLabel</span>
<span class="sd">                object.comment: objComment</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">includeClass</span><span class="p">:</span>
            <span class="n">d</span><span class="p">[</span><span class="s1">&#39;self&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getClassName</span><span class="p">(),)</span>

        <span class="k">if</span> <span class="n">includeBasic</span><span class="p">:</span>
            <span class="n">d</span><span class="p">[</span><span class="s1">&#39;object.id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getObjId</span><span class="p">()</span>
            <span class="n">d</span><span class="p">[</span><span class="s1">&#39;object.label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getObjLabel</span><span class="p">()</span>
            <span class="n">d</span><span class="p">[</span><span class="s1">&#39;object.comment&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getObjComment</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__getObjDict</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">includeClass</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">d</span></div>

<div class="viewcode-block" id="Object.setAttributesFromDict"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.setAttributesFromDict">[docs]</a>    <span class="k">def</span> <span class="nf">setAttributesFromDict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrDict</span><span class="p">,</span> <span class="n">setBasic</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                              <span class="n">ignoreMissing</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Set object attributes from the dict obtained from getObjDict.</span>
<span class="sd">         WARNING: this function is yet experimental and not fully tested.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">setBasic</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setObjId</span><span class="p">(</span><span class="n">attrDict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;object.id&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setObjLabel</span><span class="p">(</span><span class="n">attrDict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;object.label&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setObjComment</span><span class="p">(</span><span class="n">attrDict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;object.comment&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">attrName</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">attrDict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">attrName</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;object.&#39;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">setAttributeValue</span><span class="p">(</span><span class="n">attrName</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">ignoreMissing</span><span class="p">)</span></div>
            
    <span class="k">def</span> <span class="nf">__getMappedDict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">objDict</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">prefix</span><span class="p">:</span>
            <span class="n">prefix</span> <span class="o">+=</span> <span class="s1">&#39;.&#39;</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAttributesToStore</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span><span class="o">.</span><span class="n">isPointer</span><span class="p">():</span>
                <span class="n">kPrefix</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="n">k</span>
                <span class="n">objDict</span><span class="p">[</span><span class="n">kPrefix</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">Scalar</span><span class="p">):</span>
                    <span class="n">v</span><span class="o">.</span><span class="n">__getMappedDict</span><span class="p">(</span><span class="n">kPrefix</span><span class="p">,</span> <span class="n">objDict</span><span class="p">)</span>
                        
<div class="viewcode-block" id="Object.getMappedDict"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.getMappedDict">[docs]</a>    <span class="k">def</span> <span class="nf">getMappedDict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__getMappedDict</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">d</span>        </div>
    
<div class="viewcode-block" id="Object.getNestedValue"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.getNestedValue">[docs]</a>    <span class="k">def</span> <span class="nf">getNestedValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Retrieve the value of nested attributes like: _ctfModel.defocusU. &quot;&quot;&quot;</span>
        <span class="n">attr</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">):</span>
            <span class="n">attr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">attr</span><span class="o">.</span><span class="n">get</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="Object.getValuesFromDict"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.getValuesFromDict">[docs]</a>    <span class="k">def</span> <span class="nf">getValuesFromDict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objDict</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Retrieve the values of the attributes</span>
<span class="sd">        for each of the keys that comes in the objDict.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">getNestedValue</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">objDict</span> <span class="k">if</span> <span class="n">k</span> <span class="o">!=</span> <span class="s1">&#39;self&#39;</span><span class="p">]</span></div>
    
<div class="viewcode-block" id="Object.getValuesFromMappedDict"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.getValuesFromMappedDict">[docs]</a>    <span class="k">def</span> <span class="nf">getValuesFromMappedDict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mappedDict</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">getObjValue</span><span class="p">()</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">mappedDict</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span></div>
    
<div class="viewcode-block" id="Object.copy"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.copy">[docs]</a>    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">copyId</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ignoreAttrs</span><span class="o">=</span><span class="p">[]):</span>
        <span class="sd">&quot;&quot;&quot; Copy all attributes values from one object to the other.</span>
<span class="sd">        The attributes will be created if needed with the corresponding type.</span>
<span class="sd">        Params:</span>
<span class="sd">            other: the other object from which to make the copy.</span>
<span class="sd">            copyId: if true, the _objId will be also copied.</span>
<span class="sd">            ignoreAttrs: pass a list with attributes names to ignore.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">copyDict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;internalPointers&#39;</span><span class="p">:</span> <span class="p">[]}</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">_copy</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">copyDict</span><span class="p">,</span> <span class="n">copyId</span><span class="p">,</span> <span class="n">ignoreAttrs</span><span class="o">=</span><span class="n">ignoreAttrs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_updatePointers</span><span class="p">(</span><span class="n">copyDict</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">copyDict</span></div>
        
    <span class="k">def</span> <span class="nf">_updatePointers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">copyDict</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Update the internal pointers after a copy. </span>
<span class="sd">        If there are pointers to other object in the copy </span>
<span class="sd">        the references should be updated.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">ptr</span> <span class="ow">in</span> <span class="n">copyDict</span><span class="p">[</span><span class="s1">&#39;internalPointers&#39;</span><span class="p">]:</span>
            <span class="n">pointedId</span> <span class="o">=</span> <span class="n">ptr</span><span class="o">.</span><span class="n">getObjValue</span><span class="p">()</span><span class="o">.</span><span class="n">getObjId</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">pointedId</span> <span class="ow">in</span> <span class="n">copyDict</span><span class="p">:</span>
                <span class="n">ptr</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">copyDict</span><span class="p">[</span><span class="n">pointedId</span><span class="p">])</span>
        
    <span class="k">def</span> <span class="nf">_copy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">copyDict</span><span class="p">,</span> <span class="n">copyId</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ignoreAttrs</span><span class="o">=</span><span class="p">[]):</span>
        <span class="sd">&quot;&quot;&quot; Recursively clone all attributes from one object to the other.</span>
<span class="sd">        (Currently, we are not deleting attributes missing in the &#39;other&#39; object.)</span>
<span class="sd">        Params:</span>
<span class="sd">        copyDict: this dict is used to store the ids map between &#39;other&#39; and</span>
<span class="sd">            &#39;self&#39; attributes. It is used for update pointers and relations</span>
<span class="sd">            later on. This will only work if the ids of &#39;other&#39; attributes</span>
<span class="sd">            has been properly set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Copy basic object data</span>
        <span class="c1"># self._objName = other._objName</span>
        <span class="k">if</span> <span class="n">copyId</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_objId</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">_objId</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objValue</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">_objValue</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objLabel</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">_objLabel</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objComment</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">_objComment</span>
        <span class="c1"># Copy attributes recursively</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">getAttributes</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ignoreAttrs</span><span class="p">:</span>
                <span class="n">myAttr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    
                <span class="k">if</span> <span class="n">myAttr</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">myAttr</span> <span class="o">=</span> <span class="n">attr</span><span class="o">.</span><span class="n">getClass</span><span class="p">()()</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">myAttr</span><span class="p">)</span>
                    
                <span class="n">myAttr</span><span class="o">.</span><span class="n">_copy</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">copyDict</span><span class="p">,</span> <span class="n">copyId</span><span class="p">,</span> <span class="n">level</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span>
                <span class="c1"># Store the attr in the copyDict</span>
                <span class="k">if</span> <span class="n">attr</span><span class="o">.</span><span class="n">hasObjId</span><span class="p">():</span>
                    <span class="c1"># storing in copyDict with id=&quot;, attr.getObjId()</span>
                    <span class="n">copyDict</span><span class="p">[</span><span class="n">attr</span><span class="o">.</span><span class="n">getObjId</span><span class="p">()]</span> <span class="o">=</span> <span class="n">myAttr</span>
                <span class="c1"># Use the copyDict to fix the reference in the copying object</span>
                <span class="c1"># if the pointed one is inside the same object</span>
                <span class="k">if</span> <span class="n">myAttr</span><span class="o">.</span><span class="n">isPointer</span><span class="p">()</span> <span class="ow">and</span> <span class="n">myAttr</span><span class="o">.</span><span class="n">hasValue</span><span class="p">():</span>
                    <span class="n">copyDict</span><span class="p">[</span><span class="s1">&#39;internalPointers&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">myAttr</span><span class="p">)</span>
    
<div class="viewcode-block" id="Object.clone"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.clone">[docs]</a>    <span class="k">def</span> <span class="nf">clone</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">clone</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getClass</span><span class="p">()()</span>
        <span class="n">clone</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>        
        <span class="k">return</span> <span class="n">clone</span>    </div>
    
<div class="viewcode-block" id="Object.evalCondition"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.evalCondition">[docs]</a>    <span class="k">def</span> <span class="nf">evalCondition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">condition</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Check if condition is meet.</span>
<span class="sd">        Params:</span>
<span class="sd">            condition: the condition string, it can contains variables</span>
<span class="sd">                or methods without arguments to be evaluated.</span>
<span class="sd">            Examples:</span>
<span class="sd">                hasCTF</span>
<span class="sd">                hasCTF and not hasAlignment</span>
<span class="sd">        Return:</span>
<span class="sd">            The value of the condition evaluated with values</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Split in possible tokens</span>
        <span class="kn">import</span> <span class="nn">re</span>
        <span class="n">tokens</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;\W+&#39;</span><span class="p">,</span> <span class="n">condition</span><span class="p">)</span>
        <span class="n">condStr</span> <span class="o">=</span> <span class="n">condition</span>
        
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tokens</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
                <span class="n">condStr</span> <span class="o">=</span> <span class="n">condStr</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getAttributeValue</span><span class="p">(</span><span class="n">t</span><span class="p">)))</span>
        <span class="k">return</span> <span class="nb">eval</span><span class="p">(</span><span class="n">condStr</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="Object.printAll"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.printAll">[docs]</a>    <span class="k">def</span> <span class="nf">printAll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Print object and all its attributes.</span>
<span class="sd">        Mainly for debugging&quot;&quot;&quot;</span>
        <span class="n">tab</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span> <span class="o">*</span> <span class="p">(</span><span class="n">level</span><span class="o">*</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">idStr</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>  <span class="c1"># &#39; (id = %s, pid = %s)&#39; % (self.getObjId(), self._objParentId)</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">tab</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">getClassName</span><span class="p">(),</span> <span class="n">idStr</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;submitTemplate&#39;</span><span class="p">:</span>  <span class="c1"># Skip this because very large value</span>
                <span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;...&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getObjValue</span><span class="p">()</span>
                
            <span class="nb">print</span><span class="p">(</span><span class="n">tab</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">),</span> <span class="n">idStr</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAttributes</span><span class="p">():</span>
            <span class="n">v</span><span class="o">.</span><span class="n">printAll</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">level</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span></div>
            
<div class="viewcode-block" id="Object.printObjDict"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Object.printObjDict">[docs]</a>    <span class="k">def</span> <span class="nf">printObjDict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">includeClasses</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Print object dictionary. Mainly for debugging&quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">pprint</span>
        <span class="n">pp</span> <span class="o">=</span> <span class="n">pprint</span><span class="o">.</span><span class="n">PrettyPrinter</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
        <span class="n">pp</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getObjDict</span><span class="p">(</span><span class="n">includeClasses</span><span class="p">)))</span>        </div></div>


<div class="viewcode-block" id="OrderedObject"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.OrderedObject">[docs]</a><span class="k">class</span> <span class="nc">OrderedObject</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This is based on Object, but keep the list</span>
<span class="sd">    of the attributes to store in the same order</span>
<span class="sd">    of insertion, this can be useful where order matters&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_attributes&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="n">Object</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__attrPointed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Check if a value is already pointed by other</span>
<span class="sd">        attribute. This will prevent to storing pointed</span>
<span class="sd">        attributes such as:</span>
<span class="sd">        self.inputMics = self.inputMicrographs.get()</span>
<span class="sd">        In this case we want to avoid to store self.inputMics as </span>
<span class="sd">        another attribute of this object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">:</span>
            <span class="n">attr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">attr</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">attr</span><span class="o">.</span><span class="n">isPointer</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">attr</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="ow">is</span> <span class="n">value</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>
    
    <span class="k">def</span> <span class="nf">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span> <span class="ow">and</span>
            <span class="nb">issubclass</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">Object</span><span class="p">)</span> <span class="ow">and</span>
                <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__attrPointed</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">_objDoStore</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="n">Object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    
<div class="viewcode-block" id="OrderedObject.getAttributes"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.OrderedObject.getAttributes">[docs]</a>    <span class="k">def</span> <span class="nf">getAttributes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the list of attributes than are</span>
<span class="sd">        subclasses of Object and will be stored&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">key</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span></div>
                
<div class="viewcode-block" id="OrderedObject.deleteAttribute"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.OrderedObject.deleteAttribute">[docs]</a>    <span class="k">def</span> <span class="nf">deleteAttribute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrName</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Delete an attribute. &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">attrName</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">attrName</span><span class="p">)</span>
            <span class="nb">delattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrName</span><span class="p">)</span></div></div>

                
<div class="viewcode-block" id="Scalar"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Scalar">[docs]</a><span class="k">class</span> <span class="nc">Scalar</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for basic types&quot;&quot;&quot;</span>
<div class="viewcode-block" id="Scalar.hasValue"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Scalar.hasValue">[docs]</a>    <span class="k">def</span> <span class="nf">hasValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objValue</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span></div>
    
<div class="viewcode-block" id="Scalar.equalAttributes"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Scalar.equalAttributes">[docs]</a>    <span class="k">def</span> <span class="nf">equalAttributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">ignore</span><span class="o">=</span><span class="p">[],</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Compare that all attributes are equal&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objValue</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_objValue</span></div>
    
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;String representation of the scalar value&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">__cmp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Comparison implementation for scalars. &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Object</span><span class="p">)</span> <span class="k">else</span> <span class="n">other</span>
        <span class="c1"># cmp does not longer exist in Python3, so we will follow</span>
        <span class="c1"># the recommend replacement: (a &gt; b) - (a &lt; b)</span>
        <span class="c1"># https://docs.python.org/3.0/whatsnew/3.0.html#ordering-comparisons</span>

        <span class="c1"># Consider None values</span>
        <span class="k">if</span> <span class="n">a</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">b</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">a</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">b</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">a</span> <span class="o">&gt;</span> <span class="n">b</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">a</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Comparison for scalars should be by value while</span>
<span class="sd">         for other objects by reference. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cmp</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cmp</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cmp</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cmp</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cmp</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cmp</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span>

<div class="viewcode-block" id="Scalar.get"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Scalar.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the value, if internal value is None</span>
<span class="sd">        the default argument passed is returned. &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasPointer</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pointer</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">default</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasValue</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objValue</span>
        <span class="k">return</span> <span class="n">default</span></div>
    
    <span class="k">def</span> <span class="nf">_copy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
        
<div class="viewcode-block" id="Scalar.swap"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Scalar.swap">[docs]</a>    <span class="k">def</span> <span class="nf">swap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Swap the contained value between</span>
<span class="sd">        self and other objects.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objValue</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objValue</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">_objValue</span>
        <span class="n">other</span><span class="o">.</span><span class="n">_objValue</span> <span class="o">=</span> <span class="n">tmp</span></div>

<div class="viewcode-block" id="Scalar.sum"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Scalar.sum">[docs]</a>    <span class="k">def</span> <span class="nf">sum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objValue</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convertValue</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div>
        
<div class="viewcode-block" id="Scalar.multiply"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Scalar.multiply">[docs]</a>    <span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objValue</span> <span class="o">*=</span> <span class="n">value</span></div>

<div class="viewcode-block" id="Scalar.setPointer"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Scalar.setPointer">[docs]</a>    <span class="k">def</span> <span class="nf">setPointer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pointer</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Set an internal pointer from this Scalar.</span>
<span class="sd">        Then, the value (retrieved with get) will be obtained</span>
<span class="sd">        from the pointed object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">pointer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasPointer</span><span class="p">():</span>
                <span class="nb">delattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_pointer&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pointer</span> <span class="o">=</span> <span class="n">pointer</span></div>

<div class="viewcode-block" id="Scalar.hasPointer"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Scalar.hasPointer">[docs]</a>    <span class="k">def</span> <span class="nf">hasPointer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return True if this Scalar has an internal pointer</span>
<span class="sd">        from where the value will be retrieved with the get() method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_pointer&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Scalar.getPointer"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Scalar.getPointer">[docs]</a>    <span class="k">def</span> <span class="nf">getPointer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return the internal pointer of this Scalar or None. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_pointer&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div></div>

    
<div class="viewcode-block" id="Integer"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Integer">[docs]</a><span class="k">class</span> <span class="nc">Integer</span><span class="p">(</span><span class="n">Scalar</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Integer object&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">_convertValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    
<div class="viewcode-block" id="Integer.increment"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Integer.increment">[docs]</a>    <span class="k">def</span> <span class="nf">increment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Add 1 to the current value. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objValue</span> <span class="o">+=</span> <span class="mi">1</span></div>
        
    <span class="k">def</span> <span class="nf">__float__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
    
    <span class="k">def</span> <span class="nf">__int__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    
    <span class="k">def</span> <span class="nf">__long__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">())</span></div>
    
        
<div class="viewcode-block" id="String"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.String">[docs]</a><span class="k">class</span> <span class="nc">String</span><span class="p">(</span><span class="n">Scalar</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;String object. &quot;&quot;&quot;</span>
    <span class="n">DATETIME_FORMAT</span> <span class="o">=</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span>
    <span class="n">FS</span> <span class="o">=</span> <span class="s2">&quot;.</span><span class="si">%f</span><span class="s2">&quot;</span>  <span class="c1"># Femto seconds</span>

<div class="viewcode-block" id="String.getDatetime"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.String.getDatetime">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">getDatetime</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">strValue</span><span class="p">,</span> <span class="n">formatStr</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fs</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Get the datetime from the given string value.</span>
<span class="sd">        Params:</span>
<span class="sd">            strValue: string representation of the date</span>
<span class="sd">            formatStr: if is None, use the default DATETIME_FORMAT.</span>
<span class="sd">            fs: Use femto seconds or not, only when format=None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">formatStr</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">formatStr</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">DATETIME_FORMAT</span>
                <span class="k">if</span> <span class="n">fs</span><span class="p">:</span>
                    <span class="n">formatStr</span> <span class="o">+=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">FS</span>
                <span class="n">datetime</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">strValue</span><span class="p">,</span> <span class="n">formatStr</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="c1"># Maybe the %f (femtoseconds) is not working</span>
                <span class="c1"># let&#39;s try to format without it</span>
                <span class="n">datetime</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">strValue</span><span class="p">,</span> <span class="bp">cls</span><span class="o">.</span><span class="n">DATETIME_FORMAT</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">datetime</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">strValue</span><span class="p">,</span> <span class="n">formatStr</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">datetime</span></div>

    <span class="k">def</span> <span class="nf">_convertValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    
<div class="viewcode-block" id="String.empty"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.String.empty">[docs]</a>    <span class="k">def</span> <span class="nf">empty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return true if None or len == 0 &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasValue</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="o">==</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="String.datetime"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.String.datetime">[docs]</a>    <span class="k">def</span> <span class="nf">datetime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">formatStr</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fs</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Get the datetime from this object string value. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">String</span><span class="o">.</span><span class="n">getDatetime</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_objValue</span><span class="p">,</span> <span class="n">formatStr</span><span class="p">,</span> <span class="n">fs</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Float"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Float">[docs]</a><span class="k">class</span> <span class="nc">Float</span><span class="p">(</span><span class="n">Scalar</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Float object&quot;&quot;&quot;</span>
    <span class="n">EQUAL_PRECISION</span> <span class="o">=</span> <span class="mf">0.001</span>
    
<div class="viewcode-block" id="Float.setPrecision"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Float.setPrecision">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">setPrecision</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">newPrecision</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Set the precision to compare float values.</span>
<span class="sd">        Mainly used for testing purposes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">EQUAL_PRECISION</span> <span class="o">=</span> <span class="n">newPrecision</span></div>
        
    <span class="k">def</span> <span class="nf">_convertValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    
<div class="viewcode-block" id="Float.equalAttributes"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Float.equalAttributes">[docs]</a>    <span class="k">def</span> <span class="nf">equalAttributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">ignore</span><span class="o">=</span><span class="p">[],</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Compare that all attributes are equal&quot;&quot;&quot;</span>
        <span class="c1"># If both float has some value distinct of None</span>
        <span class="c1"># then we should compare the absolute value of difference </span>
        <span class="c1"># against the EQUAL_PRECISION to say equal or not</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasValue</span><span class="p">()</span> <span class="ow">and</span> <span class="n">other</span><span class="o">.</span><span class="n">hasValue</span><span class="p">():</span>
            <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_objValue</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">_objValue</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">EQUAL_PRECISION</span>
        <span class="c1"># If one has None as value, then both should have None</span>
        <span class="c1"># to have equal attributes</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasValue</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">other</span><span class="o">.</span><span class="n">hasValue</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">True</span>
        
        <span class="k">return</span> <span class="kc">False</span></div>
    
    <span class="k">def</span> <span class="nf">__float__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">()</span></div>
        
        
<div class="viewcode-block" id="Boolean"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Boolean">[docs]</a><span class="k">class</span> <span class="nc">Boolean</span><span class="p">(</span><span class="n">Scalar</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Boolean object&quot;&quot;&quot;</span>
    
    <span class="k">def</span> <span class="nf">_convertValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">t</span> <span class="ow">is</span> <span class="nb">bool</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">value</span>
        <span class="k">if</span> <span class="n">t</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">v</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span> <span class="ow">or</span> <span class="n">v</span> <span class="o">==</span> <span class="s1">&#39;1&#39;</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> 
    
    <span class="k">def</span> <span class="nf">__nonzero__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasValue</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> 
    
    <span class="k">def</span> <span class="nf">__bool__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>  </div>
    
    
<div class="viewcode-block" id="Pointer"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Pointer">[docs]</a><span class="k">class</span> <span class="nc">Pointer</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Reference object to other one&quot;&quot;&quot;</span>
    <span class="n">EXTENDED_ATTR</span> <span class="o">=</span> <span class="s1">&#39;__attribute__&#39;</span>
    <span class="n">EXTENDED_ITEMID</span> <span class="o">=</span> <span class="s1">&#39;__itemid__&#39;</span>
    <span class="n">_ERRORS</span> <span class="o">=</span> <span class="p">{}</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">Object</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">objIsPointer</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="c1"># The _extended attribute will be used to point to attributes of a</span>
        <span class="c1"># pointed object or the id of an item inside a set</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_extended</span> <span class="o">=</span> <span class="n">String</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="s1">&#39;extended&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setExtended</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;extended&#39;</span><span class="p">))</span> 
               
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;String representation of a pointer&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasValue</span><span class="p">():</span>
            <span class="n">className</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getObjValue</span><span class="p">()</span><span class="o">.</span><span class="n">getClassName</span><span class="p">()</span>
            <span class="n">strId</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getObjValue</span><span class="p">()</span><span class="o">.</span><span class="n">strId</span><span class="p">()</span>
            <span class="k">return</span> <span class="s1">&#39;-&gt; </span><span class="si">%s</span><span class="s1"> (</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">className</span><span class="p">,</span> <span class="n">strId</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;-&gt; None&#39;</span>
    
    <span class="k">def</span> <span class="nf">__clean</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extended</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Remove old attributes conventions. &quot;&quot;&quot;</span>
        <span class="c1"># TODO: This replacements are needed now by backward compatibility</span>
        <span class="c1"># reasons, when we used __attribute__ and __item__ to mark both cases</span>
        <span class="c1"># in a future the following two lines can be removed.</span>
        <span class="n">ext</span> <span class="o">=</span> <span class="n">extended</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">EXTENDED_ATTR</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">ext</span> <span class="o">=</span> <span class="n">ext</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">EXTENDED_ITEMID</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ext</span>
        
<div class="viewcode-block" id="Pointer.hasValue"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Pointer.hasValue">[docs]</a>    <span class="k">def</span> <span class="nf">hasValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objValue</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span></div>
    
<div class="viewcode-block" id="Pointer.get"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Pointer.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Get the pointed object. </span>
<span class="sd">        By default all pointers store a &quot;pointed object&quot; value.</span>
<span class="sd">        The _extended attribute allows to also point to internal</span>
<span class="sd">        attributes or items (in case of sets) of the pointed object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">extended</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extended</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">extended</span><span class="p">:</span>
            <span class="n">ext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__clean</span><span class="p">(</span><span class="n">extended</span><span class="p">)</span>
            <span class="n">parts</span> <span class="o">=</span> <span class="n">ext</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objValue</span>
            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">parts</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">isdigit</span><span class="p">():</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)]</span>  <span class="c1"># item case</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objValue</span>
            
        <span class="k">return</span> <span class="n">value</span></div>
    
<div class="viewcode-block" id="Pointer.set"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Pointer.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Set the pointer value but cleaning the extended property. &quot;&quot;&quot;</span>
        <span class="n">Object</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
        <span class="c1"># This check is needed because set is call from the Object constructor</span>
        <span class="c1"># when this attribute is not setup yet (a dirty patch, I know)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_extended&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_extended</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span></div>
        
<div class="viewcode-block" id="Pointer.hasExtended"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Pointer.hasExtended">[docs]</a>    <span class="k">def</span> <span class="nf">hasExtended</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_extended</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>  <span class="c1"># consider empty string as false</span></div>
    
<div class="viewcode-block" id="Pointer.getExtended"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Pointer.getExtended">[docs]</a>    <span class="k">def</span> <span class="nf">getExtended</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__clean</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_extended</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">))</span></div>
        
<div class="viewcode-block" id="Pointer.setExtended"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Pointer.setExtended">[docs]</a>    <span class="k">def</span> <span class="nf">setExtended</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attribute</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Set the attribute name of the &quot;pointed object&quot;</span>
<span class="sd">        that will be the result of the get() action. </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_extended</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">attribute</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="Pointer.getExtendedParts"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Pointer.getExtendedParts">[docs]</a>    <span class="k">def</span> <span class="nf">getExtendedParts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return the extended components as a list. &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasExtended</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getExtended</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span></div>
    
<div class="viewcode-block" id="Pointer.setExtendedParts"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Pointer.setExtendedParts">[docs]</a>    <span class="k">def</span> <span class="nf">setExtendedParts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parts</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Set the extedend attribute but using </span>
<span class="sd">        a list as input. </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setExtended</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parts</span><span class="p">))</span></div>
        
<div class="viewcode-block" id="Pointer.addExtended"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Pointer.addExtended">[docs]</a>    <span class="k">def</span> <span class="nf">addExtended</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attribute</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Similar to setExtended, but concatenating more extensions</span>
<span class="sd">        instead of replacing the previous value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasExtended</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_extended</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_extended</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span> <span class="n">attribute</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setExtended</span><span class="p">(</span><span class="n">attribute</span><span class="p">)</span></div>
            
<div class="viewcode-block" id="Pointer.removeExtended"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Pointer.removeExtended">[docs]</a>    <span class="k">def</span> <span class="nf">removeExtended</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Remove the last part of the extended attribute. &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasExtended</span><span class="p">():</span>
            <span class="n">parts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getExtendedParts</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setExtendedParts</span><span class="p">(</span><span class="n">parts</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span></div>
        
<div class="viewcode-block" id="Pointer.getAttributes"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Pointer.getAttributes">[docs]</a>    <span class="k">def</span> <span class="nf">getAttributes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">yield</span> <span class="s1">&#39;_extended&#39;</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_extended&#39;</span><span class="p">)</span></div>
        
<div class="viewcode-block" id="Pointer.pointsNone"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Pointer.pointsNone">[docs]</a>    <span class="k">def</span> <span class="nf">pointsNone</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span></div>
    
<div class="viewcode-block" id="Pointer.getUniqueId"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Pointer.getUniqueId">[docs]</a>    <span class="k">def</span> <span class="nf">getUniqueId</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return an unique id concatenating the id</span>
<span class="sd">        of the direct pointed object plus the extended </span>
<span class="sd">        attribute.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">uniqueId</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getObjValue</span><span class="p">()</span><span class="o">.</span><span class="n">strId</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasExtended</span><span class="p">():</span>
            <span class="n">uniqueId</span> <span class="o">+=</span> <span class="s1">&#39;.</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">getExtended</span><span class="p">()</span>
        
        <span class="k">return</span> <span class="n">uniqueId</span></div></div>
    

<div class="viewcode-block" id="List"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.List">[docs]</a><span class="k">class</span> <span class="nc">List</span><span class="p">(</span><span class="n">Object</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
    <span class="n">ITEM_PREFIX</span> <span class="o">=</span> <span class="s1">&#39;__item__&#39;</span>
    
    <span class="sd">&quot;&quot;&quot;Class to store a list of objects&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">list</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">Object</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ITEM_PREFIX</span><span class="p">):</span>
            <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stringToIndex</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">self</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;List object has not attribute: &quot;</span> <span class="o">+</span> <span class="n">name</span><span class="p">)</span>
            
    <span class="k">def</span> <span class="nf">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;__item__&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

<div class="viewcode-block" id="List.getAttributes"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.List.getAttributes">[docs]</a>    <span class="k">def</span> <span class="nf">getAttributes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># First yield all attributes not contained in the list</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">Object</span><span class="o">.</span><span class="n">getAttributes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">yield</span> <span class="n">name</span><span class="p">,</span> <span class="n">attr</span>
        <span class="c1"># Now yield elements contained in the list</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indexToString</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">item</span></div>
            
    <span class="k">def</span> <span class="nf">_indexToString</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the way the string index is generated.</span>
<span class="sd">        String indexes will start in 1, that&#39;s why i+1</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s%06d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ITEM_PREFIX</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">_stringToIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">strIndex</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; From the string index representation obtain the index.</span>
<span class="sd">        For symetry the number in the index string will be</span>
<span class="sd">        decreased in 1.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">strIndex</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ITEM_PREFIX</span><span class="p">)[</span><span class="mi">1</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span>
            
    <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">list</span><span class="o">.</span><span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="List.getSize"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.List.getSize">[docs]</a>    <span class="k">def</span> <span class="nf">getSize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># Just to have similar API than Set</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="List.isEmpty"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.List.isEmpty">[docs]</a>    <span class="k">def</span> <span class="nf">isEmpty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span></div>
    
<div class="viewcode-block" id="List.clear"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.List.clear">[docs]</a>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">del</span> <span class="bp">self</span><span class="p">[:]</span></div>
        
    <span class="k">def</span> <span class="nf">_convertValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Value should be a list.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span>  <span class="nb">list</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;List.set: value should be a list.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span></div>
    
        
<div class="viewcode-block" id="PointerList"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.PointerList">[docs]</a><span class="k">class</span> <span class="nc">PointerList</span><span class="p">(</span><span class="n">List</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">List</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        
<div class="viewcode-block" id="PointerList.append"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.PointerList.append">[docs]</a>    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Append Pointer of objects to the list.</span>
<span class="sd">         If value is a Pointer, just add it to the list.</span>
<span class="sd">         If is another subclass of Object, create</span>
<span class="sd">         a Pointer first and append the pointer.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Pointer</span><span class="p">):</span>
            <span class="n">pointer</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Object</span><span class="p">):</span>
            <span class="n">pointer</span> <span class="o">=</span> <span class="n">Pointer</span><span class="p">()</span>
            <span class="n">pointer</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Only subclasses of Object can be added to PointerList</span><span class="se">\n</span><span class="s2">&quot;</span>
                            <span class="s2">&quot; Passing value: </span><span class="si">%s</span><span class="s2">, type: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)))</span>

        <span class="n">List</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pointer</span><span class="p">)</span></div></div>

            
<div class="viewcode-block" id="CsvList"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.CsvList">[docs]</a><span class="k">class</span> <span class="nc">CsvList</span><span class="p">(</span><span class="n">Scalar</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This class will store a list of objects</span>
<span class="sd">    in a single DB row separated by comma.</span>
<span class="sd">    pType: the type of the list elements, int, bool, str&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pType</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">Scalar</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="nb">list</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pType</span> <span class="o">=</span> <span class="n">pType</span>
        
    <span class="k">def</span> <span class="nf">_convertValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Value should be a str with comma separated values or a list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pType</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pType</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;CsvList.set: Invalid value type: &quot;</span><span class="p">,</span>
                                <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
            
<div class="viewcode-block" id="CsvList.getObjValue"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.CsvList.getObjValue">[docs]</a>    <span class="k">def</span> <span class="nf">getObjValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objValue</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="bp">self</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objValue</span></div>
    
<div class="viewcode-block" id="CsvList.get"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.CsvList.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getObjValue</span><span class="p">()</span></div>
    
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">list</span><span class="o">.</span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
     
<div class="viewcode-block" id="CsvList.isEmpty"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.CsvList.isEmpty">[docs]</a>    <span class="k">def</span> <span class="nf">isEmpty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span></div>
    
<div class="viewcode-block" id="CsvList.clear"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.CsvList.clear">[docs]</a>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">del</span> <span class="bp">self</span><span class="p">[:]</span></div>

    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Comparison for scalars should be by value</span>
<span class="sd">        and for other objects by reference.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">all</span><span class="p">(</span><span class="n">a</span> <span class="o">==</span> <span class="n">b</span> <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">))</span></div>


<div class="viewcode-block" id="Set"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set">[docs]</a><span class="k">class</span> <span class="nc">Set</span><span class="p">(</span><span class="n">OrderedObject</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; This class will be a container implementation for elements.</span>
<span class="sd">    It will use an extra sqlite file to store the elements.</span>
<span class="sd">    All items will have an unique id that identifies each element in the set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ITEM_TYPE</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># This property should be defined to know the item type</span>
    
    <span class="c1"># This will be used for stream Set where data is populated on the fly</span>
    <span class="n">STREAM_OPEN</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">STREAM_CLOSED</span> <span class="o">=</span> <span class="mi">2</span>

    <span class="n">FILE_TEMPLATE_NAME</span> <span class="o">=</span> <span class="s1">&#39;set</span><span class="si">%s</span><span class="s1">.sqlite&#39;</span>
    <span class="n">indexes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;_index&#39;</span><span class="p">]</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> 
                 <span class="n">mapperClass</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">classesDict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># Use the object value to store the filename</span>
        <span class="n">OrderedObject</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mapper</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_idCount</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_size</span> <span class="o">=</span> <span class="n">Integer</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># cached value of the number of images</span>
        <span class="c1"># It is a bit contradictory that initially a set is Closed</span>
        <span class="c1"># but this is the default behaviour of the Set before Streamming extension</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_streamState</span> <span class="o">=</span> <span class="n">Integer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">STREAM_CLOSED</span><span class="p">)</span>  
        <span class="bp">self</span><span class="o">.</span><span class="n">setMapperClass</span><span class="p">(</span><span class="n">mapperClass</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mapperPath</span> <span class="o">=</span> <span class="n">CsvList</span><span class="p">()</span>  <span class="c1"># sqlite filename</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_representative</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_classesDict</span> <span class="o">=</span> <span class="n">classesDict</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_indexes</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;indexes&#39;</span><span class="p">,</span> <span class="p">[])</span>

        <span class="c1"># If filename is passed in the constructor, it means that</span>
        <span class="c1"># we want to create a new object, so we need to delete it if</span>
        <span class="c1"># the file exists</span>
        <span class="k">if</span> <span class="n">filename</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_mapperPath</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">prefix</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
            
    <span class="k">def</span> <span class="nf">_getMapper</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This method will open the connection to the items</span>
<span class="sd">        database on demand. That&#39;s why this method should </span>
<span class="sd">        be used instead of accessing directly _mapper.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mapper</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mapper</span>
            
<div class="viewcode-block" id="Set.aggregate"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set.aggregate">[docs]</a>    <span class="k">def</span> <span class="nf">aggregate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operations</span><span class="p">,</span> <span class="n">operationLabel</span><span class="p">,</span> <span class="n">groupByLabels</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getMapper</span><span class="p">()</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="n">operations</span><span class="p">,</span> <span class="n">operationLabel</span><span class="p">,</span> <span class="n">groupByLabels</span><span class="p">)</span></div>

<div class="viewcode-block" id="Set.setMapperClass"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set.setMapperClass">[docs]</a>    <span class="k">def</span> <span class="nf">setMapperClass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">MapperClass</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Set the mapper to be used for storage. &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">MapperClass</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">pyworkflow.mapper.sqlite</span> <span class="k">import</span> <span class="n">SqliteFlatMapper</span>
            <span class="n">MapperClass</span> <span class="o">=</span> <span class="n">SqliteFlatMapper</span>
        <span class="n">Object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_MapperClass&#39;</span><span class="p">,</span> <span class="n">MapperClass</span><span class="p">)</span></div>
        
    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">itemId</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Get the image with the given id. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getMapper</span><span class="p">()</span><span class="o">.</span><span class="n">selectById</span><span class="p">(</span><span class="n">itemId</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">itemId</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; element in Set &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getMapper</span><span class="p">()</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">itemId</span><span class="p">)</span>

<div class="viewcode-block" id="Set.iterItems"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set.iterItems">[docs]</a>    <span class="k">def</span> <span class="nf">iterItems</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">orderBy</span><span class="o">=</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;ASC&#39;</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="p">,</span>
                  <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getMapper</span><span class="p">()</span><span class="o">.</span><span class="n">selectAll</span><span class="p">(</span><span class="n">orderBy</span><span class="o">=</span><span class="n">orderBy</span><span class="p">,</span>
                                           <span class="n">direction</span><span class="o">=</span><span class="n">direction</span><span class="p">,</span>
                                           <span class="n">where</span><span class="o">=</span><span class="n">where</span><span class="p">,</span>
                                           <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">)</span>  <span class="c1"># has flat mapper, iterate is true</span></div>

<div class="viewcode-block" id="Set.getFirstItem"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set.getFirstItem">[docs]</a>    <span class="k">def</span> <span class="nf">getFirstItem</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return the first item in the Set. &quot;&quot;&quot;</span>
        <span class="c1"># This function is used in many contexts where the mapper can be</span>
        <span class="c1"># left open and could be problematic locking other db</span>
        <span class="c1"># So, we looking if the mapper was closed before, in which case</span>
        <span class="c1"># we will close it after that</span>
        <span class="n">closedMapper</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mapper</span> <span class="ow">is</span> <span class="kc">None</span>
        <span class="n">firstItem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getMapper</span><span class="p">()</span><span class="o">.</span><span class="n">selectFirst</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">closedMapper</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">firstItem</span></div>
    
    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Iterate over the set of images. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">iterItems</span><span class="p">()</span>
       
    <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_size</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    
<div class="viewcode-block" id="Set.getSize"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set.getSize">[docs]</a>    <span class="k">def</span> <span class="nf">getSize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the number of images&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_size</span><span class="o">.</span><span class="n">get</span><span class="p">()</span></div>

<div class="viewcode-block" id="Set.isEmpty"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set.isEmpty">[docs]</a>    <span class="k">def</span> <span class="nf">isEmpty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getSize</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span></div>
    
<div class="viewcode-block" id="Set.getFileName"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set.getFileName">[docs]</a>    <span class="k">def</span> <span class="nf">getFileName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_mapperPath</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mapperPath</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="kc">None</span></div>
    
<div class="viewcode-block" id="Set.getPrefix"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set.getPrefix">[docs]</a>    <span class="k">def</span> <span class="nf">getPrefix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_mapperPath</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mapperPath</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="kc">None</span></div>
    
<div class="viewcode-block" id="Set.write"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set.write">[docs]</a>    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Commit the changes made to the Set underlying database.</span>
<span class="sd">        Params:</span>
<span class="sd">            properties: this flag controls when to write Set attributes to </span>
<span class="sd">                special table &#39;Properties&#39; in the database. False value is </span>
<span class="sd">                use for example in SetOfClasses for not writing each Class2D </span>
<span class="sd">                properties.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">properties</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getMapper</span><span class="p">()</span><span class="o">.</span><span class="n">setProperty</span><span class="p">(</span><span class="s1">&#39;self&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">getClassName</span><span class="p">())</span>
            <span class="n">objDict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getObjDict</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">objDict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_getMapper</span><span class="p">()</span><span class="o">.</span><span class="n">setProperty</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getMapper</span><span class="p">()</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span></div>
    
    <span class="k">def</span> <span class="nf">_loadClassesDict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_classesDict</span> <span class="ow">or</span> <span class="nb">globals</span><span class="p">()</span>
    
<div class="viewcode-block" id="Set.setClassesDict"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set.setClassesDict">[docs]</a>    <span class="k">def</span> <span class="nf">setClassesDict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">classesDict</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Set the dictionary with classes where to look for classes names. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_classesDict</span> <span class="o">=</span> <span class="n">classesDict</span></div>
    
<div class="viewcode-block" id="Set.load"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set.load">[docs]</a>    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Load extra data from files. &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mapperPath</span><span class="o">.</span><span class="n">isEmpty</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Set.load:  mapper path and prefix not set.&quot;</span><span class="p">)</span>
        <span class="n">fn</span><span class="p">,</span> <span class="n">prefix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mapperPath</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mapper</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_MapperClass</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loadClassesDict</span><span class="p">(),</span> <span class="n">prefix</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indexes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_size</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_mapper</span><span class="o">.</span><span class="n">count</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_idCount</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mapper</span><span class="o">.</span><span class="n">maxId</span><span class="p">()</span></div>
           
    <span class="k">def</span> <span class="nf">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Close connections to db when destroy this object</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mapper</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        
<div class="viewcode-block" id="Set.close"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set.close">[docs]</a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mapper</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_mapper</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_mapper</span> <span class="o">=</span> <span class="kc">None</span></div>
        
<div class="viewcode-block" id="Set.clear"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set.clear">[docs]</a>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mapper</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_idCount</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_size</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span></div>
         
<div class="viewcode-block" id="Set.append"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set.append">[docs]</a>    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Add an item to the set.</span>
<span class="sd">        If the item has already an id, use it.</span>
<span class="sd">        If not, keep a counter with the max id</span>
<span class="sd">        and assign the next one.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># The _idCount and _size properties work fine</span>
        <span class="c1"># under the assumption that once a Set is stored,</span>
        <span class="c1"># then it is read-only (no more appends).</span>
        <span class="c1">#</span>
        <span class="c1"># Anyway, this can be easily changed by updating</span>
        <span class="c1"># both from the underlying sqlite when reading a set.</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">item</span><span class="o">.</span><span class="n">hasObjId</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_idCount</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setObjId</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idCount</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_idCount</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idCount</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">getObjId</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_insertItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_size</span><span class="o">.</span><span class="n">increment</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_insertItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getMapper</span><span class="p">()</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        
<div class="viewcode-block" id="Set.update"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Update an existing item. &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getMapper</span><span class="p">()</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">item</span><span class="p">)</span></div>
                
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%-20s</span><span class="s2"> (</span><span class="si">%d</span><span class="s2"> items</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getClassName</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">getSize</span><span class="p">(),</span>
                                       <span class="bp">self</span><span class="o">.</span><span class="n">_appendStreamState</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">_appendStreamState</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isStreamClosed</span><span class="p">()</span> <span class="k">else</span> <span class="s2">&quot;, open set&quot;</span>

<div class="viewcode-block" id="Set.getSubset"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set.getSubset">[docs]</a>    <span class="k">def</span> <span class="nf">getSubset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return a subset of n element, making a clone of each. &quot;&quot;&quot;</span>
        <span class="n">subset</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">subset</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">clone</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">n</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="k">return</span> <span class="n">subset</span></div>
    
<div class="viewcode-block" id="Set.setRepresentative"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set.setRepresentative">[docs]</a>    <span class="k">def</span> <span class="nf">setRepresentative</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">representative</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_representative</span> <span class="o">=</span> <span class="n">representative</span></div>
    
<div class="viewcode-block" id="Set.getRepresentative"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set.getRepresentative">[docs]</a>    <span class="k">def</span> <span class="nf">getRepresentative</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>       
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_representative</span></div>
    
<div class="viewcode-block" id="Set.hasRepresentative"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set.hasRepresentative">[docs]</a>    <span class="k">def</span> <span class="nf">hasRepresentative</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return true if have a representative image. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_representative</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Set.equalItemAttributes"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set.equalItemAttributes">[docs]</a>    <span class="k">def</span> <span class="nf">equalItemAttributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">ignore</span><span class="o">=</span><span class="p">[],</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Compare that all items in self and other</span>
<span class="sd">        return True for equalAttributes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">all</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">getObjId</span><span class="p">()</span> <span class="o">==</span> <span class="n">y</span><span class="o">.</span><span class="n">getObjId</span><span class="p">()</span> <span class="ow">and</span>
                   <span class="n">x</span><span class="o">.</span><span class="n">equalAttributes</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">ignore</span><span class="o">=</span><span class="n">ignore</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
                   <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">))</span></div>
        
<div class="viewcode-block" id="Set.hasProperty"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set.hasProperty">[docs]</a>    <span class="k">def</span> <span class="nf">hasProperty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getMapper</span><span class="p">()</span><span class="o">.</span><span class="n">hasProperty</span><span class="p">(</span><span class="n">key</span><span class="p">)</span></div>
        
<div class="viewcode-block" id="Set.getProperty"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set.getProperty">[docs]</a>    <span class="k">def</span> <span class="nf">getProperty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">defaultValue</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getMapper</span><span class="p">()</span><span class="o">.</span><span class="n">getProperty</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">defaultValue</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="Set.loadProperty"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set.loadProperty">[docs]</a>    <span class="k">def</span> <span class="nf">loadProperty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">propertyName</span><span class="p">,</span> <span class="n">defaultValue</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Get the value of a property and</span>
<span class="sd">        set its value as an object attribute.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAttributeValue</span><span class="p">(</span><span class="n">propertyName</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">getProperty</span><span class="p">(</span><span class="n">propertyName</span><span class="p">,</span> <span class="n">defaultValue</span><span class="p">))</span></div>
        
<div class="viewcode-block" id="Set.loadAllProperties"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set.loadAllProperties">[docs]</a>    <span class="k">def</span> <span class="nf">loadAllProperties</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Retrieve all properties stored by the mapper. &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getMapper</span><span class="p">()</span><span class="o">.</span><span class="n">getPropertyKeys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">!=</span> <span class="s1">&#39;self&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">loadProperty</span><span class="p">(</span><span class="n">key</span><span class="p">)</span></div>
        
<div class="viewcode-block" id="Set.getIdSet"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set.getIdSet">[docs]</a>    <span class="k">def</span> <span class="nf">getIdSet</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return a Python set object containing all ids. &quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iterItems</span><span class="p">():</span>
            <span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">getObjId</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">s</span></div>
    
<div class="viewcode-block" id="Set.getFiles"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set.getFiles">[docs]</a>    <span class="k">def</span> <span class="nf">getFiles</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">files</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">getFileName</span><span class="p">():</span>
            <span class="n">files</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getFileName</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">files</span></div>
    
<div class="viewcode-block" id="Set.getStreamState"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set.getStreamState">[docs]</a>    <span class="k">def</span> <span class="nf">getStreamState</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_streamState</span><span class="o">.</span><span class="n">get</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="Set.setStreamState"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set.setStreamState">[docs]</a>    <span class="k">def</span> <span class="nf">setStreamState</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newState</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_streamState</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">newState</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="Set.isStreamOpen"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set.isStreamOpen">[docs]</a>    <span class="k">def</span> <span class="nf">isStreamOpen</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getStreamState</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">STREAM_OPEN</span></div>
    
<div class="viewcode-block" id="Set.isStreamClosed"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set.isStreamClosed">[docs]</a>    <span class="k">def</span> <span class="nf">isStreamClosed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getStreamState</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">STREAM_CLOSED</span> </div>
    
<div class="viewcode-block" id="Set.enableAppend"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set.enableAppend">[docs]</a>    <span class="k">def</span> <span class="nf">enableAppend</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; By default, when a Set is loaded, it is opened</span>
<span class="sd">        in read-only mode, so no new insertions are allowed.</span>
<span class="sd">        This function will allow to append more items</span>
<span class="sd">        to an existing set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getMapper</span><span class="p">()</span><span class="o">.</span><span class="n">enableAppend</span><span class="p">()</span></div>

<div class="viewcode-block" id="Set.create"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Set.create">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">template</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">suffix</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Create a set and set the filename using the suffix.</span>
<span class="sd">        If the file exists, it will be delete. &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">template</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">template</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">FILE_TEMPLATE_NAME</span>

        <span class="n">setFn</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">template</span> <span class="o">%</span> <span class="n">suffix</span><span class="p">)</span>
        <span class="c1"># Close the connection to the database if</span>
        <span class="c1"># it is open before deleting the file</span>
        <span class="n">utils</span><span class="o">.</span><span class="n">cleanPath</span><span class="p">(</span><span class="n">setFn</span><span class="p">)</span>
        <span class="kn">import</span> <span class="nn">pyworkflow.mapper</span> <span class="k">as</span> <span class="nn">pwmapper</span>
        <span class="n">pwmapper</span><span class="o">.</span><span class="n">SqliteDb</span><span class="o">.</span><span class="n">closeConnection</span><span class="p">(</span><span class="n">setFn</span><span class="p">)</span>
        <span class="n">setObj</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">setFn</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">setObj</span></div></div>

<div class="viewcode-block" id="ObjectWrap"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.ObjectWrap">[docs]</a><span class="k">def</span> <span class="nf">ObjectWrap</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This function will act as a simple Factory</span>
<span class="sd">    to create objects from Python basic types&quot;&quot;&quot;</span>
    <span class="n">t</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">Object</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">value</span>
    <span class="k">if</span> <span class="n">t</span> <span class="ow">is</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Integer</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">t</span> <span class="ow">is</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Boolean</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">t</span> <span class="ow">is</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">t</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">CsvList</span><span class="p">()</span>
        <span class="n">o</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">o</span>
    <span class="k">if</span> <span class="n">t</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="c1"># If it is str, unicode or unknown type, convert to string</span>
    <span class="k">return</span> <span class="n">String</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div>
         

<div class="viewcode-block" id="Dict"><a class="viewcode-back" href="../../api/pyworkflow.object.html#pyworkflow.object.Dict">[docs]</a><span class="k">class</span> <span class="nc">Dict</span><span class="p">(</span><span class="nb">dict</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Simple wrapper around dict class to have a default value. &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_default</span> <span class="o">=</span> <span class="n">default</span>
        <span class="nb">dict</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Get the image with the given id. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span></div>


<span class="c1"># Define a global dict with all basic defined objects</span>
<span class="n">OBJECTS_DICT</span> <span class="o">=</span> <span class="n">getSubclasses</span><span class="p">(</span><span class="n">Object</span><span class="p">,</span> <span class="nb">globals</span><span class="p">())</span>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Scipion team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-book"> Other Versions</span>
        v: release-2.0.0
        <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Branches</dt>
            <dd><a href="../../../gh-pages/index.html">gh-pages</a></dd>
            <dd><a href="object.html">release-2.0.0</a></dd>
            <dd><a href="../../../release-3.0.0/index.html">release-3.0.0</a></dd>
        </dl>
    </div>
</div>


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>