

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tutorial - Denoising, Membrane Segmentation and Annotation and Directional Picking &mdash; Scipion 3.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/banner.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> Scipion
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Set up</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../scipion-modes/how-to-install.html">Installing Scipion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scipion-modes/scipion-configuration.html">Scipion configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scipion-modes/host-configuration.html">Host configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption"><span class="caption-text">User documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user-documentation.html">Graphical interface manuals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-documentation.html#tutorials">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-documentation.html#processing-how-to-s">Processing How To’s</a></li>
</ul>
<p class="caption"><span class="caption-text">Facilities</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../facilities/facilities.html">On-the-fly processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../facilities/facilities-workflows.html">Streaming workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../facilities/customize-report.html">Summary Reports</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../developer/developers.html">Developers Page</a></li>
</ul>
<p class="caption"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/scipion-API.html">Scipion API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/plugins-API.html">Plugins API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/xmipp-API.html">Xmipp API</a></li>
</ul>
<p class="caption"><span class="caption-text">Get in touch</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../misc/contact-us.html">Contact Us</a></li>
</ul>
<p class="caption"><span class="caption-text">Licences</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../license.html">Licenses</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Scipion</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
      <li>Tutorial - Denoising, Membrane Segmentation and Annotation and Directional Picking</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/docs/user/denoising_mbSegmentation_pysegDirPicking/tomosegmemTV_pySeg_workflow.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="figure">
<a class="reference internal image-reference" href="../../../_images/scipion_logo.gif"><img alt="scipion logo" src="../../../_images/scipion_logo.gif" style="width: 250px;" /></a>
</div>
<div class="section" id="tutorial-denoising-membrane-segmentation-and-annotation-and-directional-picking">
<span id="id1"></span><h1><a class="toc-backref" href="#id3">Tutorial - Denoising, Membrane Segmentation and Annotation and Directional Picking</a><a class="headerlink" href="#tutorial-denoising-membrane-segmentation-and-annotation-and-directional-picking" title="Permalink to this headline">¶</a></h1>
<p>This tutorial covers a part of the full data processing pipeline in cryo electron tomography, concretely from the
tomogram to the initial model generation after having picked the particles. All the data processing has been carried
out in <a class="reference external" href="http://scipion.i2pc.es/">Scipion</a>, using the plugins listed below for each step:</p>
<ol class="arabic simple">
<li>Import tomograms - <a class="reference external" href="https://github.com/scipion-em/scipion-em-tomo">scipion-em-tomo</a></li>
<li>Tomogram normalization - <a class="reference external" href="https://github.com/scipion-em/scipion-em-imod">scipion-em-imod</a></li>
<li>Tomogram denoising - <a href="#id9"><span class="problematic" id="id10">scipion-em-jjsoft_</span></a></li>
<li>Tomogram segmentation, annotation and tomomask (segmemtation) resizing - <a class="reference external" href="https://github.com/scipion-em/scipion-em-tomosegmemtv">scipion-em-tomosegmemtv</a></li>
<li>Assign tomomasks to tomograms - <a class="reference external" href="https://github.com/scipion-em/scipion-em-tomo">scipion-em-tomo</a></li>
<li>Directional picking (preseg, graphs, filaments and picking) - <a class="reference external" href="https://github.com/scipion-em/scipion-em-pyseg">scipion-em-pyseg</a></li>
<li>Remove duplicates (filter picked particles by distance) - <a class="reference external" href="https://github.com/scipion-em/scipion-em-tomo3d">scipion-em-tomo3d</a></li>
<li>Extract particles - <a class="reference external" href="https://github.com/scipion-em/scipion-em-emantomo">scipion-em-emantomo</a></li>
<li>2D classification and rot angle randomization - <a class="reference external" href="https://github.com/scipion-em/scipion-em-pyseg">scipion-em-pyseg</a></li>
<li>Generate an initial model - <a class="reference external" href="https://github.com/scipion-em/scipion-em-reliontomo">scipion-em-reliontomo</a></li>
</ol>
<p>Thus, 8 different plugins will be used in this tutorial, highlighting the power of Scipion in terms of interoperability.</p>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#tutorial-denoising-membrane-segmentation-and-annotation-and-directional-picking" id="id3">Tutorial - Denoising, Membrane Segmentation and Annotation and Directional Picking</a><ul>
<li><a class="reference internal" href="#the-dataset" id="id4">The dataset</a></li>
<li><a class="reference internal" href="#preparing-the-project" id="id5">Preparing the project</a></li>
<li><a class="reference internal" href="#importing-the-tomogram" id="id6">Importing the tomogram</a></li>
<li><a class="reference internal" href="#tomogram-normalization" id="id7">Tomogram normalization</a></li>
<li><a class="reference internal" href="#tomogram-denoising" id="id8">Tomogram denoising</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="the-dataset">
<h2><a class="toc-backref" href="#id4">The dataset</a><a class="headerlink" href="#the-dataset" title="Permalink to this headline">¶</a></h2>
<p>The dataset reference used in this tutorial is <a class="reference external" href="https://www.ebi.ac.uk/emdb/EMD-10439?tab=overview">EMD-10439</a>, which consists of an in situ tomogram of intact P19 cells
acquired with phase-plate, with a sampling rate of 13.68 Å/voxel and dimensions (X, Y, Z) = (928, 928, 500) pixels.</p>
</div>
<div class="section" id="preparing-the-project">
<h2><a class="toc-backref" href="#id5">Preparing the project</a><a class="headerlink" href="#preparing-the-project" title="Permalink to this headline">¶</a></h2>
<p>First of all, open a terminal and execute the command scipion3 to run Scipion. After that:</p>
<ol class="arabic simple">
<li>Click on button “Create Project”.</li>
<li>Write a name for it. We’ll name it tomo_workshop_2021_tomosegmemTV_pyseg.</li>
<li>Click on button “Create”.</li>
</ol>
<div class="figure">
<a class="reference internal image-reference" href="../../../_images/00_createProject.png"><img alt="Create Project" src="../../../_images/00_createProject.png" style="width: 400px;" /></a>
</div>
<p>Note: the protocols can be located on the left panel of the project interface or directly search via ctrl + f and typing
the keywords that may represent what it is desired to be found, like a plugin name, a protocol name, an action, etc.</p>
</div>
<div class="section" id="importing-the-tomogram">
<span id="id2"></span><h2><a class="toc-backref" href="#id6">Importing the tomogram</a><a class="headerlink" href="#importing-the-tomogram" title="Permalink to this headline">¶</a></h2>
<p>Let’s begin importing the tomogram. This is the entry point to Scipion, in which external data files are represented as
Scipion objects, which is a common representation of the data used to make all the different packages speak to each
other. To do that, simply look for a protocol named “import tomograms” and click on it. On tab “Import”, introduce the
directory in which the tomogram file is located, then the full name or a pattern in the second field and finally the
sampling rate, which is, as mentioned before, 13.68 Å/voxel. Leave the other two tabs with the default values and click
on “Execute” button.</p>
<div class="figure">
<a class="reference internal image-reference" href="../../../_images/01_ImportTomo.png"><img alt="Import tomogram" src="../../../_images/01_ImportTomo.png" style="width: 500px;" /></a>
</div>
<p>The imported data can be now visualized by clinking on button “Analyze”, located on the top right corner of the bottom
panel. This will generate an auxiliary window which will lists the tomograms contained in the set imported. In our case,
there is only one tomogram. To open it with IMOD’s viewer 3dmod (integrated as part of plugin scipion-em-imod), simply
double click on it.</p>
<div class="figure">
<a class="reference internal image-reference" href="../../../_images/01_res_ImportTomo.png"><img alt="Import tomogram result" src="../../../_images/01_res_ImportTomo.png" style="width: 500px;" /></a>
</div>
</div>
<div class="section" id="tomogram-normalization">
<h2><a class="toc-backref" href="#id7">Tomogram normalization</a><a class="headerlink" href="#tomogram-normalization" title="Permalink to this headline">¶</a></h2>
<p>In this step, we are going to divide by two the size of the tomogram in order to make the denoising, segmentation and
annotation steps faster and, in the case of the membranes segmentation and annotation, making it easier to the
algorithm to detect them, because of the enhanced contrast as the binning gets higher. To do that, we are going to use
the protocol called “tomo normalization” from plugin scipion-em-imod. Once the protocol form is on the screen, follow
the steps listed below:</p>
<p>1. To get the pointer to the tomogram previously imported, click on the magnifier icon. This action will open an
auxiliary window which will lists the existing objects of the same type as expected.</p>
<ol class="arabic simple" start="2">
<li>At this point of the wokflow, we only have the tomogram imported before. Hence, select it.</li>
<li>Click on “Select” button.</li>
</ol>
<p>4. Introduce vale 2 in “Binning” field, to indicate that the resulting tomogram must be half of the size of the input
tomogram. Consequently, the sampling rate of the output tomogram will be the double, as can be observed in the summary
panel at the bottom of the project interface.</p>
<div class="figure">
<a class="reference internal image-reference" href="../../../_images/02_NormalizeTomo.png"><img alt="Normalize tomogram" src="../../../_images/02_NormalizeTomo.png" style="width: 650px;" /></a>
</div>
</div>
<div class="section" id="tomogram-denoising">
<h2><a class="toc-backref" href="#id8">Tomogram denoising</a><a class="headerlink" href="#tomogram-denoising" title="Permalink to this headline">¶</a></h2>
<p>This step is recommended to be carried out before the membrane segmentation, considering that the higher contrast our
data has, the better the membranes will be segmented. To do that, open the protocol “denoise tomogram” from plugin
scipion-em-jjsoft. Once there, click on the magnifier icon and select, on the pop-up window the pointer to the
normalized tomogram (it should be the first on the list, because the objects generated are sorted from newest to
oldest by default). Leave the rest of parameters with the default values and click execute the protocol.</p>
<div class="figure">
<a class="reference internal image-reference" href="../../../_images/03_DenoiseTomo.png"><img alt="Denoise tomogram" src="../../../_images/03_DenoiseTomo.png" style="width: 500px;" /></a>
</div>
<p>The denoised tomogram can be displayed proceeding the same as explain in section <a class="reference internal" href="#importing-the-tomogram">Importing the Tomogram</a>. It can be observed
how the contrast has been considerably increased, being the figure on the left the tomogram before the denoising and
the one on the right after the denoising.</p>
<div class="figure">
<a class="reference internal image-reference" href="../../../_images/03_res_DenoiseTomo.png"><img alt="Denoise tomogram result" src="../../../_images/03_res_DenoiseTomo.png" style="width: 1000px;" /></a>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Scipion team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-book"> Other Versions</span>
        v: jj_denoise_segmentation_dirPicking_workshop
        <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Branches</dt>
            <dd><a href="../../../../gh-pages/index.html">gh-pages</a></dd>
            <dd><a href="tomosegmemTV_pySeg_workflow.html">jj_denoise_segmentation_dirPicking_workshop</a></dd>
            <dd><a href="../../../../release-2.0.0/index.html">release-2.0.0</a></dd>
            <dd><a href="../../../../release-3.0.0/index.html">release-3.0.0</a></dd>
            <dd><a href="../../../../rsanchezgarc-patch-1/index.html">rsanchezgarc-patch-1</a></dd>
            <dd><a href="../../../../tomo_picking_tutorial/index.html">tomo_picking_tutorial</a></dd>
        </dl>
    </div>
</div>


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>