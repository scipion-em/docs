

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>DataSets &mdash; Scipion 3.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/banner.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Scipion
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Set up</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../scipion-modes/how-to-install.html">Installing Scipion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scipion-modes/scipion-configuration.html">Scipion configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scipion-modes/host-configuration.html">Host configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption"><span class="caption-text">User documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user/user-documentation.html">Graphical interface manuals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/user-documentation.html#tutorials">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/user-documentation.html#processing-how-to-s">Processing How To’s</a></li>
</ul>
<p class="caption"><span class="caption-text">Facilities</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../facilities/facilities.html">On-the-fly processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../facilities/facilities-workflows.html">Streaming workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../facilities/customize-report.html">Summary Reports</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="developers.html">Developers Page</a></li>
</ul>
<p class="caption"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/scipion-API.html">Scipion API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/plugins-API.html">Plugins API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/xmipp-API.html">Xmipp API</a></li>
</ul>
<p class="caption"><span class="caption-text">Get in touch</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../misc/contact-us.html">Contact Us</a></li>
</ul>
<p class="caption"><span class="caption-text">Licences</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user/license.html">Licenses</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Scipion</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>DataSets</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/docs/developer/dataset-dev.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="figure">
<a class="reference internal image-reference" href="../../_images/scipion_logo.gif"><img alt="scipion logo" src="../../_images/scipion_logo.gif" style="width: 250px;" /></a>
</div>
<div class="section" id="datasets">
<span id="datasets-dev"></span><h1>DataSets<a class="headerlink" href="#datasets" title="Permalink to this headline">¶</a></h1>
<p>In order to <a class="reference external" href="writing-tests">create and run Scipion tests</a> , we provide a set
of DataSets that can be used for such purposes. They are hosted on the
institution’s servers and when invoked from Scipion, they are downloaded
locally to be used by the tests. Each one is contained by volumes, stack of
particles, micrographs, movies, etc …</p>
<p>The dataset list can be displayed with the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">scipion3</span> <span class="n">testdata</span> <span class="o">--</span><span class="nb">list</span>
</pre></div>
</div>
<p>The datasets can be downloaded using the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">scipion3</span> <span class="n">testdata</span> <span class="o">--</span><span class="n">download</span> <span class="o">&lt;</span><span class="n">dataset_name</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Then, the data found within the datasets folders could be used to perform the tests.</p>
<p>The downloaded dataset folder by default is locate in:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ~/&lt;scipion_folder&gt;/data/tests/
</pre></div>
</div>
<p>but we can download in another place changing in the Scipion config file the
<cite>SCIPION_TESTS</cite> variable.</p>
<p>The rest of the options, we can be displayed using the <cite>-h</cite> parameter.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>./scipion3 testdata -h

usage: pw_sync_data.py [-h] [--download | --upload | --list | --format]
                   [--delete] [-u URL] [--check-all] [-l LOGIN]
                   [-rf REMOTEFOLDER] [-v]
                   [DATASET [DATASET ...]]

Scipion data synchronization. Get(put) tests data, from(to) the server
to(from) the $SCIPION_TESTS folder.

positional arguments:
  DATASET               Name of a dataset.

optional arguments:
  -h, --help            show this help message and exit
  --download            Download dataset.
  --upload              Upload local dataset to the server. The dataset name
                        must be the name of its folder relative to the
                        $SCIPION_TESTS folder.
  --list                List local datasets (from $SCIPION_TESTS) and remote
                        ones (remote url can be specified with --url).
  --format              Create a MANIFEST file with checksums in the datasets
                        folders.
  --delete              When uploading, delete any remote files in the dataset
                        not present in local. It leaves the remote scipion
                        data directory as it is in the local one. Dangerous,
                        use with caution.
  -u URL, --url URL     URL where remote datasets will be looked for.
  --check-all           See if there is any remote dataset not in sync with
                        locals.
  -l LOGIN, --login LOGIN
                        ssh login string. For upload
  -rf REMOTEFOLDER, --remotefolder REMOTEFOLDER
                        remote folder to put the dataset there. For upload.
  -v, --verbose         Print more details.
</pre></div>
</div>
<p>Another way to use the datasets that are provided by Scipion, is to let the tests
themselves take responsibility for downloading them and then select the data
that will be used by the test. In that sence, Scipion provide a class named
<strong>DataSet</strong> which is responsible for download and handle the datasets.</p>
<div class="section" id="add-your-own-dataset">
<h2>Add your own DataSet<a class="headerlink" href="#add-your-own-dataset" title="Permalink to this headline">¶</a></h2>
<p>If you need an additional dataset you can do this and host it where ever you want/can.
Let’s assume you need a new dataset…</p>
<ul class="simple">
<li>usually you work first locally until you are happy with your data set.</li>
<li>Decide where to host it and upload it. For that scipion3 will:</li>
<li>Generate a <code class="docutils literal notranslate"><span class="pre">MANIFEST</span></code> file</li>
<li>rsync it to your server, you will need to provide a login info (like <a class="reference external" href="mailto:user&#37;&#52;&#48;server&#46;com">user<span>&#64;</span>server<span>&#46;</span>com</a>, and a remote folder location.</li>
<li>type something like:</li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>scipion3 testdata --upload myplugin123_testdata -l user@server.com -rf /path/at/the/server/for/your/datasets
</pre></div>
</div>
<p>Please note that the dataset name must be unique, so better prefix it with the plugin name. <code class="docutils literal notranslate"><span class="pre">-l</span></code> is the login for your
server and <code class="docutils literal notranslate"><span class="pre">-rf</span></code> is the remote folder where to rsync your files.</p>
<ul class="simple">
<li>Refer to it in your tests, at you tests <code class="docutils literal notranslate"><span class="pre">folder/__init__.py</span></code>:</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">DataSet</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;myplugin123_testdata&#39;</span><span class="p">,</span>
        <span class="n">folder</span><span class="o">=</span><span class="s1">&#39;myplugin123_testdata&#39;</span><span class="p">,</span>
        <span class="n">files</span><span class="o">=</span><span class="p">{</span>
               <span class="s1">&#39;file1&#39;</span><span class="p">:</span> <span class="s1">&#39;file1.txt&#39;</span>
               <span class="o">...</span><span class="p">},</span>
        <span class="n">url</span><span class="o">=</span><span class="s1">&#39;http://wwww.server.com/datasets&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">url parameter should be a valid url where your dataset is being published.
TIP: I haven’t tried, but doing the upload yourself, to generate the MANIFEST and then adding your datasets + MANIFEST
to github might also work if you later point to the gitraw url?? (disclaimer…has not been tested.)</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Scipion team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-book"> Other Versions</span>
        v: jj_denoise_segmentation_dirPicking_workshop
        <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Branches</dt>
            <dd><a href="../../../gh-pages/index.html">gh-pages</a></dd>
            <dd><a href="dataset-dev.html">jj_denoise_segmentation_dirPicking_workshop</a></dd>
            <dd><a href="../../../release-2.0.0/index.html">release-2.0.0</a></dd>
            <dd><a href="../../../release-3.0.0/docs/developer/dataset-dev.html">release-3.0.0</a></dd>
            <dd><a href="../../../rsanchezgarc-patch-1/docs/developer/dataset-dev.html">rsanchezgarc-patch-1</a></dd>
        </dl>
    </div>
</div>


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>