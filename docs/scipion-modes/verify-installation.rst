.. figure:: /docs/images/scipion_logo.gif
   :width: 250
   :alt: scipion logo

.. _verify-installation:

=================================
Verify installation
=================================

Some of these tests run very quick. Their main goal is to validate the
behavior of some important classes and functions (in the spirit of unit
tests).

Other tests are more focused on the execution of protocols and complete
workflows. They usually take more time to execute, and require some
input data (which should be downloaded automatically on demand).

In the following sections you will find a brief explanation about the
more important tests, and their input data. All of them must be executed
from the command line using the specified commands.

.. contents:: Table of Contents


Small tests
============

Basic tests
-----------

+-----------+------------------------------------------------------------------+
| Plugins   | Core, Xmipp, Relion                                              |
+-----------+------------------------------------------------------------------+
|           | ``scipion tests pyworkflowtests.tests.test_object.TestObject``   |
+-----------+------------------------------------------------------------------+
|           | ``scipion tests pyworkflowtests.tests.test_mappers``             |
+-----------+------------------------------------------------------------------+
|           | ``scipion tests pwem.tests.data.test_data``                      |
+-----------+------------------------------------------------------------------+
|           | ``scipion tests xmipp3.tests.test_convert_xmipp``                |
+-----------+------------------------------------------------------------------+
|           | ``scipion tests relion.tests.test_convert_relion``               |
+-----------+------------------------------------------------------------------+

Spider MDA Workflow
--------------------

+-----------+--------------------------------------------------------+
| Plugins   | Spider                                                 |
+-----------+--------------------------------------------------------+
| Command   | ``scipion tests spider.tests.test_workflow_spiderMDA`` |
+-----------+--------------------------------------------------------+
|  Input    | Fake dataset of Worm Hemogoblin with 76 images         |
+-----------+--------------------------------------------------------+
|  Time     | ~50 sec                                                |
+-----------+--------------------------------------------------------+



EMX import
-----------

+-----------+--------------------------------------------------------------+
| Plugins   | emxlib                                                       |
+-----------+--------------------------------------------------------------+
| Command   |``scipion tests emxlib.tests.test_protocols_emx.TestEmxBase`` |
+-----------+--------------------------------------------------------------+
|  Input    | The different data sets used in http://i2pc.cnb.csic.es/emx  |
+-----------+--------------------------------------------------------------+
|  Time     | ~10 sec                                                      |
+-----------+--------------------------------------------------------------+


CTF Discrepancy
-----------------

+-----------+-------------------------------------------------------------------------------------------+
| Plugins   | Xmipp, Cistem                                                                             |
+-----------+-------------------------------------------------------------------------------------------+
| Command   | ``scipion tests pwem.tests.workflows.test_workflow_xmipp_ctf_consensus.TestCtfConsensus`` |
+-----------+-------------------------------------------------------------------------------------------+
|  Input    | CTF obtained from micrograph of PcV                                                       |
|           | (http://dx.doi.org/doi:10.1073/pnas.1404330111)                                           |
+-----------+-------------------------------------------------------------------------------------------+
|  Time     | ~10 sec                                                                                   |
+-----------+-------------------------------------------------------------------------------------------+


Medium tests
============

Xmipp Workflow
---------------

+-----------+--------------------------------------------------------------------------------------+
| Plugins   | Xmipp                                                                                |
+-----------+--------------------------------------------------------------------------------------+
| Command   | ``scipion tests pwem.tests.workflows.test_workflow_xmipp``                           |
+-----------+--------------------------------------------------------------------------------------+
|  Input    | Same data as in Xmipp Workflow. A refined volume generated with Frealign is obtained |
+-----------+--------------------------------------------------------------------------------------+
|  Time     | ~300 sec                                                                             |
+-----------+--------------------------------------------------------------------------------------+
|  CPU      | i7-2640M 2.8GHz, 8GB RAM                                                             |
+-----------+--------------------------------------------------------------------------------------+


Mixed Workflow 3D Reconstruction
--------------------------------
+-----------+--------------------------------------------------------------------------------------+
| Plugins   | Xmipp, EMAN                                                                          |
+-----------+--------------------------------------------------------------------------------------+
| Command   | ``scipion tests pwem.tests.workflows.test_workflow_mixed.TestMixedBPV``              |
+-----------+--------------------------------------------------------------------------------------+
|  Input    | Same data as in Xmipp Workflow. A refined volume generated with Frealign is obtained |
+-----------+--------------------------------------------------------------------------------------+
|  Time     | ~150 sec                                                                             |
+-----------+--------------------------------------------------------------------------------------+
|  CPU      | i7-2640M 2.8GHz, 8GB RAM                                                             |
+-----------+--------------------------------------------------------------------------------------+

Mixed Workflow Initial Volume
------------------------------

+-----------+--------------------------------------------------------------------------------------+
| Plugins   | Xmipp, EMAN                                                                          |
+-----------+--------------------------------------------------------------------------------------+
| Command   | ``scipion tests pwem.tests.workflows.test_workflow_mixed.TestMixedBPV2``             |
+-----------+--------------------------------------------------------------------------------------+
|  Input    | Same data as in Xmipp Workflow. An initial volume generated with EMAN is obtained    |
+-----------+--------------------------------------------------------------------------------------+
|  Time     | ~200 sec                                                                             |
+-----------+--------------------------------------------------------------------------------------+
|  CPU      | i7-2640M 2.8GHz, 8GB RAM                                                             |
+-----------+--------------------------------------------------------------------------------------+

Large Tests
===========

[WARNING]
The following tests must be run on computers with enough processing power.

Mixed Workflow Relion 2D classification
-------------------------------------------

+-----------+----------------------------------------------------------------------------------------------------+
| Plugins   | Xmipp, Cistem, EMAN, Relion                                                                        |
+-----------+----------------------------------------------------------------------------------------------------+
| Command   | ``scipion tests pwem.tests.workflows.test_workflow_mixed_large.TestMixedRelionTutorial``           |
+-----------+----------------------------------------------------------------------------------------------------+
|  Input    | Dataset with 20 micrographs of the Ribosome.                                                       |
+-----------+----------------------------------------------------------------------------------------------------+
|  Time     | ~3*h* sec                                                                                          |
+-----------+----------------------------------------------------------------------------------------------------+
|  CPU      | 16 CPUs. Xeon(R) E5540 2.53 GHz, 64 GB RAM                                                         |
+-----------+----------------------------------------------------------------------------------------------------+


Random Conical Tilt reconstruction
----------------------------------

+-----------+-------------------------------------------------------------------------+
| Plugins   | Xmipp                                                                   |
+-----------+-------------------------------------------------------------------------+
| Command   | ``scipion tests pwem.tests.workflows.test_workflow_xmipp_rct``          |
+-----------+-------------------------------------------------------------------------+
|  Input    |  Dataset with 6 pairs of untilted-tilted micrographs.                   |
+-----------+-------------------------------------------------------------------------+
|  Time     | ~15 min                                                                 |
+-----------+-------------------------------------------------------------------------+
|  CPU      | 4 CPUs. Intel(R) Core(TM) i7-2640M CPU @ 2.80GHz, 8 GB RAM              |
+-----------+-------------------------------------------------------------------------+


Procotol Tests
===============

Import different type of objects
---------------------------------

+-----------------------+------------------------------------------------------------------------------------+
| Plugins               | Scipion                                                                            |
+-----------------------+------------------------------------------------------------------------------------+
| Import micrographs    | ``scipion tests pwem.tests.protocols.test_protocols_import_micrographs``           |
+-----------------------+------------------------------------------------------------------------------------+
|  Import particles     |  ``scipion tests pwem.tests.protocols.test_protocols_import_particles``            |
+-----------------------+------------------------------------------------------------------------------------+
|  Import volumes       | ``scipion tests pwem.tests.protocols.test_protocols_import_volumes``               |
+-----------------------+------------------------------------------------------------------------------------+
|  Input                | From different datasets                                                            |
+-----------------------+------------------------------------------------------------------------------------+
|  Time                 | ~15 min                                                                            |
+-----------------------+------------------------------------------------------------------------------------+
|  CPU                  | i7-2640M 2.8GHz, 8GB RAM                                                           |
+-----------------------+------------------------------------------------------------------------------------+


Processing micrographs
-----------------------

+--------------------+----------------------------------------------------------------------------------------+
| Plugins            | Xmipp                                                                                  |
+--------------------+----------------------------------------------------------------------------------------+
| preprocess         | ``scipion tests xmipp3.tests.test_protocols_xmipp_mics.TestXmippPreprocessMicrographs``|
+--------------------+----------------------------------------------------------------------------------------+
|  ctf estimation    |  ``scipion tests xmipp3.tests.test_protocols_xmipp_mics.TestXmippCTFEstimation``       |
+--------------------+----------------------------------------------------------------------------------------+
|  Extract Particles | ``scipion tests xmipp3.tests.test_protocols_xmipp_mics.TestXmippExtractParticles``     |
+--------------------+----------------------------------------------------------------------------------------+

+--------------------+----------------------------------------------------------------------------------------+
|  Software          | Cistem                                                                                 |
+--------------------+----------------------------------------------------------------------------------------+
|  ctf estimation    | ``scipion tests cistem.tests.test_protocols_cistem.TestCtffind4``                      |
+--------------------+----------------------------------------------------------------------------------------+
|  Input             | Dataset xmipp tutorial                                                                 |
+--------------------+----------------------------------------------------------------------------------------+
|  Time              |                                                                                        |
+--------------------+----------------------------------------------------------------------------------------+
|  CPU               | i7-2640M 2.8GHz, 8GB RAM                                                               |
+--------------------+----------------------------------------------------------------------------------------+



Preprocessing 2D
-----------------

+----------------------+----------------------------------------------------------------------------------+
| Software             | Xmipp                                                                            |
+----------------------+----------------------------------------------------------------------------------+
|  Create Mask 2D      | ``scipion tests xmipp3.tests.test_protocols_xmipp_2d.TestXmippCreateMask2D``     |
+----------------------+----------------------------------------------------------------------------------+
|  Apply Mask 2D       |  ``scipion tests xmipp3.tests.test_protocols_xmipp_2d.TestXmippApplyMask2D``     |
+----------------------+----------------------------------------------------------------------------------+
|  Filter Particles    | ``scipion tests xmipp3.tests.test_protocols_xmipp_2d.TestXmippFilterParticles``  |
+----------------------+----------------------------------------------------------------------------------+

+----------------------+----------------------------------------------------------------------------------+
|  Software            | Relion                                                                           |
+----------------------+----------------------------------------------------------------------------------+
| Preprocess Particles | ``scipion tests relion.tests.test_protocols_relion.TestRelionPreprocess``        |
+----------------------+----------------------------------------------------------------------------------+
|  Input               | From different datasets                                                          |
+----------------------+----------------------------------------------------------------------------------+
|  Time                |  ~400 sec                                                                        |
+----------------------+----------------------------------------------------------------------------------+
|  CPU                 | i7-2640M 2.8GHz, 8GB RAM                                                         |
+----------------------+----------------------------------------------------------------------------------+

Particles alignment and classification
---------------------------------------

+----------------------+----------------------------------------------------------------------------------+
| Software             | Xmipp                                                                            |
+----------------------+----------------------------------------------------------------------------------+
|  ML2D                | ``scipion tests xmipp3.tests.test_protocols_xmipp_2d.TestXmippML2D``             |
+----------------------+----------------------------------------------------------------------------------+
|  CL2D                |  ``scipion tests xmipp3.tests.test_protocols_xmipp_2d.TestXmippCL2D``            |
+----------------------+----------------------------------------------------------------------------------+
|  CL2D Align          | ``scipion tests xmipp3.tests.test_protocols_xmipp_2d.TestXmippProtCL2DAlign``    |
+----------------------+----------------------------------------------------------------------------------+
|  Apply Alignment     | ``scipion tests xmipp3.tests.test_protocols_xmipp_2d.TestXmippApplyAlignment``   |
+----------------------+----------------------------------------------------------------------------------+
|  Rotational Spectra  | ``scipion tests xmipp3.tests.test_protocols_xmipp_2d.TestXmippRotSpectra``       |
+----------------------+----------------------------------------------------------------------------------+
|  Kerdensom           | ``scipion tests xmipp3.tests.test_protocols_xmipp_2d.TestXmippKerdensom``        |
+----------------------+----------------------------------------------------------------------------------+

+----------------------+----------------------------------------------------------------------------------+
|  Software            |  Relion                                                                          |
+----------------------+----------------------------------------------------------------------------------+
|  Classify 2D         | ``scipion tests relion.tests.test_protocols_relion.TestRelionClassify2D``        |
+----------------------+----------------------------------------------------------------------------------+
|  Input               | Mda dataset                                                                      |
+----------------------+----------------------------------------------------------------------------------+
|  CPU                 | i7-2640M 2.8GHz, 8GB RAM                                                         |
+----------------------+----------------------------------------------------------------------------------+


Preprocessing 3D
------------------
+----------------------+----------------------------------------------------------------------------------+
| Software             | Xmipp                                                                            |
+----------------------+----------------------------------------------------------------------------------+
|  Create Mask 3D      | ``scipion tests xmipp3.tests.test_protocols_xmipp_3d.TestXmippCreateMask3D``     |
+----------------------+----------------------------------------------------------------------------------+
|  Apply Mask 3D       | ``scipion tests xmipp3.tests.test_protocols_xmipp_3d.TestXmippApplyMask3D``      |
+----------------------+----------------------------------------------------------------------------------+
|  Filter Volumes      | ``scipion tests xmipp3.tests.test_protocols_xmipp_3d.TestXmippFilterVolumes``    |
+----------------------+----------------------------------------------------------------------------------+
| Preprocess Volumes   | ``scipion tests xmipp3.tests.test_protocols_xmipp_3d.TestXmippPreprocessVolumes``|
+----------------------+----------------------------------------------------------------------------------+
|  Input               | Same data as in Xmipp Workflow.                                                  |
+----------------------+----------------------------------------------------------------------------------+
|  Time                |  ~400 sec                                                                        |
+----------------------+----------------------------------------------------------------------------------+
|  CPU                 | i7-2640M 2.8GHz, 8GB RAM                                                         |
+----------------------+----------------------------------------------------------------------------------+



Initial volume
---------------
+--------------------------+--------------------------------------------------------------------------------------------+
| tests                     | *Significant*                                                                              |
+--------------------------+--------------------------------------------------------------------------------------------+
| Software                 | Xmipp                                                                                      |
+--------------------------+--------------------------------------------------------------------------------------------+
|  Reconstruct significant | ``scipion tests pwem.tests.workflows.test_workflow_initialvolume.TestSignificant``         |
+--------------------------+--------------------------------------------------------------------------------------------+
|  Input                   | Groel data                                                                                 |
+--------------------------+--------------------------------------------------------------------------------------------+
|  Time                    |  ~27 min                                                                                   |
+--------------------------+--------------------------------------------------------------------------------------------+
|  CPU                     | 4 CPUs on Asimov                                                                           |
+--------------------------+--------------------------------------------------------------------------------------------+


Classify 3D
-------------

+--------------------------+--------------------------------------------------------------------------+
| tests                     | *Classify 3D*                                                            |
+--------------------------+--------------------------------------------------------------------------+
| Software                 | Relion                                                                   |
+--------------------------+--------------------------------------------------------------------------+
| Relion Classify 3D       | ``scipion tests relion.tests.test_protocols_relion.TestRelionClassify3D``|
+--------------------------+--------------------------------------------------------------------------+
|  Input                   | MDA data                                                                 |
+--------------------------+--------------------------------------------------------------------------+
|  Time                    | ~200 sec                                                                 |
+--------------------------+--------------------------------------------------------------------------+
|  CPU                     | i7-2640M 2.8GHz, 8GB RAM                                                 |
+--------------------------+--------------------------------------------------------------------------+

